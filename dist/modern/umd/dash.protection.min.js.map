{"version":3,"file":"dash.protection.min.js","mappings":"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","sources":["webpack://dashjs/webpack/universalModuleDefinition","webpack://dashjs/./node_modules/path-browserify/index.js","webpack://dashjs/./node_modules/ua-parser-js/src/ua-parser.js","webpack://dashjs/./node_modules/core-js/internals/a-callable.js","webpack://dashjs/./node_modules/core-js/internals/a-possible-prototype.js","webpack://dashjs/./node_modules/core-js/internals/an-instance.js","webpack://dashjs/./node_modules/core-js/internals/an-object.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-byte-length.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-is-detached.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-not-detached.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-transfer.js","webpack://dashjs/./node_modules/core-js/internals/array-buffer-view-core.js","webpack://dashjs/./node_modules/core-js/internals/array-from-constructor-and-list.js","webpack://dashjs/./node_modules/core-js/internals/array-includes.js","webpack://dashjs/./node_modules/core-js/internals/array-iteration-from-last.js","webpack://dashjs/./node_modules/core-js/internals/array-method-is-strict.js","webpack://dashjs/./node_modules/core-js/internals/array-reduce.js","webpack://dashjs/./node_modules/core-js/internals/array-set-length.js","webpack://dashjs/./node_modules/core-js/internals/array-slice.js","webpack://dashjs/./node_modules/core-js/internals/array-sort.js","webpack://dashjs/./node_modules/core-js/internals/array-to-reversed.js","webpack://dashjs/./node_modules/core-js/internals/array-with.js","webpack://dashjs/./node_modules/core-js/internals/classof-raw.js","webpack://dashjs/./node_modules/core-js/internals/classof.js","webpack://dashjs/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://dashjs/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://dashjs/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://dashjs/./node_modules/core-js/internals/create-property-descriptor.js","webpack://dashjs/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://dashjs/./node_modules/core-js/internals/define-built-in.js","webpack://dashjs/./node_modules/core-js/internals/define-global-property.js","webpack://dashjs/./node_modules/core-js/internals/delete-property-or-throw.js","webpack://dashjs/./node_modules/core-js/internals/descriptors.js","webpack://dashjs/./node_modules/core-js/internals/detach-transferable.js","webpack://dashjs/./node_modules/core-js/internals/document-create-element.js","webpack://dashjs/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://dashjs/./node_modules/core-js/internals/dom-exception-constants.js","webpack://dashjs/./node_modules/core-js/internals/enum-bug-keys.js","webpack://dashjs/./node_modules/core-js/internals/environment-ff-version.js","webpack://dashjs/./node_modules/core-js/internals/environment-is-ie-or-edge.js","webpack://dashjs/./node_modules/core-js/internals/environment-is-node.js","webpack://dashjs/./node_modules/core-js/internals/environment-user-agent.js","webpack://dashjs/./node_modules/core-js/internals/environment-v8-version.js","webpack://dashjs/./node_modules/core-js/internals/environment-webkit-version.js","webpack://dashjs/./node_modules/core-js/internals/environment.js","webpack://dashjs/./node_modules/core-js/internals/error-stack-clear.js","webpack://dashjs/./node_modules/core-js/internals/error-stack-install.js","webpack://dashjs/./node_modules/core-js/internals/error-stack-installable.js","webpack://dashjs/./node_modules/core-js/internals/export.js","webpack://dashjs/./node_modules/core-js/internals/fails.js","webpack://dashjs/./node_modules/core-js/internals/function-apply.js","webpack://dashjs/./node_modules/core-js/internals/function-bind-context.js","webpack://dashjs/./node_modules/core-js/internals/function-bind-native.js","webpack://dashjs/./node_modules/core-js/internals/function-call.js","webpack://dashjs/./node_modules/core-js/internals/function-name.js","webpack://dashjs/./node_modules/core-js/internals/function-uncurry-this-accessor.js","webpack://dashjs/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://dashjs/./node_modules/core-js/internals/function-uncurry-this.js","webpack://dashjs/./node_modules/core-js/internals/get-built-in-node-module.js","webpack://dashjs/./node_modules/core-js/internals/get-built-in.js","webpack://dashjs/./node_modules/core-js/internals/get-json-replacer-function.js","webpack://dashjs/./node_modules/core-js/internals/get-method.js","webpack://dashjs/./node_modules/core-js/internals/global-this.js","webpack://dashjs/./node_modules/core-js/internals/has-own-property.js","webpack://dashjs/./node_modules/core-js/internals/hidden-keys.js","webpack://dashjs/./node_modules/core-js/internals/ie8-dom-define.js","webpack://dashjs/./node_modules/core-js/internals/indexed-object.js","webpack://dashjs/./node_modules/core-js/internals/inherit-if-required.js","webpack://dashjs/./node_modules/core-js/internals/inspect-source.js","webpack://dashjs/./node_modules/core-js/internals/install-error-cause.js","webpack://dashjs/./node_modules/core-js/internals/internal-state.js","webpack://dashjs/./node_modules/core-js/internals/is-array.js","webpack://dashjs/./node_modules/core-js/internals/is-big-int-array.js","webpack://dashjs/./node_modules/core-js/internals/is-callable.js","webpack://dashjs/./node_modules/core-js/internals/is-forced.js","webpack://dashjs/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://dashjs/./node_modules/core-js/internals/is-object.js","webpack://dashjs/./node_modules/core-js/internals/is-possible-prototype.js","webpack://dashjs/./node_modules/core-js/internals/is-pure.js","webpack://dashjs/./node_modules/core-js/internals/is-symbol.js","webpack://dashjs/./node_modules/core-js/internals/length-of-array-like.js","webpack://dashjs/./node_modules/core-js/internals/make-built-in.js","webpack://dashjs/./node_modules/core-js/internals/math-trunc.js","webpack://dashjs/./node_modules/core-js/internals/normalize-string-argument.js","webpack://dashjs/./node_modules/core-js/internals/object-define-property.js","webpack://dashjs/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://dashjs/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://dashjs/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://dashjs/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://dashjs/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://dashjs/./node_modules/core-js/internals/object-keys-internal.js","webpack://dashjs/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://dashjs/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://dashjs/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://dashjs/./node_modules/core-js/internals/own-keys.js","webpack://dashjs/./node_modules/core-js/internals/proxy-accessor.js","webpack://dashjs/./node_modules/core-js/internals/require-object-coercible.js","webpack://dashjs/./node_modules/core-js/internals/shared-key.js","webpack://dashjs/./node_modules/core-js/internals/shared-store.js","webpack://dashjs/./node_modules/core-js/internals/shared.js","webpack://dashjs/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://dashjs/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://dashjs/./node_modules/core-js/internals/to-absolute-index.js","webpack://dashjs/./node_modules/core-js/internals/to-big-int.js","webpack://dashjs/./node_modules/core-js/internals/to-index.js","webpack://dashjs/./node_modules/core-js/internals/to-indexed-object.js","webpack://dashjs/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://dashjs/./node_modules/core-js/internals/to-length.js","webpack://dashjs/./node_modules/core-js/internals/to-object.js","webpack://dashjs/./node_modules/core-js/internals/to-offset.js","webpack://dashjs/./node_modules/core-js/internals/to-positive-integer.js","webpack://dashjs/./node_modules/core-js/internals/to-primitive.js","webpack://dashjs/./node_modules/core-js/internals/to-property-key.js","webpack://dashjs/./node_modules/core-js/internals/to-string-tag-support.js","webpack://dashjs/./node_modules/core-js/internals/to-string.js","webpack://dashjs/./node_modules/core-js/internals/try-to-string.js","webpack://dashjs/./node_modules/core-js/internals/uid.js","webpack://dashjs/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://dashjs/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://dashjs/./node_modules/core-js/internals/validate-arguments-length.js","webpack://dashjs/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://dashjs/./node_modules/core-js/internals/well-known-symbol.js","webpack://dashjs/./node_modules/core-js/internals/wrap-error-constructor-with-cause.js","webpack://dashjs/./node_modules/core-js/modules/es.array-buffer.detached.js","webpack://dashjs/./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","webpack://dashjs/./node_modules/core-js/modules/es.array-buffer.transfer.js","webpack://dashjs/./node_modules/core-js/modules/es.array.push.js","webpack://dashjs/./node_modules/core-js/modules/es.array.reduce.js","webpack://dashjs/./node_modules/core-js/modules/es.array.sort.js","webpack://dashjs/./node_modules/core-js/modules/es.array.unshift.js","webpack://dashjs/./node_modules/core-js/modules/es.error.cause.js","webpack://dashjs/./node_modules/core-js/modules/es.json.stringify.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.at.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.find-last-index.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.find-last.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.set.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.sort.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.to-reversed.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.to-sorted.js","webpack://dashjs/./node_modules/core-js/modules/es.typed-array.with.js","webpack://dashjs/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://dashjs/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://dashjs/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://dashjs/./node_modules/core-js/modules/web.url-search-params.size.js","webpack://dashjs/./node_modules/core-js/modules/web.url.to-json.js","webpack://dashjs/./src/core/FactoryMaker.js","webpack://dashjs/./src/core/Utils.js","webpack://dashjs/./src/core/errors/ErrorsBase.js","webpack://dashjs/./src/core/events/EventsBase.js","webpack://dashjs/./src/dash/constants/DashConstants.js","webpack://dashjs/./src/streaming/constants/Constants.js","webpack://dashjs/./src/streaming/constants/ProtectionConstants.js","webpack://dashjs/./src/streaming/protection/ProtectionEvents.js","webpack://dashjs/./src/streaming/protection/errors/ProtectionErrors.js","webpack://dashjs/./src/streaming/vo/DashJSError.js","webpack://dashjs/./src/streaming/vo/metrics/HTTPRequest.js","webpack://dashjs/webpack/bootstrap","webpack://dashjs/webpack/runtime/amd options","webpack://dashjs/webpack/runtime/define property getters","webpack://dashjs/webpack/runtime/global","webpack://dashjs/webpack/runtime/hasOwnProperty shorthand","webpack://dashjs/./src/streaming/protection/CommonEncryption.js","webpack://dashjs/./src/streaming/protection/vo/MediaCapability.js","webpack://dashjs/./src/streaming/protection/vo/KeySystemConfiguration.js","webpack://dashjs/./src/streaming/protection/vo/LicenseRequest.js","webpack://dashjs/./src/streaming/protection/vo/LicenseResponse.js","webpack://dashjs/./src/streaming/protection/controllers/ProtectionController.js","webpack://dashjs/./src/streaming/protection/vo/KeyPair.js","webpack://dashjs/./src/streaming/protection/vo/ClearKeyKeySet.js","webpack://dashjs/./src/streaming/protection/drm/KeySystemClearKey.js","webpack://dashjs/./src/streaming/protection/drm/KeySystemW3CClearKey.js","webpack://dashjs/./src/streaming/protection/drm/KeySystemWidevine.js","webpack://dashjs/./src/streaming/protection/drm/KeySystemPlayReady.js","webpack://dashjs/./src/streaming/protection/servers/DRMToday.js","webpack://dashjs/./src/streaming/protection/servers/PlayReady.js","webpack://dashjs/./src/streaming/protection/servers/Widevine.js","webpack://dashjs/./src/streaming/protection/servers/ClearKey.js","webpack://dashjs/./src/streaming/protection/vo/KeySystemMetadata.js","webpack://dashjs/./src/streaming/protection/controllers/ProtectionKeyController.js","webpack://dashjs/./src/streaming/protection/vo/NeedKey.js","webpack://dashjs/./src/streaming/protection/vo/KeyMessage.js","webpack://dashjs/./src/streaming/protection/vo/KeySystemAccess.js","webpack://dashjs/./src/streaming/protection/models/DefaultProtectionModel.js","webpack://dashjs/./src/streaming/protection/models/ProtectionModel_3Feb2014.js","webpack://dashjs/./src/streaming/protection/models/ProtectionModel_01b.js","webpack://dashjs/./src/streaming/protection/Protection.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dashjs\"] = factory();\n\telse\n\t\troot[\"dashjs\"] = factory();\n})(self, function() {\nreturn ","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.38\n   Copyright  2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.38',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant|iemobile|slim)\\s?(?:browser)?[\\/ ]?([\\w\\.]*)/i,             // Avant/IEMobile/SlimBrowser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(heytap|ovi)browser\\/([\\d\\.]+)/i,                                  // Heytap/Ovi\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 ' + BROWSER]], [\n            /(oculus|sailfish|huawei|vivo)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 ' + BROWSER], VERSION], [                    // Oculus/Sailfish/HuaweiBrowser/VivoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345Explorer)[\\/ ]?([\\w\\.]+)/i                        // QQBrowser/2345 Browser\n            ], [NAME, VERSION], [\n            /(lbbrowser)/i,                                                     // LieBao Browser\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i,                                             // Links\n            /panasonic;(viera)/i                                                // Panasonic Viera\n            ], [NAME, VERSION], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,                             // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( \\d| pro)?)/i                                               // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer && ArrayBuffer.prototype;\nvar slice = ArrayBufferPrototype && uncurryThis(ArrayBufferPrototype.slice);\n\nmodule.exports = function (O) {\n  if (arrayBufferByteLength(O) !== 0) return false;\n  if (!slice) return false;\n  try {\n    slice(O, 0, 0);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ findLast, findLastIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_FIND_LAST_INDEX = TYPE === 1;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var index = lengthOfArrayLike(self);\n    var boundFunction = bind(callbackfn, that);\n    var value, result;\n    while (index-- > 0) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (result) switch (TYPE) {\n        case 0: return value; // findLast\n        case 1: return index; // findLastIndex\n      }\n    }\n    return IS_FIND_LAST_INDEX ? -1 : undefined;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.findLast` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLast: createMethod(0),\n  // `Array.prototype.findLastIndex` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLastIndex: createMethod(1)\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\nvar REDUCE_EMPTY = 'Reduce of empty array with no initial value';\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    aCallable(callbackfn);\n    if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw new $TypeError(REDUCE_EMPTY);\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis([].slice);\n","'use strict';\nvar arraySlice = require('../internals/array-slice');\n\nvar floor = Math.floor;\n\nvar sort = function (array, comparefn) {\n  var length = array.length;\n\n  if (length < 8) {\n    // insertion sort\n    var i = 1;\n    var element, j;\n\n    while (i < length) {\n      j = i;\n      element = array[i];\n      while (j && comparefn(array[j - 1], element) > 0) {\n        array[j] = array[--j];\n      }\n      if (j !== i++) array[j] = element;\n    }\n  } else {\n    // merge sort\n    var middle = floor(length / 2);\n    var left = sort(arraySlice(array, 0, middle), comparefn);\n    var right = sort(arraySlice(array, middle), comparefn);\n    var llength = left.length;\n    var rlength = right.length;\n    var lindex = 0;\n    var rindex = 0;\n\n    while (lindex < llength || rindex < rlength) {\n      array[lindex + rindex] = (lindex < llength && rindex < rlength)\n        ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n        : lindex < llength ? left[lindex++] : right[rindex++];\n    }\n  }\n\n  return array;\n};\n\nmodule.exports = sort;\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.toReversed\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed\nmodule.exports = function (O, C) {\n  var len = lengthOfArrayLike(O);\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = O[len - k - 1];\n  return A;\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.with\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar userAgent = require('../internals/environment-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","'use strict';\nvar UA = require('../internals/environment-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\nvar userAgent = require('../internals/environment-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable, sonarjs/slow-regex -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\n\n// non-standard V8\nvar captureStackTrace = Error.captureStackTrace;\n\nmodule.exports = function (error, C, stack, dropEntries) {\n  if (ERROR_STACK_INSTALLABLE) {\n    if (captureStackTrace) captureStackTrace(error, C);\n    else createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = new Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof-raw');\nvar toString = require('../internals/to-string');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (replacer) {\n  if (isCallable(replacer)) return replacer;\n  if (!isArray(replacer)) return;\n  var rawLength = replacer.length;\n  var keys = [];\n  for (var i = 0; i < rawLength; i++) {\n    var element = replacer[i];\n    if (typeof element == 'string') push(keys, element);\n    else if (typeof element == 'number' || classof(element) === 'Number' || classof(element) === 'String') push(keys, toString(element));\n  }\n  var keysLength = keys.length;\n  var root = true;\n  return function (key, value) {\n    if (root) {\n      root = false;\n      return value;\n    }\n    if (isArray(this)) return value;\n    for (var j = 0; j < keysLength; j++) if (keys[j] === key) return value;\n  };\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nmodule.exports = false;\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (Target, Source, key) {\n  key in Target || defineProperty(Target, key, {\n    configurable: true,\n    get: function () { return Source[key]; },\n    set: function (it) { Source[key] = it; }\n  });\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global-this');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.39.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2024 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/environment-v8-version');\nvar fails = require('../internals/fails');\nvar globalThis = require('../internals/global-this');\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nvar toPositiveInteger = require('../internals/to-positive-integer');\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw new $RangeError('Wrong offset');\n  return offset;\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw new $RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar proxyAccessor = require('../internals/proxy-accessor');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar installErrorCause = require('../internals/install-error-cause');\nvar installErrorStack = require('../internals/error-stack-install');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nmodule.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {\n  var STACK_TRACE_LIMIT = 'stackTraceLimit';\n  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;\n  var path = FULL_NAME.split('.');\n  var ERROR_NAME = path[path.length - 1];\n  var OriginalError = getBuiltIn.apply(null, path);\n\n  if (!OriginalError) return;\n\n  var OriginalErrorPrototype = OriginalError.prototype;\n\n  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006\n  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;\n\n  if (!FORCED) return OriginalError;\n\n  var BaseError = getBuiltIn('Error');\n\n  var WrappedError = wrapper(function (a, b) {\n    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);\n    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();\n    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);\n    installErrorStack(result, WrappedError, result.stack, 2);\n    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);\n    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);\n    return result;\n  });\n\n  WrappedError.prototype = OriginalErrorPrototype;\n\n  if (ERROR_NAME !== 'Error') {\n    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);\n    else copyConstructorProperties(WrappedError, BaseError, { name: true });\n  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {\n    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);\n    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');\n  }\n\n  copyConstructorProperties(WrappedError, OriginalError);\n\n  if (!IS_PURE) try {\n    // Safari 13- bug: WebAssembly errors does not have a proper `.name`\n    if (OriginalErrorPrototype.name !== ERROR_NAME) {\n      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);\n    }\n    OriginalErrorPrototype.constructor = WrappedError;\n  } catch (error) { /* empty */ }\n\n  return WrappedError;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\n// `ArrayBuffer.prototype.detached` getter\n// https://tc39.es/ecma262/#sec-get-arraybuffer.prototype.detached\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/environment-v8-version');\nvar IS_NODE = require('../internals/environment-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/environment-ff-version');\nvar IE_OR_EDGE = require('../internals/environment-is-ie-or-edge');\nvar V8 = require('../internals/environment-v8-version');\nvar WEBKIT = require('../internals/environment-webkit-version');\n\nvar test = [];\nvar nativeSort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = lengthOfArrayLike(items);\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","'use strict';\n/* eslint-disable no-unused-vars -- required for functions `.length` */\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar apply = require('../internals/function-apply');\nvar wrapErrorConstructorWithCause = require('../internals/wrap-error-constructor-with-cause');\n\nvar WEB_ASSEMBLY = 'WebAssembly';\nvar WebAssembly = globalThis[WEB_ASSEMBLY];\n\n// eslint-disable-next-line es/no-error-cause -- feature detection\nvar FORCED = new Error('e', { cause: 7 }).cause !== 7;\n\nvar exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  var O = {};\n  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);\n  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);\n};\n\nvar exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  if (WebAssembly && WebAssembly[ERROR_NAME]) {\n    var O = {};\n    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);\n    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);\n  }\n};\n\n// https://tc39.es/ecma262/#sec-nativeerror\nexportGlobalErrorCauseWrapper('Error', function (init) {\n  return function Error(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('EvalError', function (init) {\n  return function EvalError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('RangeError', function (init) {\n  return function RangeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('ReferenceError', function (init) {\n  return function ReferenceError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('SyntaxError', function (init) {\n  return function SyntaxError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('TypeError', function (init) {\n  return function TypeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('URIError', function (init) {\n  return function URIError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('CompileError', function (init) {\n  return function CompileError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('LinkError', function (init) {\n  return function LinkError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {\n  return function RuntimeError(message) { return apply(init, this, arguments); };\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isSymbol = require('../internals/is-symbol');\nvar arraySlice = require('../internals/array-slice');\nvar getReplacerFunction = require('../internals/get-json-replacer-function');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nvar $String = String;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {\n  var symbol = getBuiltIn('Symbol')('stringify detection');\n  // MS Edge converts symbol values to JSON as {}\n  return $stringify([symbol]) !== '[null]'\n    // WebKit converts symbol values to JSON as null\n    || $stringify({ a: symbol }) !== '{}'\n    // V8 throws on boxed symbols\n    || $stringify(Object(symbol)) !== '{}';\n});\n\n// https://github.com/tc39/proposal-well-formed-stringify\nvar ILL_FORMED_UNICODE = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nvar stringifyWithSymbolsFix = function (it, replacer) {\n  var args = arraySlice(arguments);\n  var $replacer = getReplacerFunction(replacer);\n  if (!isCallable($replacer) && (it === undefined || isSymbol(it))) return; // IE8 returns string on undefined\n  args[1] = function (key, value) {\n    // some old implementations (like WebKit) could pass numbers as keys\n    if (isCallable($replacer)) value = call($replacer, this, $String(key), value);\n    if (!isSymbol(value)) return value;\n  };\n  return apply($stringify, null, args);\n};\n\nvar fixIllFormed = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  $({ target: 'JSON', stat: true, arity: 3, forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);\n      return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;\n    }\n  });\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.at` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.at\nexportTypedArrayMethod('at', function at(index) {\n  var O = aTypedArray(this);\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n  return (k < 0 || k >= len) ? undefined : O[k];\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLastIndex = require('../internals/array-iteration-from-last').findLastIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLastIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlastindex\nexportTypedArrayMethod('findLastIndex', function findLastIndex(predicate /* , thisArg */) {\n  return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLast = require('../internals/array-iteration-from-last').findLast;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLast` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlast\nexportTypedArrayMethod('findLast', function findLast(predicate /* , thisArg */) {\n  return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar call = require('../internals/function-call');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toOffset = require('../internals/to-offset');\nvar toIndexedObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\n\nvar RangeError = globalThis.RangeError;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar $set = Int8ArrayPrototype && Int8ArrayPrototype.set;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS = !fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  var array = new Uint8ClampedArray(2);\n  call($set, array, { length: 1, 0: 3 }, 1);\n  return array[1] !== 3;\n});\n\n// https://bugs.chromium.org/p/v8/issues/detail?id=11294 and other\nvar TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {\n  var array = new Int8Array(2);\n  array.set(1);\n  array.set('2', 1);\n  return array[0] !== 0 || array[1] !== 2;\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var src = toIndexedObject(arrayLike);\n  if (WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS) return call($set, this, src, offset);\n  var length = this.length;\n  var len = lengthOfArrayLike(src);\n  var index = 0;\n  if (len + offset > length) throw new RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, !WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar fails = require('../internals/fails');\nvar aCallable = require('../internals/a-callable');\nvar internalSort = require('../internals/array-sort');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar FF = require('../internals/environment-ff-version');\nvar IE_OR_EDGE = require('../internals/environment-is-ie-or-edge');\nvar V8 = require('../internals/environment-v8-version');\nvar WEBKIT = require('../internals/environment-webkit-version');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar Uint16Array = globalThis.Uint16Array;\nvar nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);\n\n// WebKit\nvar ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {\n  nativeSort(new Uint16Array(2), null);\n}) && fails(function () {\n  nativeSort(new Uint16Array(2), {});\n}));\n\nvar STABLE_SORT = !!nativeSort && !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 74;\n  if (FF) return FF < 67;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 602;\n\n  var array = new Uint16Array(516);\n  var expected = Array(516);\n  var index, mod;\n\n  for (index = 0; index < 516; index++) {\n    mod = index % 4;\n    array[index] = 515 - index;\n    expected[index] = index - 2 * mod + 3;\n  }\n\n  nativeSort(array, function (a, b) {\n    return (a / 4 | 0) - (b / 4 | 0);\n  });\n\n  for (index = 0; index < 516; index++) {\n    if (array[index] !== expected[index]) return true;\n  }\n});\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (y !== y) return -1;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (x !== x) return 1;\n    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;\n    return x > y;\n  };\n};\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  if (comparefn !== undefined) aCallable(comparefn);\n  if (STABLE_SORT) return nativeSort(this, comparefn);\n\n  return internalSort(aTypedArray(this), getSortCompare(comparefn));\n}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);\n","'use strict';\nvar arrayToReversed = require('../internals/array-to-reversed');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\n\n// `%TypedArray%.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.toreversed\nexportTypedArrayMethod('toReversed', function toReversed() {\n  return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);\n\n// `%TypedArray%.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tosorted\nexportTypedArrayMethod('toSorted', function toSorted(compareFn) {\n  if (compareFn !== undefined) aCallable(compareFn);\n  var O = aTypedArray(this);\n  var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);\n  return sort(A, compareFn);\n});\n","'use strict';\nvar arrayWith = require('../internals/array-with');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toBigInt = require('../internals/to-big-int');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = !!function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER);\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\n$({ target: 'URL', proto: true, enumerable: true }, {\n  toJSON: function toJSON() {\n    return call(URL.prototype.toString, this);\n  }\n});\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @module FactoryMaker\n * @ignore\n */\nconst FactoryMaker = (function () {\n\n    let instance;\n    let singletonContexts = [];\n    const singletonFactories = {};\n    const classFactories = {};\n\n    function extend(name, childInstance, override, context) {\n        if (!context[name] && childInstance) {\n            context[name] = {\n                instance: childInstance,\n                override: override\n            };\n        }\n    }\n\n    /**\n     * Use this method from your extended object.  this.factory is injected into your object.\n     * this.factory.getSingletonInstance(this.context, 'VideoModel')\n     * will return the video model for use in the extended object.\n     *\n     * @param {Object} context - injected into extended object as this.context\n     * @param {string} className - string name found in all dash.js objects\n     * with name __dashjs_factory_name Will be at the bottom. Will be the same as the object's name.\n     * @returns {*} Context aware instance of specified singleton name.\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function getSingletonInstance(context, className) {\n        for (const i in singletonContexts) {\n            const obj = singletonContexts[i];\n            if (obj.context === context && obj.name === className) {\n                return obj.instance;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Use this method to add an singleton instance to the system.  Useful for unit testing to mock objects etc.\n     *\n     * @param {Object} context\n     * @param {string} className\n     * @param {Object} instance\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function setSingletonInstance(context, className, instance) {\n        for (const i in singletonContexts) {\n            const obj = singletonContexts[i];\n            if (obj.context === context && obj.name === className) {\n                singletonContexts[i].instance = instance;\n                return;\n            }\n        }\n        singletonContexts.push({\n            name: className,\n            context: context,\n            instance: instance\n        });\n    }\n\n    /**\n     * Use this method to remove all singleton instances associated with a particular context.\n     *\n     * @param {Object} context\n     * @memberof module:FactoryMaker\n     * @instance\n     */\n    function deleteSingletonInstances(context) {\n        singletonContexts = singletonContexts.filter(x => x.context !== context);\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Factories storage Management\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function getFactoryByName(name, factoriesArray) {\n        return factoriesArray[name];\n    }\n\n    function updateFactory(name, factory, factoriesArray) {\n        if (name in factoriesArray) {\n            factoriesArray[name] = factory;\n        }\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Class Factories Management\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function updateClassFactory(name, factory) {\n        updateFactory(name, factory, classFactories);\n    }\n\n    function getClassFactoryByName(name) {\n        return getFactoryByName(name, classFactories);\n    }\n\n    function getClassFactory(classConstructor) {\n        let factory = getFactoryByName(classConstructor.__dashjs_factory_name, classFactories);\n\n        if (!factory) {\n            factory = function (context) {\n                if (context === undefined) {\n                    context = {};\n                }\n                return {\n                    create: function () {\n                        return merge(classConstructor, context, arguments);\n                    }\n                };\n            };\n\n            classFactories[classConstructor.__dashjs_factory_name] = factory; // store factory\n        }\n        return factory;\n    }\n\n    /*------------------------------------------------------------------------------------------*/\n\n    // Singleton Factory MAangement\n\n    /*------------------------------------------------------------------------------------------*/\n\n    function updateSingletonFactory(name, factory) {\n        updateFactory(name, factory, singletonFactories);\n    }\n\n    function getSingletonFactoryByName(name) {\n        return getFactoryByName(name, singletonFactories);\n    }\n\n    function getSingletonFactory(classConstructor) {\n        let factory = getFactoryByName(classConstructor.__dashjs_factory_name, singletonFactories);\n        if (!factory) {\n            factory = function (context) {\n                let instance;\n                if (context === undefined) {\n                    context = {};\n                }\n                return {\n                    getInstance: function () {\n                        // If we don't have an instance yet check for one on the context\n                        if (!instance) {\n                            instance = getSingletonInstance(context, classConstructor.__dashjs_factory_name);\n                        }\n                        // If there's no instance on the context then create one\n                        if (!instance) {\n                            instance = merge(classConstructor, context, arguments);\n                            singletonContexts.push({\n                                name: classConstructor.__dashjs_factory_name,\n                                context: context,\n                                instance: instance\n                            });\n                        }\n                        return instance;\n                    }\n                };\n            };\n            singletonFactories[classConstructor.__dashjs_factory_name] = factory; // store factory\n        }\n\n        return factory;\n    }\n\n    function merge(classConstructor, context, args) {\n\n        let classInstance;\n        const className = classConstructor.__dashjs_factory_name;\n        const extensionObject = context[className];\n\n        if (extensionObject) {\n\n            let extension = extensionObject.instance;\n\n            if (extensionObject.override) { //Override public methods in parent but keep parent.\n\n                classInstance = classConstructor.apply({context}, args);\n                extension = extension.apply({\n                    context,\n                    factory: instance,\n                    parent: classInstance\n                }, args);\n\n                for (const prop in extension) {\n                    if (classInstance.hasOwnProperty(prop)) {\n                        classInstance[prop] = extension[prop];\n                    }\n                }\n\n            } else { //replace parent object completely with new object. Same as dijon.\n\n                return extension.apply({\n                    context,\n                    factory: instance\n                }, args);\n\n            }\n        } else {\n            // Create new instance of the class\n            classInstance = classConstructor.apply({context}, args);\n        }\n\n        // Add getClassName function to class instance prototype (used by Debug)\n        classInstance.getClassName = function () {return className;};\n\n        return classInstance;\n    }\n\n    instance = {\n        deleteSingletonInstances,\n        extend,\n        getClassFactory,\n        getClassFactoryByName,\n        getSingletonFactory,\n        getSingletonFactoryByName,\n        getSingletonInstance,\n        setSingletonInstance,\n        updateClassFactory,\n        updateSingletonFactory,\n    };\n\n    return instance;\n\n}());\n\nexport default FactoryMaker;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @class\n * @ignore\n */\n\nimport path from 'path-browserify'\nimport {UAParser} from 'ua-parser-js'\nimport Constants from '../streaming/constants/Constants.js';\n\nclass Utils {\n    static mixin(dest, source, copy) {\n        let s;\n        let empty = {};\n        if (dest) {\n            for (let name in source) {\n                if (source.hasOwnProperty(name)) {\n                    s = source[name];\n                    if (!(name in dest) || (dest[name] !== s && (!(name in empty) || empty[name] !== s))) {\n                        if (typeof dest[name] === 'object' && dest[name] !== null) {\n                            dest[name] = Utils.mixin(dest[name], s, copy);\n                        } else {\n                            dest[name] = copy(s);\n                        }\n                    }\n                }\n            }\n        }\n        return dest;\n    }\n\n    static clone(src) {\n        if (!src || typeof src !== 'object') {\n            return src; // anything\n        }\n        if (src instanceof RegExp) {\n            return new RegExp(src);\n        }\n        let r;\n        if (src instanceof Array) {\n            // array\n            r = [];\n            for (let i = 0, l = src.length; i < l; ++i) {\n                if (i in src) {\n                    r.push(Utils.clone(src[i]));\n                }\n            }\n        } else {\n            r = {};\n        }\n        return Utils.mixin(r, src, Utils.clone);\n    }\n\n    static addAdditionalQueryParameterToUrl(url, params) {\n        try {\n            if (!params || params.length === 0) {\n                return url;\n            }\n\n            let updatedUrl = url;\n            params.forEach(({ key, value }) => {\n                const separator = updatedUrl.includes('?') ? '&' : '?';\n                updatedUrl += `${separator}${(encodeURIComponent(key))}=${(encodeURIComponent(value))}`;\n            });\n            return updatedUrl;\n        } catch (e) {\n            return url;\n        }\n    }\n\n    static removeQueryParameterFromUrl(url, queryParameter) {\n        if (!url || !queryParameter) {\n            return url;\n        }\n        // Parse the URL\n        const parsedUrl = new URL(url);\n\n        // Get the search parameters\n        const params = new URLSearchParams(parsedUrl.search);\n\n        if (!params || params.size === 0 || !params.has(queryParameter)) {\n            return url;\n        }\n\n        // Remove the queryParameter\n        params.delete(queryParameter);\n\n        // Manually reconstruct the query string without re-encoding\n        const queryString = Array.from(params.entries())\n            .map(([key, value]) => `${key}=${value}`)\n            .join('&');\n\n        // Reconstruct the URL\n        const baseUrl = `${parsedUrl.origin}${parsedUrl.pathname}`;\n        return queryString ? `${baseUrl}?${queryString}` : baseUrl;\n    }\n\n    static parseHttpHeaders(headerStr) {\n        let headers = {};\n        if (!headerStr) {\n            return headers;\n        }\n\n        // Trim headerStr to fix a MS Edge bug with xhr.getAllResponseHeaders method\n        // which send a string starting with a \"\\n\" character\n        let headerPairs = headerStr.trim().split('\\u000d\\u000a');\n        for (let i = 0, ilen = headerPairs.length; i < ilen; i++) {\n            let headerPair = headerPairs[i];\n            let index = headerPair.indexOf('\\u003a\\u0020');\n            if (index > 0) {\n                headers[headerPair.substring(0, index)] = headerPair.substring(index + 2);\n            }\n        }\n        return headers;\n    }\n\n    /**\n     * Parses query parameters from a string and returns them as an array of key-value pairs.\n     * @param {string} queryParamString - A string containing the query parameters.\n     * @return {Array<{key: string, value: string}>} An array of objects representing the query parameters.\n     */\n    static parseQueryParams(queryParamString) {\n        const params = [];\n        const searchParams = new URLSearchParams(queryParamString);\n        for (const [key, value] of searchParams.entries()) {\n            params.push({ key: decodeURIComponent(key), value: decodeURIComponent(value) });\n        }\n        return params;\n    }\n\n    static generateUuid() {\n        let dt = new Date().getTime();\n        const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = (dt + Math.random() * 16) % 16 | 0;\n            dt = Math.floor(dt / 16);\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return uuid;\n    }\n\n    static generateHashCode(string) {\n        let hash = 0;\n\n        if (string.length === 0) {\n            return hash;\n        }\n\n        for (let i = 0; i < string.length; i++) {\n            const chr = string.charCodeAt(i);\n            hash = ((hash << 5) - hash) + chr;\n            hash |= 0;\n        }\n        return hash;\n    }\n\n    /**\n     * Compares both urls and returns a relative url (target relative to original)\n     * @param {string} originalUrl\n     * @param {string} targetUrl\n     * @return {string|*}\n     */\n    static getRelativeUrl(originalUrl, targetUrl) {\n        try {\n            const original = new URL(originalUrl);\n            const target = new URL(targetUrl);\n\n            // Unify the protocol to compare the origins\n            original.protocol = target.protocol;\n            if (original.origin !== target.origin) {\n                return targetUrl;\n            }\n\n            // Use the relative path implementation of the path library. We need to cut off the actual filename in the end to get the relative path\n            let relativePath = path.relative(original.pathname.substr(0, original.pathname.lastIndexOf('/')), target.pathname.substr(0, target.pathname.lastIndexOf('/')));\n\n            // In case the relative path is empty (both path are equal) return the filename only. Otherwise add a slash in front of the filename\n            const startIndexOffset = relativePath.length === 0 ? 1 : 0;\n            relativePath += target.pathname.substr(target.pathname.lastIndexOf('/') + startIndexOffset, target.pathname.length - 1);\n\n            // Build the other candidate, e.g. the 'host relative' path that starts with \"/\", and return the shortest of the two candidates.\n            if (target.pathname.length < relativePath.length) {\n                return target.pathname;\n            }\n            return relativePath;\n        } catch (e) {\n            return targetUrl\n        }\n    }\n\n    static getHostFromUrl(urlString) {\n        try {\n            const url = new URL(urlString);\n\n            return url.host\n        } catch (e) {\n            return null\n        }\n    }\n\n    static parseUserAgent(ua = null) {\n        try {\n            const uaString = ua === null ? typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase() : '' : '';\n\n            return UAParser(uaString);\n        } catch (e) {\n            return {};\n        }\n    }\n\n    /**\n     * Checks for existence of \"http\" or \"https\" in a string\n     * @param string\n     * @returns {boolean}\n     */\n    static stringHasProtocol(string) {\n        return (/(http(s?)):\\/\\//i.test(string))\n    }\n\n    static bufferSourceToDataView(bufferSource) {\n        return Utils.toDataView(bufferSource, DataView);\n    }\n\n    static bufferSourceToInt8(bufferSource) {\n        return Utils.toDataView(bufferSource, Uint8Array)\n    }\n\n    static uint8ArrayToString(uint8Array) {\n        const decoder = new TextDecoder('utf-8');\n        return decoder.decode(uint8Array);\n    }\n\n    static bufferSourceToHex(data) {\n        const arr = Utils.bufferSourceToInt8(data)\n        let hex = '';\n        for (let value of arr) {\n            value = value.toString(16);\n            if (value.length === 1) {\n                value = '0' + value;\n            }\n            hex += value;\n        }\n        return hex;\n    }\n\n    static toDataView(bufferSource, Type) {\n        const buffer = Utils.getArrayBuffer(bufferSource);\n        let bytesPerElement = 1;\n        if ('BYTES_PER_ELEMENT' in DataView) {\n            bytesPerElement = DataView.BYTES_PER_ELEMENT;\n        }\n\n        const dataEnd = ((bufferSource.byteOffset || 0) + bufferSource.byteLength) /\n            bytesPerElement;\n        const rawStart = ((bufferSource.byteOffset || 0)) / bytesPerElement;\n        const start = Math.floor(Math.max(0, Math.min(rawStart, dataEnd)));\n        const end = Math.floor(Math.min(start + Math.max(Infinity, 0), dataEnd));\n        return new Type(buffer, start, end - start);\n    }\n\n    static getArrayBuffer(view) {\n        if (view instanceof ArrayBuffer) {\n            return view;\n        } else {\n            return view.buffer;\n        }\n    }\n\n    static getCodecFamily(codecString) {\n        const { base, profile } = Utils._getCodecParts(codecString)\n\n        switch (base) {\n            case 'mp4a':\n                switch (profile) {\n                    case '69':\n                    case '6b':\n                    case '40.34':\n                        return Constants.CODEC_FAMILIES.MP3\n                    case '66':\n                    case '67':\n                    case '68':\n                    case '40.2':\n                    case '40.02':\n                    case '40.5':\n                    case '40.05':\n                    case '40.29':\n                    case '40.42':\n                        return Constants.CODEC_FAMILIES.AAC\n                    case 'a5':\n                        return Constants.CODEC_FAMILIES.AC3\n                    case 'e6':\n                        return Constants.CODEC_FAMILIES.EC3\n                    case 'b2':\n                        return Constants.CODEC_FAMILIES.DTSX\n                    case 'a9':\n                        return Constants.CODEC_FAMILIES.DTSC\n                }\n                break;\n            case 'avc1':\n            case 'avc3':\n                return Constants.CODEC_FAMILIES.AVC\n            case 'hvc1':\n            case 'hvc3':\n                return Constants.CODEC_FAMILIES.HEVC\n            default:\n                return base\n        }\n\n        return base;\n    }\n\n    static _getCodecParts(codecString) {\n        const [base, ...rest] = codecString.split('.');\n        const profile = rest.join('.');\n        return { base, profile };\n    }\n\n}\n\nexport default Utils;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass ErrorsBase {\n    extend(errors, config) {\n        if (!errors) {\n            return;\n        }\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const err in errors) {\n            if (!errors.hasOwnProperty(err) || (this[err] && !override)) {\n                continue;\n            }\n            if (publicOnly && errors[err].indexOf('public_') === -1) {\n                continue;\n            }\n            this[err] = errors[err];\n\n        }\n    }\n}\n\nexport default ErrorsBase;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass EventsBase {\n    extend(events, config) {\n        if (!events) {\n            return;\n        }\n\n        let override = config ? config.override : false;\n        let publicOnly = config ? config.publicOnly : false;\n\n\n        for (const evt in events) {\n            if (!events.hasOwnProperty(evt) || (this[evt] && !override)) {\n                continue;\n            }\n            if (publicOnly && events[evt].indexOf('public_') === -1) {\n                continue;\n            }\n            this[evt] = events[evt];\n\n        }\n    }\n}\n\nexport default EventsBase;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES, LOSS OF USE, DATA, OR\n *  PROFITS, OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Dash constants declaration\n * @ignore\n */\nexport default {\n    ACCESSIBILITY: 'Accessibility',\n    ADAPTATION_SET: 'AdaptationSet',\n    ADAPTATION_SETS: 'adaptationSets',\n    ADAPTATION_SET_SWITCHING_SCHEME_ID_URI: 'urn:mpeg:dash:adaptation-set-switching:2016',\n    ADD: 'add',\n    ASSET_IDENTIFIER: 'AssetIdentifier',\n    AUDIO_CHANNEL_CONFIGURATION: 'AudioChannelConfiguration',\n    AUDIO_SAMPLING_RATE: 'audioSamplingRate',\n    AVAILABILITY_END_TIME: 'availabilityEndTime',\n    AVAILABILITY_START_TIME: 'availabilityStartTime',\n    AVAILABILITY_TIME_COMPLETE: 'availabilityTimeComplete',\n    AVAILABILITY_TIME_OFFSET: 'availabilityTimeOffset',\n    BANDWITH: 'bandwidth',\n    BASE_URL: 'BaseURL',\n    BITSTREAM_SWITCHING: 'BitstreamSwitching',\n    BITSTREAM_SWITCHING_MINUS: 'bitstreamSwitching',\n    BYTE_RANGE: 'byteRange',\n    CAPTION: 'caption',\n    CENC_DEFAULT_KID: 'cenc:default_KID',\n    CLIENT_DATA_REPORTING: 'ClientDataReporting',\n    CLIENT_REQUIREMENT: 'clientRequirement',\n    CMCD_PARAMETERS: 'CMCDParameters',\n    CODECS: 'codecs',\n    CODEC_PRIVATE_DATA: 'codecPrivateData',\n    CODING_DEPENDENCY: 'codingDependency',\n    CONTENT_COMPONENT: 'ContentComponent',\n    CONTENT_PROTECTION: 'ContentProtection',\n    CONTENT_STEERING: 'ContentSteering',\n    CONTENT_STEERING_RESPONSE: {\n        VERSION: 'VERSION',\n        TTL: 'TTL',\n        RELOAD_URI: 'RELOAD-URI',\n        PATHWAY_PRIORITY: 'PATHWAY-PRIORITY',\n        PATHWAY_CLONES: 'PATHWAY-CLONES',\n        BASE_ID: 'BASE-ID',\n        ID: 'ID',\n        URI_REPLACEMENT: 'URI-REPLACEMENT',\n        HOST: 'HOST',\n        PARAMS: 'PARAMS'\n    },\n    CONTENT_TYPE: 'contentType',\n    DEFAULT_SERVICE_LOCATION: 'defaultServiceLocation',\n    DEPENDENCY_ID: 'dependencyId',\n    DURATION: 'duration',\n    DVB_PRIORITY: 'dvb:priority',\n    DVB_WEIGHT: 'dvb:weight',\n    DVB_URL: 'dvb:url',\n    DVB_MIMETYPE: 'dvb:mimeType',\n    DVB_FONTFAMILY: 'dvb:fontFamily',\n    DYNAMIC: 'dynamic',\n    END_NUMBER: 'endNumber',\n    ESSENTIAL_PROPERTY: 'EssentialProperty',\n    EVENT: 'Event',\n    EVENT_STREAM: 'EventStream',\n    FORCED_SUBTITLE: 'forced-subtitle',\n    FRAMERATE: 'frameRate',\n    FRAME_PACKING: 'FramePacking',\n    GROUP_LABEL: 'GroupLabel',\n    HEIGHT: 'height',\n    ID: 'id',\n    INBAND: 'inband',\n    INBAND_EVENT_STREAM: 'InbandEventStream',\n    INDEX: 'index',\n    INDEX_RANGE: 'indexRange',\n    INITIALIZATION: 'Initialization',\n    INITIALIZATION_MINUS: 'initialization',\n    LA_URL: 'Laurl',\n    LA_URL_LOWER_CASE: 'laurl',\n    LABEL: 'Label',\n    LANG: 'lang',\n    LOCATION: 'Location',\n    MAIN: 'main',\n    MAXIMUM_SAP_PERIOD: 'maximumSAPPeriod',\n    MAX_PLAYOUT_RATE: 'maxPlayoutRate',\n    MAX_SEGMENT_DURATION: 'maxSegmentDuration',\n    MAX_SUBSEGMENT_DURATION: 'maxSubsegmentDuration',\n    MEDIA: 'media',\n    MEDIA_PRESENTATION_DURATION: 'mediaPresentationDuration',\n    MEDIA_RANGE: 'mediaRange',\n    MEDIA_STREAM_STRUCTURE_ID: 'mediaStreamStructureId',\n    METRICS: 'Metrics',\n    METRICS_MINUS: 'metrics',\n    MIME_TYPE: 'mimeType',\n    MINIMUM_UPDATE_PERIOD: 'minimumUpdatePeriod',\n    MIN_BUFFER_TIME: 'minBufferTime',\n    MP4_PROTECTION_SCHEME: 'urn:mpeg:dash:mp4protection:2011',\n    MPD: 'MPD',\n    MPD_TYPE: 'mpd',\n    MPD_PATCH_TYPE: 'mpdpatch',\n    ORDER: 'order',\n    ORIGINAL_MPD_ID: 'mpdId',\n    ORIGINAL_PUBLISH_TIME: 'originalPublishTime',\n    PATCH_LOCATION: 'PatchLocation',\n    PERIOD: 'Period',\n    PRESELECTION: 'Preselection',\n    PRESELECTION_COMPONENTS: 'preselectionComponents',\n    PRESENTATION_TIME: 'presentationTime',\n    PRESENTATION_TIME_OFFSET: 'presentationTimeOffset',\n    PRO: 'pro',\n    PRODUCER_REFERENCE_TIME: 'ProducerReferenceTime',\n    PRODUCER_REFERENCE_TIME_TYPE: {\n        ENCODER: 'encoder',\n        CAPTURED: 'captured',\n        APPLICATION: 'application'\n    },\n    PROFILES: 'profiles',\n    PSSH: 'pssh',\n    PUBLISH_TIME: 'publishTime',\n    QUALITY_RANKING: 'qualityRanking',\n    QUERY_BEFORE_START: 'queryBeforeStart',\n    QUERY_PART: '$querypart$',\n    RANGE: 'range',\n    RATING: 'Rating',\n    REF: 'ref',\n    REF_ID: 'refId',\n    REMOVE: 'remove',\n    REPLACE: 'replace',\n    REPORTING: 'Reporting',\n    REPRESENTATION: 'Representation',\n    REPRESENTATION_INDEX: 'RepresentationIndex',\n    ROBUSTNESS: 'robustness',\n    ROLE: 'Role',\n    S: 'S',\n    SAR: 'sar',\n    SCAN_TYPE: 'scanType',\n    SEGMENT_ALIGNMENT: 'segmentAlignment',\n    SEGMENT_BASE: 'SegmentBase',\n    SEGMENT_LIST: 'SegmentList',\n    SEGMENT_PROFILES: 'segmentProfiles',\n    SEGMENT_SEQUENCE_PROPERTIES: 'SegmentSequenceProperties',\n    SEGMENT_TEMPLATE: 'SegmentTemplate',\n    SEGMENT_TIMELINE: 'SegmentTimeline',\n    SEGMENT_TYPE: 'segment',\n    SEGMENT_URL: 'SegmentURL',\n    SERVICE_DESCRIPTION: 'ServiceDescription',\n    SERVICE_DESCRIPTION_LATENCY: 'Latency',\n    SERVICE_DESCRIPTION_OPERATING_BANDWIDTH: 'OperatingBandwidth',\n    SERVICE_DESCRIPTION_OPERATING_QUALITY: 'OperatingQuality',\n    SERVICE_DESCRIPTION_PLAYBACK_RATE: 'PlaybackRate',\n    SERVICE_DESCRIPTION_SCOPE: 'Scope',\n    SERVICE_LOCATION: 'serviceLocation',\n    SERVICE_LOCATIONS: 'serviceLocations',\n    SOURCE_URL: 'sourceURL',\n    START: 'start',\n    START_NUMBER: 'startNumber',\n    START_WITH_SAP: 'startWithSAP',\n    STATIC: 'static',\n    STEERING_TYPE: 'steering',\n    SUBSET: 'Subset',\n    SUBTITLE: 'subtitle',\n    SUB_REPRESENTATION: 'SubRepresentation',\n    SUB_SEGMENT_ALIGNMENT: 'subsegmentAlignment',\n    SUGGESTED_PRESENTATION_DELAY: 'suggestedPresentationDelay',\n    SUPPLEMENTAL_PROPERTY: 'SupplementalProperty',\n    SUPPLEMENTAL_CODECS: 'scte214:supplementalCodecs',\n    TAG: 'tag',\n    TIMESCALE: 'timescale',\n    TIMESHIFT_BUFFER_DEPTH: 'timeShiftBufferDepth',\n    TTL: 'ttl',\n    TYPE: 'type',\n    UTC_TIMING: 'UTCTiming',\n    VALUE: 'value',\n    VIEWPOINT: 'Viewpoint',\n    WALL_CLOCK_TIME: 'wallClockTime',\n    WIDTH: 'width',\n}\n\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Constants declaration\n */\nexport default {\n    /**\n     *  @constant {string} STREAM Stream media type. Mainly used to report metrics relative to the full stream\n     *  @memberof Constants#\n     *  @static\n     */\n    STREAM: 'stream',\n\n    /**\n     *  @constant {string} VIDEO Video media type\n     *  @memberof Constants#\n     *  @static\n     */\n    VIDEO: 'video',\n\n    /**\n     *  @constant {string} ENHANCEMENT Enhancement media type\n     *  @memberof Constants#\n     *  @static\n     */\n    ENHANCEMENT: 'enhancement',\n\n    /**\n     *  @constant {string} AUDIO Audio media type\n     *  @memberof Constants#\n     *  @static\n     */\n    AUDIO: 'audio',\n\n    /**\n     *  @constant {string} TEXT Text media type\n     *  @memberof Constants#\n     *  @static\n     */\n    TEXT: 'text',\n\n    /**\n     *  @constant {string} MUXED Muxed (video/audio in the same chunk) media type\n     *  @memberof Constants#\n     *  @static\n     */\n    MUXED: 'muxed',\n\n    /**\n     *  @constant {string} IMAGE Image media type\n     *  @memberof Constants#\n     *  @static\n     */\n    IMAGE: 'image',\n\n    /**\n     *  @constant {string} STPP STTP Subtitles format\n     *  @memberof Constants#\n     *  @static\n     */\n    STPP: 'stpp',\n\n    /**\n     *  @constant {string} TTML STTP Subtitles format\n     *  @memberof Constants#\n     *  @static\n     */\n    TTML: 'ttml',\n\n    /**\n     *  @constant {string} VTT STTP Subtitles format\n     *  @memberof Constants#\n     *  @static\n     */\n    VTT: 'vtt',\n\n    /**\n     *  @constant {string} WVTT STTP Subtitles format\n     *  @memberof Constants#\n     *  @static\n     */\n    WVTT: 'wvtt',\n\n    /**\n     *  @constant {string} Content Steering\n     *  @memberof Constants#\n     *  @static\n     */\n    CONTENT_STEERING: 'contentSteering',\n\n    /**\n     *  @constant {string} LIVE_CATCHUP_MODE_DEFAULT Throughput calculation based on moof parsing\n     *  @memberof Constants#\n     *  @static\n     */\n    LIVE_CATCHUP_MODE_DEFAULT: 'liveCatchupModeDefault',\n\n    /**\n     *  @constant {string} LIVE_CATCHUP_MODE_LOLP Throughput calculation based on moof parsing\n     *  @memberof Constants#\n     *  @static\n     */\n    LIVE_CATCHUP_MODE_LOLP: 'liveCatchupModeLoLP',\n\n    /**\n     *  @constant {string} MOVING_AVERAGE_SLIDING_WINDOW Moving average sliding window\n     *  @memberof Constants#\n     *  @static\n     */\n    MOVING_AVERAGE_SLIDING_WINDOW: 'slidingWindow',\n\n    /**\n     *  @constant {string} EWMA Exponential moving average\n     *  @memberof Constants#\n     *  @static\n     */\n    MOVING_AVERAGE_EWMA: 'ewma',\n\n    /**\n     *  @constant {string} BAD_ARGUMENT_ERROR Invalid Arguments type of error\n     *  @memberof Constants#\n     *  @static\n     */\n    BAD_ARGUMENT_ERROR: 'Invalid Arguments',\n\n    /**\n     *  @constant {string} MISSING_CONFIG_ERROR Missing configuration parameters type of error\n     *  @memberof Constants#\n     *  @static\n     */\n    MISSING_CONFIG_ERROR: 'Missing config parameter(s)',\n\n    /**\n     *  @constant {string} TRACK_SWITCH_MODE_ALWAYS_REPLACE used to clear the buffered data (prior to current playback position) after track switch. Default for audio\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SWITCH_MODE_ALWAYS_REPLACE: 'alwaysReplace',\n\n    /**\n     *  @constant {string} TRACK_SWITCH_MODE_NEVER_REPLACE used to forbid clearing the buffered data (prior to current playback position) after track switch. Defers to fastSwitchEnabled for placement of new data. Default for video\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SWITCH_MODE_NEVER_REPLACE: 'neverReplace',\n\n    /**\n     *  @constant {string} TRACK_SELECTION_MODE_FIRST_TRACK makes the player select the first track found in the manifest.\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SELECTION_MODE_FIRST_TRACK: 'firstTrack',\n\n    /**\n     *  @constant {string} TRACK_SELECTION_MODE_HIGHEST_BITRATE makes the player select the track with a highest bitrate. This mode is a default mode.\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SELECTION_MODE_HIGHEST_BITRATE: 'highestBitrate',\n\n    /**\n     *  @constant {string} TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY makes the player select the track with the lowest bitrate per pixel average.\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY: 'highestEfficiency',\n\n    /**\n     *  @constant {string} TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY makes the player select the track that contains partial segments that start with SAP type 0 or 1.\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY: 'lowestStartupDelay',\n\n    /**\n     *  @constant {string} TRACK_SELECTION_MODE_WIDEST_RANGE makes the player select the track with a widest range of bitrates.\n     *  @memberof Constants#\n     *  @static\n     */\n    TRACK_SELECTION_MODE_WIDEST_RANGE: 'widestRange',\n\n    /**\n     *  @constant {string} CMCD_QUERY_KEY specifies the key that is used for the CMCD query parameter.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_QUERY_KEY: 'CMCD',\n\n    /**\n     *  @constant {string} CMCD_MODE_QUERY specifies to attach CMCD metrics as query parameters.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_MODE_QUERY: 'query',\n\n    /**\n     *  @constant {string} CMCD_MODE_HEADER specifies to attach CMCD metrics as HTTP headers.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_MODE_HEADER: 'header',\n\n    /**\n     *  @constant {string} CMCD_AVAILABLE_KEYS specifies all the available keys for CMCD metrics.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_AVAILABLE_KEYS: ['br', 'd', 'ot', 'tb', 'bl', 'dl', 'mtp', 'nor', 'nrr', 'su', 'bs', 'rtp', 'cid', 'pr', 'sf', 'sid', 'st', 'v'],\n    /**\n     *  @constant {string} CMCD_AVAILABLE_KEYS_V2 specifies all the available keys for CMCD version 2 metrics.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_V2_AVAILABLE_KEYS: ['msd', 'ltc'],\n\n    /**\n     *  @constant {string} CMCD_AVAILABLE_REQUESTS specifies all the available requests type for CMCD metrics.\n     *  @memberof Constants#\n     *  @static\n     */\n    CMCD_AVAILABLE_REQUESTS: ['segment', 'mpd', 'xlink', 'steering', 'other'],\n\n\n    INITIALIZE: 'initialize',\n    TEXT_SHOWING: 'showing',\n    TEXT_HIDDEN: 'hidden',\n    TEXT_DISABLED: 'disabled',\n    ACCESSIBILITY_CEA608_SCHEME: 'urn:scte:dash:cc:cea-608:2015',\n    CC1: 'CC1',\n    CC3: 'CC3',\n    UTF8: 'utf-8',\n    SCHEME_ID_URI: 'schemeIdUri',\n    START_TIME: 'starttime',\n    SERVICE_DESCRIPTION_DVB_LL_SCHEME: 'urn:dvb:dash:lowlatency:scope:2019',\n    SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME: 'urn:dvb:dash:lowlatency:critical:2019',\n    CTA_5004_2023_SCHEME: 'urn:mpeg:dash:cta-5004:2023',\n    THUMBNAILS_SCHEME_ID_URIS: ['http://dashif.org/thumbnail_tile', 'http://dashif.org/guidelines/thumbnail_tile'],\n    FONT_DOWNLOAD_DVB_SCHEME: 'urn:dvb:dash:fontdownload:2014',\n    COLOUR_PRIMARIES_SCHEME_ID_URI: 'urn:mpeg:mpegB:cicp:ColourPrimaries',\n    URL_QUERY_INFO_SCHEME: 'urn:mpeg:dash:urlparam:2014',\n    EXT_URL_QUERY_INFO_SCHEME: 'urn:mpeg:dash:urlparam:2016',\n    MATRIX_COEFFICIENTS_SCHEME_ID_URI: 'urn:mpeg:mpegB:cicp:MatrixCoefficients',\n    TRANSFER_CHARACTERISTICS_SCHEME_ID_URI: 'urn:mpeg:mpegB:cicp:TransferCharacteristics',\n    SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI: 'urn:mpeg:dash:ssr:2023',\n    HDR_METADATA_FORMAT_SCHEME_ID_URI: 'urn:dvb:dash:hdr-dmi',\n    HDR_METADATA_FORMAT_VALUES: {\n        ST2094_10: 'ST2094-10',\n        SL_HDR2: 'SL-HDR2',\n        ST2094_40: 'ST2094-40'\n    },\n    MEDIA_CAPABILITIES_API: {\n        COLORGAMUT: {\n            SRGB: 'srgb',\n            P3: 'p3',\n            REC2020: 'rec2020'\n        },\n        TRANSFERFUNCTION: {\n            SRGB: 'srgb',\n            PQ: 'pq',\n            HLG: 'hlg'\n        },\n        HDR_METADATATYPE: {\n            SMPTE_ST_2094_10: 'smpteSt2094-10',\n            SLHDR2: 'slhdr2',\n            SMPTE_ST_2094_40: 'smpteSt2094-40'\n        }\n    },\n    XML: 'XML',\n    ARRAY_BUFFER: 'ArrayBuffer',\n    DVB_REPORTING_URL: 'dvb:reportingUrl',\n    DVB_PROBABILITY: 'dvb:probability',\n    OFF_MIMETYPE: 'application/font-sfnt',\n    WOFF_MIMETYPE: 'application/font-woff',\n    VIDEO_ELEMENT_READY_STATES: {\n        HAVE_NOTHING: 0,\n        HAVE_METADATA: 1,\n        HAVE_CURRENT_DATA: 2,\n        HAVE_FUTURE_DATA: 3,\n        HAVE_ENOUGH_DATA: 4\n    },\n    FILE_LOADER_TYPES: {\n        FETCH: 'fetch_loader',\n        XHR: 'xhr_loader'\n    },\n    THROUGHPUT_TYPES: {\n        LATENCY: 'throughput_type_latency',\n        BANDWIDTH: 'throughput_type_bandwidth'\n    },\n    THROUGHPUT_CALCULATION_MODES: {\n        EWMA: 'throughputCalculationModeEwma',\n        ZLEMA: 'throughputCalculationModeZlema',\n        ARITHMETIC_MEAN: 'throughputCalculationModeArithmeticMean',\n        BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN: 'throughputCalculationModeByteSizeWeightedArithmeticMean',\n        DATE_WEIGHTED_ARITHMETIC_MEAN: 'throughputCalculationModeDateWeightedArithmeticMean',\n        HARMONIC_MEAN: 'throughputCalculationModeHarmonicMean',\n        BYTE_SIZE_WEIGHTED_HARMONIC_MEAN: 'throughputCalculationModeByteSizeWeightedHarmonicMean',\n        DATE_WEIGHTED_HARMONIC_MEAN: 'throughputCalculationModeDateWeightedHarmonicMean',\n    },\n    LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE: {\n        MOOF_PARSING: 'lowLatencyDownloadTimeCalculationModeMoofParsing',\n        DOWNLOADED_DATA: 'lowLatencyDownloadTimeCalculationModeDownloadedData',\n        AAST: 'lowLatencyDownloadTimeCalculationModeAast',\n    },\n    RULES_TYPES: {\n        QUALITY_SWITCH_RULES: 'qualitySwitchRules',\n        ABANDON_FRAGMENT_RULES: 'abandonFragmentRules'\n    },\n    QUALITY_SWITCH_RULES: {\n        BOLA_RULE: 'BolaRule',\n        THROUGHPUT_RULE: 'ThroughputRule',\n        INSUFFICIENT_BUFFER_RULE: 'InsufficientBufferRule',\n        SWITCH_HISTORY_RULE: 'SwitchHistoryRule',\n        DROPPED_FRAMES_RULE: 'DroppedFramesRule',\n        LEARN_TO_ADAPT_RULE: 'L2ARule',\n        LOL_PLUS_RULE: 'LoLPRule'\n    },\n    ABANDON_FRAGMENT_RULES: {\n        ABANDON_REQUEST_RULE: 'AbandonRequestsRule'\n    },\n\n    /**\n     *  @constant {string} ID3_SCHEME_ID_URI specifies scheme ID URI for ID3 timed metadata\n     *  @memberof Constants#\n     *  @static\n     */\n    ID3_SCHEME_ID_URI: 'https://aomedia.org/emsg/ID3',\n    COMMON_ACCESS_TOKEN_HEADER: 'common-access-token',\n    DASH_ROLE_SCHEME_ID: 'urn:mpeg:dash:role:2011',\n    CODEC_FAMILIES: {\n        MP3: 'mp3',\n        AAC: 'aac',\n        AC3: 'ac3',\n        EC3: 'ec3',\n        DTSX: 'dtsx',\n        DTSC: 'dtsc',\n        AVC: 'avc',\n        HEVC: 'hevc'\n    }\n}\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES, LOSS OF USE, DATA, OR\n *  PROFITS, OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Protection Constants declaration\n * @ignore\n */\nexport default {\n    CLEARKEY_KEYSTEM_STRING: 'org.w3.clearkey',\n    WIDEVINE_KEYSTEM_STRING: 'com.widevine.alpha',\n    PLAYREADY_KEYSTEM_STRING: 'com.microsoft.playready',\n    PLAYREADY_RECOMMENDATION_KEYSTEM_STRING: 'com.microsoft.playready.recommendation',\n    WIDEVINE_UUID: 'edef8ba9-79d6-4ace-a3c8-27dcd51d21ed',\n    PLAYREADY_UUID: '9a04f079-9840-4286-ab92-e65be0885f95',\n    CLEARKEY_UUID: 'e2719d58-a985-b3c9-781a-b030af78d30e',\n    W3C_CLEARKEY_UUID: '1077efec-c0b2-4d02-ace3-3c1e52e2fb4b',\n    INITIALIZATION_DATA_TYPE_CENC: 'cenc',\n    INITIALIZATION_DATA_TYPE_KEYIDS: 'keyids',\n    INITIALIZATION_DATA_TYPE_WEBM: 'webm',\n    ENCRYPTION_SCHEME_CENC: 'cenc',\n    ENCRYPTION_SCHEME_CBCS: 'cbcs',\n    MEDIA_KEY_MESSAGE_TYPES: {\n        LICENSE_REQUEST: 'license-request',\n        LICENSE_RENEWAL: 'license-renewal',\n        LICENSE_RELEASE: 'license-release',\n        INDIVIDUALIZATION_REQUEST: 'individualization-request',\n    },\n    ROBUSTNESS_STRINGS: {\n        WIDEVINE: {\n            SW_SECURE_CRYPTO: 'SW_SECURE_CRYPTO',\n            SW_SECURE_DECODE: 'SW_SECURE_DECODE',\n            HW_SECURE_CRYPTO: 'HW_SECURE_CRYPTO',\n            HW_SECURE_DECODE: 'HW_SECURE_DECODE',\n            HW_SECURE_ALL: 'HW_SECURE_ALL'\n        }\n    },\n    MEDIA_KEY_STATUSES: {\n        USABLE: 'usable',\n        EXPIRED: 'expired',\n        RELEASED: 'released',\n        OUTPUT_RESTRICTED: 'output-restricted',\n        OUTPUT_DOWNSCALED: 'output-downscaled',\n        STATUS_PENDING: 'status-pending',\n        INTERNAL_ERROR: 'internal-error',\n    }\n}\n\n\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport EventsBase from '../../core/events/EventsBase.js';\n\n/**\n * @class\n */\nclass ProtectionEvents extends EventsBase {\n    /**\n     * @description Public facing external events to be used when including protection package.\n     * All public events will be aggregated into the MediaPlayerEvents Class and can be accessed\n     * via MediaPlayer.events.  public_ is the prefix that we use to move event names to MediaPlayerEvents.\n     */\n    constructor() {\n        super();\n\n        /**\n         * Event ID for events delivered when the protection set receives\n         * a key message from the CDM\n         *\n         * @ignore\n         */\n        this.INTERNAL_KEY_MESSAGE = 'internalKeyMessage';\n\n        /**\n         * Event ID for events delivered when the status of one decryption keys has changed\n         * @ignore\n         */\n        this.INTERNAL_KEY_STATUSES_CHANGED = 'internalkeyStatusesChanged';\n\n        /**\n         * Event ID for events delivered when a new key has been added\n         *\n         * @constant\n         * @deprecated The latest versions of the EME specification no longer\n         * use this event.  {@MediaPlayer.models.protectionModel.eventList.KEY_STATUSES_CHANGED}\n         * is preferred.\n         * @event ProtectionEvents#KEY_ADDED\n         */\n        this.KEY_ADDED = 'public_keyAdded';\n        /**\n         * Event ID for events delivered when an error is encountered by the CDM\n         * while processing a license server response message\n         * @event ProtectionEvents#KEY_ERROR\n         */\n        this.KEY_ERROR = 'public_keyError';\n\n        /**\n         * Event ID for events delivered when the protection set receives\n         * a key message from the CDM\n         * @event ProtectionEvents#KEY_MESSAGE\n         */\n        this.KEY_MESSAGE = 'public_keyMessage';\n\n        /**\n         * Event ID for events delivered when a key session close\n         * process has completed\n         * @event ProtectionEvents#KEY_SESSION_CLOSED\n         */\n        this.KEY_SESSION_CLOSED = 'public_keySessionClosed';\n\n        /**\n         * Event ID for events delivered when a new key sessions creation\n         * process has completed\n         * @event ProtectionEvents#KEY_SESSION_CREATED\n         */\n        this.KEY_SESSION_CREATED = 'public_keySessionCreated';\n\n        /**\n         * Event ID for events delivered when a key session removal\n         * process has completed\n         * @event ProtectionEvents#KEY_SESSION_REMOVED\n         */\n        this.KEY_SESSION_REMOVED = 'public_keySessionRemoved';\n\n        /**\n         * Event ID for events delivered when the status of one or more\n         * decryption keys has changed\n         * @event ProtectionEvents#KEY_STATUSES_CHANGED\n         */\n        this.KEY_STATUSES_CHANGED = 'public_keyStatusesChanged';\n\n        /**\n         * Triggered when the key statuses Map() of the ProtectionController was updated. This happens after there is a keystatuseschange.\n         * The event can be used as an indicator when to refresh the list of possible Representations\n         * @event ProtectionEvents#KEY_STATUSES_MAP_UPDATED\n         */\n        this.KEY_STATUSES_MAP_UPDATED = 'keyStatusesMapUpdated';\n\n        /**\n         * Event ID for events delivered when a key system access procedure\n         * has completed\n         * @event ProtectionEvents#KEY_SYSTEM_ACCESS_COMPLETE\n         */\n        this.KEY_SYSTEM_ACCESS_COMPLETE = 'public_keySystemAccessComplete';\n\n        /**\n         * Event ID for events delivered when a key system selection procedure\n         * completes\n         * @event ProtectionEvents#KEY_SYSTEM_SELECTED\n         */\n        this.KEY_SYSTEM_SELECTED = 'public_keySystemSelected';\n\n        /**\n         * Event ID for events delivered when a license request procedure\n         * has completed\n         * @event ProtectionEvents#LICENSE_REQUEST_COMPLETE\n         */\n        this.LICENSE_REQUEST_COMPLETE = 'public_licenseRequestComplete';\n\n        /**\n         * Sending a license rquest\n         * @event ProtectionEvents#LICENSE_REQUEST_SENDING\n         */\n        this.LICENSE_REQUEST_SENDING = 'public_licenseRequestSending';\n\n        /**\n         * Event ID for needkey/encrypted events\n         * @ignore\n         */\n        this.NEED_KEY = 'needkey';\n\n        /**\n         * Event ID for events delivered when the Protection system is detected and created.\n         * @event ProtectionEvents#PROTECTION_CREATED\n         */\n        this.PROTECTION_CREATED = 'public_protectioncreated';\n\n        /**\n         * Event ID for events delivered when the Protection system is destroyed.\n         * @event ProtectionEvents#PROTECTION_DESTROYED\n         */\n        this.PROTECTION_DESTROYED = 'public_protectiondestroyed';\n\n        /**\n         * Event ID for events delivered when a new server certificate has\n         * been delivered to the CDM\n         * @ignore\n         */\n        this.SERVER_CERTIFICATE_UPDATED = 'serverCertificateUpdated';\n\n        /**\n         * Event ID for events delivered when the process of shutting down\n         * a protection set has completed\n         * @ignore\n         */\n        this.TEARDOWN_COMPLETE = 'protectionTeardownComplete';\n\n        /**\n         * Event ID for events delivered when a HTMLMediaElement has been\n         * associated with the protection set\n         * @ignore\n         */\n        this.VIDEO_ELEMENT_SELECTED = 'videoElementSelected';\n\n        /**\n         * Triggered when the key session has been updated successfully\n         * @ignore\n         */\n        this.KEY_SESSION_UPDATED = 'public_keySessionUpdated';\n    }\n}\n\nlet protectionEvents = new ProtectionEvents();\nexport default protectionEvents;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport ErrorsBase from '../../../core/errors/ErrorsBase.js';\n\n/**\n * @class\n */\nclass ProtectionErrors extends ErrorsBase {\n    constructor() {\n        super();\n\n        /**\n         *  Generid key Error code\n         */\n        this.MEDIA_KEYERR_CODE = 100;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_UNKNOWN_CODE = 101;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_CLIENT_CODE = 102;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_SERVICE_CODE = 103;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_OUTPUT_CODE = 104;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_HARDWARECHANGE_CODE = 105;\n        /**\n         *  Error code returned by keyerror api for ProtectionModel_01b\n         */\n        this.MEDIA_KEYERR_DOMAIN_CODE = 106;\n\n        /**\n         *  Error code returned when an error occured in keymessage event for ProtectionModel_01b\n         */\n        this.MEDIA_KEY_MESSAGE_ERROR_CODE = 107;\n        /**\n         *  Error code returned when challenge is invalid in keymessage event (event triggered by CDM)\n         */\n        this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE = 108;\n        /**\n         *  Error code returned when License server certificate has not been successfully updated\n         */\n        this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE = 109;\n        /**\n         *  Error code returned when license validity has expired\n         */\n        this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE = 110;\n        /**\n         *  Error code returned when no licenser url is defined\n         */\n        this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE = 111;\n        /**\n         *  Error code returned when key system access is denied\n         */\n        this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE = 112;\n        /**\n         *  Error code returned when key session has not been successfully created\n         */\n        this.KEY_SESSION_CREATED_ERROR_CODE = 113;\n        /**\n         *  Error code returned when license request failed after a keymessage event has been triggered\n         */\n        this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE = 114;\n\n        this.MEDIA_KEYERR_UNKNOWN_MESSAGE = 'An unspecified error occurred. This value is used for errors that don\\'t match any of the other codes.';\n        this.MEDIA_KEYERR_CLIENT_MESSAGE = 'The Key System could not be installed or updated.';\n        this.MEDIA_KEYERR_SERVICE_MESSAGE = 'The message passed into update indicated an error from the license service.';\n        this.MEDIA_KEYERR_OUTPUT_MESSAGE = 'There is no available output device with the required characteristics for the content protection system.';\n        this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE = 'A hardware configuration change caused a content protection error.';\n        this.MEDIA_KEYERR_DOMAIN_MESSAGE = 'An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.';\n        this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE = 'Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!';\n        this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE = 'DRM: Empty key message from CDM';\n        this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE = 'Error updating server certificate -- ';\n        this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE = 'DRM: KeyStatusChange error! -- License has expired';\n        this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE = 'DRM: No license server URL specified!';\n        this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE = 'DRM: KeySystem Access Denied! -- ';\n        this.KEY_SESSION_CREATED_ERROR_MESSAGE = 'DRM: unable to create session! --';\n        this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE = 'DRM: licenser error! --';\n    }\n}\n\nlet protectionErrors = new ProtectionErrors();\nexport default protectionErrors;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @class\n * @ignore\n */\nclass DashJSError {\n    constructor(code, message, data) {\n        this.code = code || null;\n        this.message = message || null;\n        this.data = data || null;\n    }\n}\n\nexport default DashJSError;","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc This Object holds reference to the HTTPRequest for manifest, fragment and xlink loading.\n * Members which are not defined in ISO23009-1 Annex D should be prefixed by a _ so that they are ignored\n * by Metrics Reporting code.\n * @ignore\n */\nclass HTTPRequest {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Identifier of the TCP connection on which the HTTP request was sent.\n         * @public\n         */\n        this.tcpid = null;\n        /**\n         * This is an optional parameter and should not be included in HTTP request/response transactions for progressive download.\n         * The type of the request:\n         * - MPD\n         * - XLink expansion\n         * - Initialization Fragment\n         * - Index Fragment\n         * - Media Fragment\n         * - Bitstream Switching Fragment\n         * - other\n         * @public\n         */\n        this.type = null;\n        /**\n         * The original URL (before any redirects or failures)\n         * @public\n         */\n        this.url = null;\n        /**\n         * The actual URL requested, if different from above\n         * @public\n         */\n        this.actualurl = null;\n        /**\n         * The contents of the byte-range-spec part of the HTTP Range header.\n         * @public\n         */\n        this.range = null;\n        /**\n         * Real-Time | The real time at which the request was sent.\n         * @public\n         */\n        this.trequest = null;\n        /**\n         * Real-Time | The real time at which the first byte of the response was received.\n         * @public\n         */\n        this.tresponse = null;\n        /**\n         * The HTTP response code.\n         * @public\n         */\n        this.responsecode = null;\n        /**\n         * The duration of the throughput trace intervals (ms), for successful requests only.\n         * @public\n         */\n        this.interval = null;\n        /**\n         * Throughput traces, for successful requests only.\n         * @public\n         */\n        this.trace = [];\n        /**\n         * The CMSD static and dynamic values retrieved from CMSD response headers.\n         * @public\n         */\n        this.cmsd = null;\n\n        /**\n         * Type of stream (\"audio\" | \"video\" etc..)\n         * @public\n         */\n        this._stream = null;\n        /**\n         * Real-Time | The real time at which the request finished.\n         * @public\n         */\n        this._tfinish = null;\n        /**\n         * The duration of the media requests, if available, in seconds.\n         * @public\n         */\n        this._mediaduration = null;\n        /**\n         * all the response headers from request.\n         * @public\n         */\n        this._responseHeaders = null;\n        /**\n         * The selected service location for the request. string.\n         * @public\n         */\n        this._serviceLocation = null;\n        /**\n         * The type of the loader that was used. Distinguish between fetch loader and xhr loader\n         */\n        this._fileLoaderType = null;\n        /**\n         * The values derived from the ResourceTimingAPI.\n         */\n        this._resourceTimingValues = null;\n    }\n}\n\n/**\n * @classdesc This Object holds reference to the progress of the HTTPRequest.\n * @ignore\n */\nclass HTTPRequestTrace {\n    /**\n     * @class\n     */\n    constructor() {\n        /**\n         * Real-Time | Measurement stream start.\n         * @public\n         */\n        this.s = null;\n        /**\n         * Measurement stream duration (ms).\n         * @public\n         */\n        this.d = null;\n        /**\n         * List of integers counting the bytes received in each trace interval within the measurement stream.\n         * @public\n         */\n        this.b = [];\n    }\n}\n\nHTTPRequest.GET = 'GET';\nHTTPRequest.HEAD = 'HEAD';\nHTTPRequest.MPD_TYPE = 'MPD';\nHTTPRequest.XLINK_EXPANSION_TYPE = 'XLinkExpansion';\nHTTPRequest.INIT_SEGMENT_TYPE = 'InitializationSegment';\nHTTPRequest.INDEX_SEGMENT_TYPE = 'IndexSegment';\nHTTPRequest.MEDIA_SEGMENT_TYPE = 'MediaSegment';\nHTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE = 'BitstreamSwitchingSegment';\nHTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE = 'FragmentInfoSegment';\nHTTPRequest.DVB_REPORTING_TYPE = 'DVBReporting';\nHTTPRequest.LICENSE = 'license';\nHTTPRequest.CONTENT_STEERING_TYPE = 'ContentSteering';\nHTTPRequest.OTHER_TYPE = 'other';\n\nexport {HTTPRequest, HTTPRequestTrace};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdO = {};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport DashConstants from '../../dash/constants/DashConstants.js';\nimport ProtectionConstants from '../constants/ProtectionConstants.js';\n\nconst LICENSE_SERVER_MANIFEST_CONFIGURATIONS = {\n    prefixes: ['clearkey', 'dashif', 'ck']\n};\n\n/**\n * @class\n * @ignore\n */\nclass CommonEncryption {\n    /**\n     * Find and return the ContentProtection element in the given array\n     * that indicates support for MP4 Common Encryption\n     *\n     * @param {Array} cpArray array of content protection elements\n     * @returns {Object|null} the Common Encryption content protection element or\n     * null if one was not found\n     */\n    static findMp4ProtectionElement(cpArray) {\n        let retVal = null;\n        for (let i = 0; i < cpArray.length; ++i) {\n            let cp = cpArray[i];\n            if (cp.schemeIdUri && cp.schemeIdUri.toLowerCase() === DashConstants.MP4_PROTECTION_SCHEME && cp.value &&\n                (cp.value.toLowerCase() === ProtectionConstants.ENCRYPTION_SCHEME_CENC || cp.value.toLowerCase() === ProtectionConstants.ENCRYPTION_SCHEME_CBCS)) {\n                retVal = cp;\n            }\n        }\n        return retVal;\n    }\n\n    /**\n     * Returns just the data portion of a single PSSH\n     *\n     * @param {ArrayBuffer} pssh - the PSSH\n     * @return {ArrayBuffer} data portion of the PSSH\n     */\n    static getPSSHData(pssh) {\n        let offset = 8; // Box size and type fields\n        let view = new DataView(pssh);\n\n        // Read version\n        let version = view.getUint8(offset);\n\n        offset += 20; // Version (1), flags (3), system ID (16)\n\n        if (version > 0) {\n            offset += 4 + (16 * view.getUint32(offset)); // Key ID count (4) and All key IDs (16*count)\n        }\n\n        offset += 4; // Data size\n        return pssh.slice(offset);\n    }\n\n    /**\n     * Returns the PSSH associated with the given key system from the concatenated\n     * list of PSSH boxes in the given initData\n     *\n     * @param {KeySystem} keySystem the desired\n     * key system\n     * @param {ArrayBuffer} initData 'cenc' initialization data.  Concatenated list of PSSH.\n     * @returns {ArrayBuffer|null} The PSSH box data corresponding to the given key system, null if not found\n     * or null if a valid association could not be found.\n     */\n    static getPSSHForKeySystem(keySystem, initData) {\n        let psshList = CommonEncryption.parsePSSHList(initData);\n        if (keySystem && psshList.hasOwnProperty(keySystem.uuid.toLowerCase())) {\n            return psshList[keySystem.uuid.toLowerCase()];\n        }\n        return null;\n    }\n\n    /**\n     * Parse a standard common encryption PSSH which contains a simple\n     * base64-encoding of the init data\n     *\n     * @param {Object} cpData the ContentProtection element\n     * @param {BASE64} BASE64 reference\n     * @returns {ArrayBuffer|null} the init data or null if not found\n     */\n    static parseInitDataFromContentProtection(cpData, BASE64) {\n        if ('pssh' in cpData && cpData.pssh) {\n\n            // Remove whitespaces and newlines from pssh text\n            cpData.pssh.__text = cpData.pssh.__text.replace(/\\r?\\n|\\r/g, '').replace(/\\s+/g, '');\n\n            return BASE64.decodeArray(cpData.pssh.__text).buffer;\n        }\n        return null;\n    }\n\n    /**\n     * Parses list of PSSH boxes into keysystem-specific PSSH data\n     *\n     * @param {ArrayBuffer} data - the concatenated list of PSSH boxes as provided by\n     * CDM as initialization data when CommonEncryption content is detected\n     * @returns {Object|Array} an object that has a property named according to each of\n     * the detected key system UUIDs (e.g. 00000000-0000-0000-0000-0000000000)\n     * and a ArrayBuffer (the entire PSSH box) as the property value\n     */\n    static parsePSSHList(data) {\n\n        if (data === null || data === undefined) {\n            return [];\n        }\n\n        let dv = new DataView(data.buffer || data); // data.buffer first for Uint8Array support\n        let done = false;\n        let pssh = {};\n\n        // TODO: Need to check every data read for end of buffer\n        let byteCursor = 0;\n        while (!done) {\n\n            let size,\n                nextBox,\n                version,\n                systemID;\n            let boxStart = byteCursor;\n\n            if (byteCursor >= dv.buffer.byteLength) {\n                break;\n            }\n\n            /* Box size */\n            size = dv.getUint32(byteCursor);\n            nextBox = byteCursor + size;\n            byteCursor += 4;\n\n            /* Verify PSSH */\n            if (dv.getUint32(byteCursor) !== 0x70737368) {\n                byteCursor = nextBox;\n                continue;\n            }\n            byteCursor += 4;\n\n            /* Version must be 0 or 1 */\n            version = dv.getUint8(byteCursor);\n            if (version !== 0 && version !== 1) {\n                byteCursor = nextBox;\n                continue;\n            }\n            byteCursor++;\n\n            byteCursor += 3; /* skip flags */\n\n            // 16-byte UUID/SystemID\n            systemID = '';\n            let i, val;\n            for (i = 0; i < 4; i++) {\n                val = dv.getUint8(byteCursor + i).toString(16);\n                systemID += (val.length === 1) ? '0' + val : val;\n            }\n            byteCursor += 4;\n            systemID += '-';\n            for (i = 0; i < 2; i++) {\n                val = dv.getUint8(byteCursor + i).toString(16);\n                systemID += (val.length === 1) ? '0' + val : val;\n            }\n            byteCursor += 2;\n            systemID += '-';\n            for (i = 0; i < 2; i++) {\n                val = dv.getUint8(byteCursor + i).toString(16);\n                systemID += (val.length === 1) ? '0' + val : val;\n            }\n            byteCursor += 2;\n            systemID += '-';\n            for (i = 0; i < 2; i++) {\n                val = dv.getUint8(byteCursor + i).toString(16);\n                systemID += (val.length === 1) ? '0' + val : val;\n            }\n            byteCursor += 2;\n            systemID += '-';\n            for (i = 0; i < 6; i++) {\n                val = dv.getUint8(byteCursor + i).toString(16);\n                systemID += (val.length === 1) ? '0' + val : val;\n            }\n            byteCursor += 6;\n\n            systemID = systemID.toLowerCase();\n\n            /* PSSH Data Size */\n            byteCursor += 4;\n\n            /* PSSH Data */\n            pssh[systemID] = dv.buffer.slice(boxStart, nextBox);\n            byteCursor = nextBox;\n        }\n\n        return pssh;\n    }\n\n    static getLicenseServerUrlFromMediaInfo(mediaInfoArr, schemeIdUri) {\n        try {\n\n            if (!mediaInfoArr || mediaInfoArr.length === 0) {\n                return null;\n            }\n\n            let i = 0;\n            let licenseServer = null;\n\n            while (i < mediaInfoArr.length && !licenseServer) {\n                const mediaInfo = mediaInfoArr[i];\n\n                if (mediaInfo && mediaInfo.contentProtection && mediaInfo.contentProtection.length > 0) {\n                    const targetProtectionData = mediaInfo.contentProtection.filter((cp) => {\n                        return cp.schemeIdUri && cp.schemeIdUri === schemeIdUri;\n                    });\n\n                    if (targetProtectionData && targetProtectionData.length > 0) {\n                        let j = 0;\n                        while (j < targetProtectionData.length && !licenseServer) {\n                            const contentProtection = targetProtectionData[j];\n                            if (contentProtection.laUrl\n                                && contentProtection.laUrl.__prefix\n                                && LICENSE_SERVER_MANIFEST_CONFIGURATIONS.prefixes.includes(contentProtection.laUrl.__prefix)\n                                && contentProtection.laUrl.__text) {\n                                licenseServer = contentProtection.laUrl.__text;\n                            }\n                            j += 1;\n                        }\n                    }\n                }\n                i += 1;\n            }\n            return licenseServer;\n        } catch (e) {\n            return null;\n        }\n    }\n\n    static hexKidToBufferSource(hexKid) {\n        const cleanedHexKid = hexKid.replace(/-/g, '');\n\n        const typedArray = new Uint8Array(cleanedHexKid.match(/[\\da-f]{2}/gi).map(function (h) {\n            return parseInt(h, 16)\n        }))\n\n        return typedArray.buffer\n    }\n}\n\nexport default CommonEncryption;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc A media capability\n * @ignore\n */\nclass MediaCapability {\n    /**\n     * @param {string} contentType MIME type and codecs (RFC6386)\n     * @param {string} robustness\n     * @class\n     * @ignore\n     */\n    constructor(contentType, robustness) {\n        this.contentType = contentType;\n        this.robustness = robustness;\n    }\n}\n\nexport default MediaCapability;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\n\n/**\n * @classdesc Represents a set of configurations that describe the capabilities desired for\n *  support by a given CDM\n * @ignore\n */\nclass KeySystemConfiguration {\n    /**\n     * @param {Array.<MediaCapability>} audioCapabilities array of\n     * desired audio capabilities.  Higher preference capabilities should be placed earlier\n     * in the array.\n     * @param {Array.<MediaCapability>} videoCapabilities array of\n     * desired video capabilities.  Higher preference capabilities should be placed earlier\n     * in the array.\n     * @param {string} distinctiveIdentifier desired use of distinctive identifiers.\n     * One of \"required\", \"optional\", or \"not-allowed\"\n     * @param {string} persistentState desired support for persistent storage of\n     * key systems.  One of \"required\", \"optional\", or \"not-allowed\"\n     * @param {Array.<string>} sessionTypes List of session types that must\n     * be supported by the key system\n     * @class\n     */\n    constructor(audioCapabilities, videoCapabilities, distinctiveIdentifier, persistentState, sessionTypes, initDataTypes) {\n        this.initDataTypes = initDataTypes && initDataTypes.length > 0 ? initDataTypes : [ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC];\n        if (audioCapabilities && audioCapabilities.length) {\n            this.audioCapabilities = audioCapabilities;\n        }\n        if (videoCapabilities && videoCapabilities.length) {\n            this.videoCapabilities = videoCapabilities;\n        }\n        this.distinctiveIdentifier = distinctiveIdentifier;\n        this.persistentState = persistentState;\n        this.sessionTypes = sessionTypes;\n    }\n}\n\nexport default KeySystemConfiguration;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc Defines a license request\n * @ignore\n */\nclass LicenseRequest {\n    /**\n     * Defines a license request\n     *\n     * @class\n     */\n    constructor(url, method, responseType, headers, withCredentials, messageType, sessionId, data) {\n\n        /**\n         * The license request url\n         */\n        this.url = url;\n\n        /**\n         * The HTTP method\n         */\n        this.method = method;\n\n        /**\n         * The HTTP response type\n         */\n        this.responseType = responseType;\n\n        /**\n         * The HTP request headers\n         */\n        this.headers = headers;\n\n        /**\n         * Wether request is done using credentials (cross-site cookies)\n         */\n        this.withCredentials = withCredentials;\n\n        /**\n         * The license request message type (see https://www.w3.org/TR/encrypted-media/#dom-mediakeymessagetype)\n         */\n        this.messageType = messageType;\n\n        /**\n         * The corresponding EME session ID\n         */\n        this.sessionId = sessionId;\n\n        /**\n         * The license request data\n         */\n        this.data = data;\n    }\n}\n\nexport default LicenseRequest;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc Defines a license response\n */\nclass LicenseResponse {\n    /**\n     * Defines a license response\n     *\n     * @class\n     * @ignore\n     */\n    constructor(url, headers, data) {\n\n        /**\n         * The url that was loaded, that can be redirected from original request url\n         */\n        this.url = url;\n\n        /**\n         * The HTP response headers\n         */\n        this.headers = headers;\n\n        /**\n         * The license response data\n         */\n        this.data = data;\n    }\n}\n\nexport default LicenseResponse;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport CommonEncryption from '../CommonEncryption.js';\nimport MediaCapability from '../vo/MediaCapability.js';\nimport KeySystemConfiguration from '../vo/KeySystemConfiguration.js';\nimport ProtectionErrors from '../errors/ProtectionErrors.js';\nimport DashJSError from '../../vo/DashJSError.js';\nimport LicenseRequest from '../vo/LicenseRequest.js';\nimport LicenseResponse from '../vo/LicenseResponse.js';\nimport {HTTPRequest} from '../../vo/metrics/HTTPRequest.js';\nimport Utils from '../../../core/Utils.js';\nimport Constants from '../../constants/Constants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\n\nconst NEEDKEY_BEFORE_INITIALIZE_RETRIES = 5;\nconst NEEDKEY_BEFORE_INITIALIZE_TIMEOUT = 500;\n\nconst LICENSE_SERVER_REQUEST_RETRIES = 3;\nconst LICENSE_SERVER_REQUEST_RETRY_INTERVAL = 1000;\nconst LICENSE_SERVER_REQUEST_DEFAULT_TIMEOUT = 8000;\n\n/**\n * @module ProtectionController\n * @description Provides access to media protection information and functionality.  Each\n * ProtectionController manages a single {@link MediaPlayer.models.ProtectionModel}\n * which encapsulates a set of protection information (EME APIs, selected key system,\n * key sessions).  The APIs of ProtectionController mostly align with the latest EME\n * APIs.  Key system selection is mostly automated when combined with app-overrideable\n * functionality provided in {@link ProtectionKeyController}.\n * @todo ProtectionController does almost all of its tasks automatically after init() is\n * called.  Applications might want more control over this process and want to go through\n * each step manually (key system selection, session creation, session maintenance).\n * This module can be accessed using the MediaPlayer API getProtectionController()\n * @param {Object} config\n */\n\nfunction ProtectionController(config) {\n\n    config = config || {};\n    const BASE64 = config.BASE64;\n    const cmcdModel = config.cmcdModel;\n    const constants = config.constants;\n    const customParametersModel = config.customParametersModel;\n    const debug = config.debug;\n    const eventBus = config.eventBus;\n    const events = config.events;\n    const protectionKeyController = config.protectionKeyController;\n    const settings = config.settings;\n    let protectionModel = config.protectionModel;\n    let needkeyRetries = [];\n\n    let applicationProvidedProtectionData,\n        instance,\n        keyStatusMap,\n        keySystemSelectionInProgress,\n        licenseRequestRetryTimeout,\n        licenseXhrRequest,\n        logger,\n        mediaInfoArr,\n        pendingMediaTypesToHandle,\n        robustnessLevel,\n        selectedKeySystem,\n        sessionType;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        pendingMediaTypesToHandle = [];\n        mediaInfoArr = [];\n        sessionType = 'temporary';\n        robustnessLevel = '';\n        licenseXhrRequest = null;\n        licenseRequestRetryTimeout = null;\n        keyStatusMap = new Map();\n        eventBus.on(events.INTERNAL_KEY_MESSAGE, _onKeyMessage, instance);\n    }\n\n    function _checkConfig() {\n        if (!eventBus || !eventBus.hasOwnProperty('on') || !protectionKeyController || !protectionKeyController.hasOwnProperty('getSupportedKeySystemMetadataFromContentProtection')) {\n            throw new Error('Missing config parameter(s)');\n        }\n    }\n\n    /**\n     * Initialize this protection system for a given media type.\n     *\n     * @param {StreamInfo} [mediaInfo] Media information\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function initializeForMedia(mediaInfo) {\n        // Not checking here if a session for similar KS/KID combination is already created\n        // because still don't know which keysystem will be selected.\n        // Once Keysystem is selected and before creating the session, we will do that check\n        // so we create the strictly necessary DRM sessions\n        if (!mediaInfo) {\n            throw new Error('mediaInfo can not be null or undefined');\n        }\n\n        _checkConfig();\n        mediaInfoArr.push(mediaInfo);\n    }\n\n    /**\n     * Once all mediaInfo objects have been added to our mediaInfoArray we can select a key system or check if the kid has changed and we need to trigger a new license request\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function handleKeySystemFromManifest() {\n        if (!mediaInfoArr || mediaInfoArr.length === 0) {\n            return;\n        }\n\n        let supportedKeySystemsMetadata = [];\n        mediaInfoArr.forEach((mediaInfo) => {\n            const keySystemsMetadata = protectionKeyController.getSupportedKeySystemMetadataFromContentProtection(mediaInfo.contentProtection, applicationProvidedProtectionData, sessionType);\n            // We assume that the same key systems are signaled for each AS. We can use the first entry we find\n            if (keySystemsMetadata.length > 0) {\n                if (supportedKeySystemsMetadata.length === 0) {\n                    supportedKeySystemsMetadata = keySystemsMetadata;\n                }\n                // Save config for creating key session once we selected a key system\n                pendingMediaTypesToHandle.push(keySystemsMetadata);\n            }\n        })\n\n        if (supportedKeySystemsMetadata && supportedKeySystemsMetadata.length > 0) {\n            _selectKeySystemOrUpdateKeySessions(supportedKeySystemsMetadata, true);\n        }\n    }\n\n    /**\n     * Selects a key system if we dont have any one yet. Otherwise we use the existing key system and trigger a new license request if the initdata has changed\n     * @param {array} supportedKeySystemsMetadata\n     * @private\n     */\n    function _handleKeySystemFromPssh(supportedKeySystemsMetadata) {\n        pendingMediaTypesToHandle.push(supportedKeySystemsMetadata);\n        _selectKeySystemOrUpdateKeySessions(supportedKeySystemsMetadata, false);\n    }\n\n    /**\n     * Select the key system or update one of our existing key sessions\n     * @param {array} supportedKeySystemsMetadata\n     * @param {boolean} fromManifest\n     * @private\n     */\n    function _selectKeySystemOrUpdateKeySessions(supportedKeySystemsMetadata, fromManifest) {\n        // First time, so we need to select a key system\n        if (!selectedKeySystem && !keySystemSelectionInProgress) {\n            _selectInitialKeySystem(supportedKeySystemsMetadata, fromManifest);\n        }\n\n        // We already selected a key system. We only need to trigger a new license exchange if the init data has changed\n        else if (selectedKeySystem) {\n            _handlePendingMediaTypes();\n        }\n    }\n\n    /**\n     * We do not have a key system yet. Select one\n     * @param {array} supportedKeySystemsMetadata\n     * @param {boolean} fromManifest\n     * @private\n     */\n    function _selectInitialKeySystem(supportedKeySystemsMetadata, fromManifest) {\n        if (keySystemSelectionInProgress) {\n            return\n        }\n\n        keySystemSelectionInProgress = true;\n\n        // Reorder key systems according to priority order provided in protectionData\n        supportedKeySystemsMetadata = _sortKeySystemsByPriority(supportedKeySystemsMetadata)\n\n        // Add all key systems to our request list since we have yet to select a key system\n        const keySystemConfigurationsToRequest = _getKeySystemConfigurations(supportedKeySystemsMetadata);\n\n        let keySystemAccess;\n        protectionModel.requestKeySystemAccess(keySystemConfigurationsToRequest)\n            .then((event) => {\n                keySystemAccess = event.data;\n                return _onKeySystemAccessed(keySystemAccess);\n            })\n            .then((keySystem) => {\n                _onMediaKeysCreated(keySystem, keySystemAccess);\n            })\n            .catch((event) => {\n                _handleKeySystemSelectionError(event, fromManifest);\n            })\n\n    }\n\n    function _onKeySystemAccessed(keySystemAccess) {\n        let selectedSystemString = keySystemAccess && keySystemAccess.selectedSystemString ? keySystemAccess.selectedSystemString : keySystemAccess.keySystem.systemString;\n        logger.info('DRM: KeySystem Access Granted for system string (' + selectedSystemString + ')!  Selecting key system...');\n        return protectionModel.selectKeySystem(keySystemAccess);\n    }\n\n    function _onMediaKeysCreated(keySystem, keySystemAccess) {\n        try {\n            selectedKeySystem = keySystem;\n            keySystemSelectionInProgress = false;\n\n            eventBus.trigger(events.KEY_SYSTEM_SELECTED, { data: keySystemAccess });\n\n            // Set server certificate from protData\n            const protData = _getProtDataForKeySystem(selectedKeySystem);\n            if (protData && protData.serverCertificate && protData.serverCertificate.length > 0) {\n                protectionModel.setServerCertificate(BASE64.decodeArray(protData.serverCertificate).buffer);\n            }\n\n            _handlePendingMediaTypes();\n        } catch (e) {\n            logger.error(e);\n        }\n    }\n\n    /**\n     * If we have already selected a key system we only need to create a new key session and issue a new license request if the init data has changed.\n     * @private\n     */\n    function _handlePendingMediaTypes() {\n        // Create key sessions for the different AdaptationSets\n        let ksIdx;\n        for (let i = 0; i < pendingMediaTypesToHandle.length; i++) {\n            for (ksIdx = 0; ksIdx < pendingMediaTypesToHandle[i].length; ksIdx++) {\n                if (selectedKeySystem === pendingMediaTypesToHandle[i][ksIdx].ks) {\n                    const keySystemMetadata = pendingMediaTypesToHandle[i][ksIdx]\n                    _loadOrCreateKeySession(keySystemMetadata)\n                    break;\n                }\n            }\n        }\n        pendingMediaTypesToHandle = [];\n    }\n\n    function _handleKeySystemSelectionError(event, fromManifest) {\n        selectedKeySystem = null;\n        keySystemSelectionInProgress = false;\n        if (!fromManifest) {\n            eventBus.trigger(events.KEY_SYSTEM_SELECTED, {\n                data: null,\n                error: new DashJSError(ProtectionErrors.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE, ProtectionErrors.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE + 'Error selecting key system! -- ' + event.error)\n            });\n        }\n    }\n\n    function _sortKeySystemsByPriority(supportedKeySystems) {\n        return supportedKeySystems.sort((ksA, ksB) => {\n            let indexA = (applicationProvidedProtectionData && applicationProvidedProtectionData[ksA.ks.systemString] && applicationProvidedProtectionData[ksA.ks.systemString].priority >= 0) ? applicationProvidedProtectionData[ksA.ks.systemString].priority : supportedKeySystems.length;\n            let indexB = (applicationProvidedProtectionData && applicationProvidedProtectionData[ksB.ks.systemString] && applicationProvidedProtectionData[ksB.ks.systemString].priority >= 0) ? applicationProvidedProtectionData[ksB.ks.systemString].priority : supportedKeySystems.length;\n            return indexA - indexB;\n        });\n    }\n\n    function _getKeySystemConfigurations(supportedKeySystemsMetadata) {\n        const keySystemConfigurationsToRequest = [];\n        for (let i = 0; i < supportedKeySystemsMetadata.length; i++) {\n            const keySystemConfiguration = _getKeySystemConfiguration(supportedKeySystemsMetadata[i]);\n            keySystemConfigurationsToRequest.push({\n                ks: supportedKeySystemsMetadata[i].ks,\n                configs: [keySystemConfiguration],\n                protData: supportedKeySystemsMetadata[i].protData\n            });\n        }\n\n        return keySystemConfigurationsToRequest;\n    }\n\n    /**\n     * Returns an object corresponding to the EME MediaKeySystemConfiguration dictionary\n     * @param {object} keySystem\n     * @return {KeySystemConfiguration}\n     * @private\n     */\n    function _getKeySystemConfiguration(keySystemData) {\n        const protData = keySystemData.protData;\n        const audioCapabilities = [];\n        const videoCapabilities = [];\n        const initDataTypes = (protData && protData.initDataTypes && protData.initDataTypes.length > 0) ? protData.initDataTypes : [ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC];\n        const audioRobustness = (protData && protData.audioRobustness && protData.audioRobustness.length > 0) ? protData.audioRobustness : robustnessLevel;\n        const videoRobustness = (protData && protData.videoRobustness && protData.videoRobustness.length > 0) ? protData.videoRobustness : robustnessLevel;\n        const ksSessionType = keySystemData.sessionType;\n        const distinctiveIdentifier = (protData && protData.distinctiveIdentifier) ? protData.distinctiveIdentifier : 'optional';\n        const persistentState = (protData && protData.persistentState) ? protData.persistentState : (ksSessionType === 'temporary') ? 'optional' : 'required';\n\n        mediaInfoArr.forEach((media) => {\n            if (media.type === constants.AUDIO) {\n                audioCapabilities.push(new MediaCapability(media.codec, audioRobustness));\n            } else if (media.type === constants.VIDEO) {\n                videoCapabilities.push(new MediaCapability(media.codec, videoRobustness));\n            }\n        });\n\n        return new KeySystemConfiguration(audioCapabilities, videoCapabilities, distinctiveIdentifier, persistentState, [ksSessionType], initDataTypes);\n    }\n\n    /**\n     * Loads an existing key session if we already have a session id. Otherwise we create a new key session\n     * @param {object} keySystemMetadata\n     * @private\n     */\n    function _loadOrCreateKeySession(keySystemMetadata) {\n        if (protectionKeyController.isClearKey(selectedKeySystem)) {\n            _handleClearkeySession(keySystemMetadata)\n        }\n\n        // Reuse existing KeySession\n        if (keySystemMetadata.sessionId) {\n            // Load MediaKeySession with sessionId\n            loadKeySession(keySystemMetadata);\n        }\n\n        // Create a new KeySession\n        else if (keySystemMetadata.initData !== null) {\n            // Create new MediaKeySession with initData\n            createKeySession(keySystemMetadata);\n        }\n    }\n\n    function _handleClearkeySession(keySystemMetadata) {\n        // For Clearkey: if parameters for generating init data was provided by the user, use them for generating\n        // initData and overwrite possible initData indicated in encrypted event (EME)\n        if (keySystemMetadata.protData && keySystemMetadata.protData.hasOwnProperty('clearkeys') && Object.keys(keySystemMetadata.protData.clearkeys).length !== 0) {\n            const initData = { kids: Object.keys(keySystemMetadata.protData.clearkeys) };\n            keySystemMetadata.initData = new TextEncoder().encode(JSON.stringify(initData));\n        }\n    }\n\n    /**\n     * Loads a key session with the given session ID from persistent storage.  This essentially creates a new key session\n     *\n     * @param {object} ksInfo\n     * @memberof module:ProtectionController\n     * @instance\n     * @fires ProtectionController#KeySessionCreated\n     * @ignore\n     */\n    function loadKeySession(keySystemMetadata) {\n        _checkConfig();\n        protectionModel.loadKeySession(keySystemMetadata);\n    }\n\n    /**\n     * Create a new key session associated with the given initialization data from the MPD or from the PSSH box in the media\n     * For the latest version of the EME a request is generated. Once this request is ready we get notified via the INTERNAL_KEY_MESSAGE event\n     * @param {ArrayBuffer} initData the initialization data\n     * @param {Uint8Array} cdmData the custom data to provide to licenser\n     * @memberof module:ProtectionController\n     * @instance\n     * @fires ProtectionController#KeySessionCreated\n     * @ignore\n     */\n    function createKeySession(keySystemMetadata) {\n\n        // Check for duplicate key id\n        if (keySystemMetadata && _doesSessionForKeyIdExists(keySystemMetadata.keyId)) {\n            return;\n        }\n\n        // Enforce maximum number of open MediaKeySessions, if settings are provided\n        _enforceMediaKeySessionLimit();\n\n        const initDataForKS = CommonEncryption.getPSSHForKeySystem(selectedKeySystem, keySystemMetadata ? keySystemMetadata.initData : null);\n        if (initDataForKS) {\n\n            // Check for duplicate initData\n            if (_isInitDataDuplicate(initDataForKS)) {\n                return;\n            }\n\n            try {\n                keySystemMetadata.initData = initDataForKS;\n                protectionModel.createKeySession(keySystemMetadata);\n            } catch (error) {\n                eventBus.trigger(events.KEY_SESSION_CREATED, {\n                    data: null,\n                    error: new DashJSError(ProtectionErrors.KEY_SESSION_CREATED_ERROR_CODE, ProtectionErrors.KEY_SESSION_CREATED_ERROR_MESSAGE + error.message)\n                });\n            }\n        } else if (keySystemMetadata && keySystemMetadata.initData) {\n            protectionModel.createKeySession(keySystemMetadata);\n        } else {\n            eventBus.trigger(events.KEY_SESSION_CREATED, {\n                data: null,\n                error: new DashJSError(ProtectionErrors.KEY_SESSION_CREATED_ERROR_CODE, ProtectionErrors.KEY_SESSION_CREATED_ERROR_MESSAGE + 'Selected key system is ' + (selectedKeySystem ? selectedKeySystem.systemString : null) + '.  needkey/encrypted event contains no initData corresponding to that key system!')\n            });\n        }\n    }\n\n    /**\n     * Enforces the maximum number of open MediaKeySessions, if settings are provided.\n     * @description This method checks the current number of open sessions and closes the oldest session if the limit is reached.\n     * @requires keepProtectionMediaKeys is enabled and keepProtectionMediaKeysMaximumOpenSessions is set with a positive value.\n     * @private\n     */\n    function _enforceMediaKeySessionLimit() {\n        if (!settings) {\n            return;\n        }\n        const isKeepProtectionMediaKeysEnabled = settings.get().streaming.protection.keepProtectionMediaKeys;\n        const maxSessions = settings.get().streaming.protection.keepProtectionMediaKeysMaximumOpenSessions;\n        if (typeof maxSessions !== 'number' || maxSessions <= 0) {\n            return;\n        }\n        if (!isKeepProtectionMediaKeysEnabled) {\n            logger.warn('DRM: keepProtectionMediaKeysMaximumOpenSessions is set to ' + maxSessions + ', but keepProtectionMediaKeys is not enabled. Therefore, keepProtectionMediaKeysMaximumOpenSessions will be ignored.');\n            return;\n        }\n        // Ensure protectionModel is available before accessing sessions\n        if (!protectionModel || typeof protectionModel.getSessionTokens !== 'function') {\n            return;\n        }\n        const sessionTokens = protectionModel.getSessionTokens() || [];\n        if (sessionTokens.length < maxSessions) {\n            return;\n        }\n        // Limit reached. Close the oldest session to make room for a new one.\n        const oldestSession = sessionTokens[0];\n        if (oldestSession) {\n            logger.info('DRM: Maximum number of open MediaKeySessions reached (' + maxSessions + '), closing oldest session.');\n            closeKeySession(oldestSession);\n        }\n    }\n\n    /**\n     * Returns the protectionData for a specific keysystem as specified by the application.\n     * @param {object} keySystem\n     * @return {object | null}\n     * @private\n     */\n    function _getProtDataForKeySystem(keySystem) {\n        if (keySystem) {\n            const keySystemString = keySystem.systemString;\n\n            if (applicationProvidedProtectionData) {\n                return (keySystemString in applicationProvidedProtectionData) ? applicationProvidedProtectionData[keySystemString] : null;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Removes all entries from the mediaInfoArr\n     */\n    function clearMediaInfoArray() {\n        mediaInfoArr = [];\n    }\n\n    /**\n     * Returns a set of supported key systems and CENC initialization data\n     * from the given array of ContentProtection elements.  Only\n     * key systems that are supported by this player will be returned.\n     * Key systems are returned in priority order (highest first).\n     *\n     * @param {Array.<Object>} cps - array of content protection elements parsed\n     * from the manifest\n     * @returns {Array.<Object>} array of objects indicating which supported key\n     * systems were found.  Empty array is returned if no\n     * supported key systems were found\n     * @memberof module:ProtectionKeyController\n     * @instance\n     * @ignore\n     */\n    function getSupportedKeySystemMetadataFromContentProtection(cps) {\n        _checkConfig();\n        return protectionKeyController.getSupportedKeySystemMetadataFromContentProtection(cps, applicationProvidedProtectionData, sessionType);\n    }\n\n    /**\n     * Checks if a session has already created for the provided key id\n     * @param {string} keyId\n     * @return {boolean}\n     * @private\n     */\n    function _doesSessionForKeyIdExists(keyId) {\n        if (!keyId) {\n            return false;\n        }\n\n        try {\n            const sessions = protectionModel.getSessionTokens();\n            for (let i = 0; i < sessions.length; i++) {\n                if (sessions[i].getKeyId() === keyId) {\n                    return true;\n                }\n            }\n            return false;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    /**\n     * Checks if the provided init data is equal to one of the existing init data values\n     * @param {any} initDataForKS\n     * @return {boolean}\n     * @private\n     */\n    function _isInitDataDuplicate(initDataForKS) {\n\n        if (!initDataForKS) {\n            return false;\n        }\n\n        try {\n            const currentInitData = protectionModel.getAllInitData();\n            for (let i = 0; i < currentInitData.length; i++) {\n                if (protectionKeyController.initDataEquals(initDataForKS, currentInitData[i])) {\n                    logger.debug('DRM: Ignoring initData because we have already seen it!');\n                    return true;\n                }\n            }\n\n            return false;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    /**\n     * Removes the given key session from persistent storage and closes the session\n     * as if {@link ProtectionController#closeKeySession}\n     * was called\n     *\n     * @param {SessionToken} sessionToken the session\n     * token\n     * @memberof module:ProtectionController\n     * @instance\n     * @fires ProtectionController#KeySessionRemoved\n     * @fires ProtectionController#KeySessionClosed\n     * @ignore\n     */\n    function removeKeySession(sessionToken) {\n        _checkConfig();\n        protectionModel.removeKeySession(sessionToken);\n    }\n\n    /**\n     * Closes the key session and releases all associated decryption keys.  These\n     * keys will no longer be available for decrypting media\n     *\n     * @param {SessionToken} sessionToken the session\n     * token\n     * @memberof module:ProtectionController\n     * @instance\n     * @fires ProtectionController#KeySessionClosed\n     * @ignore\n     */\n    function closeKeySession(sessionToken) {\n        _checkConfig();\n        protectionModel.closeKeySession(sessionToken);\n    }\n\n    /**\n     * Sets a server certificate for use by the CDM when signing key messages\n     * intended for a particular license server.  This will fire\n     * an error event if a key system has not yet been selected.\n     *\n     * @param {ArrayBuffer} serverCertificate a CDM-specific license server\n     * certificate\n     * @memberof module:ProtectionController\n     * @instance\n     * @return {Promise}\n     * @fires ProtectionController#ServerCertificateUpdated\n     */\n    function setServerCertificate(serverCertificate) {\n        _checkConfig();\n        return protectionModel.setServerCertificate(serverCertificate);\n    }\n\n    /**\n     * Associate this protection system with the given HTMLMediaElement.  This\n     * causes the system to register for needkey/encrypted events from the given\n     * element and provides a destination for setting of MediaKeys\n     *\n     * @param {HTMLMediaElement} element the media element to which the protection\n     * system should be associated\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function setMediaElement(element) {\n        _checkConfig();\n        if (element) {\n            protectionModel.setMediaElement(element);\n            eventBus.on(events.NEED_KEY, _onNeedKey, instance);\n        } else if (element === null) {\n            protectionModel.setMediaElement(element);\n            eventBus.off(events.NEED_KEY, _onNeedKey, instance);\n        }\n    }\n\n    /**\n     * Sets the session type to use when creating key sessions.  Either \"temporary\" or\n     * \"persistent-license\".  Default is \"temporary\".\n     *\n     * @param {string} value the session type\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function setSessionType(value) {\n        sessionType = value;\n    }\n\n    /**\n     * Sets the robustness level for video and audio capabilities. Optional to remove Chrome warnings.\n     * Possible values are SW_SECURE_CRYPTO, SW_SECURE_DECODE, HW_SECURE_CRYPTO, HW_SECURE_CRYPTO, HW_SECURE_DECODE, HW_SECURE_ALL.\n     *\n     * @param {string} level the robustness level\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function setRobustnessLevel(level) {\n        robustnessLevel = level;\n    }\n\n    /**\n     * Attach KeySystem-specific data to use for license acquisition with EME\n     *\n     * @param {Object} data an object containing property names corresponding to\n     * key system name strings (e.g. \"org.w3.clearkey\") and associated values\n     * being instances of {@link ProtectionData}\n     * @memberof module:ProtectionController\n     * @instance\n     * @ignore\n     */\n    function setProtectionData(data) {\n        applicationProvidedProtectionData = data;\n        protectionKeyController.setProtectionData(data);\n    }\n\n    /**\n     * Stop method is called when current playback is stopped/resetted.\n     *\n     * @memberof module:ProtectionController\n     * @instance\n     */\n    function stop() {\n        _abortLicenseRequest();\n        if (protectionModel) {\n            protectionModel.stop();\n        }\n    }\n\n    /**\n     * Destroys all protection data associated with this protection set.  This includes\n     * deleting all key sessions. In the case of persistent key sessions, the sessions\n     * will simply be unloaded and not deleted.  Additionally, if this protection set is\n     * associated with a HTMLMediaElement, it will be detached from that element.\n     *\n     * @memberof module:ProtectionController\n     * @instance\n     * @ignore\n     */\n    function reset() {\n        eventBus.off(events.INTERNAL_KEY_MESSAGE, _onKeyMessage, instance);\n\n        _checkConfig();\n\n        _abortLicenseRequest();\n\n        setMediaElement(null);\n\n        selectedKeySystem = null;\n        keySystemSelectionInProgress = false;\n\n        keyStatusMap = new Map();\n\n        if (protectionModel) {\n            protectionModel.reset();\n            protectionModel = null;\n        }\n\n        needkeyRetries.forEach(retryTimeout => clearTimeout(retryTimeout));\n        needkeyRetries = [];\n\n        mediaInfoArr = [];\n        pendingMediaTypesToHandle = [];\n    }\n\n    /**\n     * Event handler for the key message event. Once we have a key message we can issue a license request\n     * @param {object} e\n     * @private\n     */\n    function _onKeyMessage(e) {\n        logger.debug('DRM: onKeyMessage');\n\n        // Dispatch event to applications indicating we received a key message\n        const keyMessage = e.data;\n        eventBus.trigger(events.KEY_MESSAGE, { data: keyMessage });\n        const messageType = (keyMessage.messageType) ? keyMessage.messageType : ProtectionConstants.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST;\n        const message = keyMessage.message;\n        const sessionToken = keyMessage.sessionToken;\n        const protData = _getProtDataForKeySystem(selectedKeySystem);\n        const licenseServerModelInstance = protectionKeyController.getLicenseServerModelInstance(selectedKeySystem, protData, messageType);\n        const eventData = { sessionToken: sessionToken, messageType: messageType };\n\n        // Ensure message from CDM is not empty\n        if (!message || message.byteLength === 0) {\n            _sendLicenseRequestCompleteEvent(eventData, new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE, ProtectionErrors.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE));\n            return;\n        }\n\n        // Message not destined for license server\n        if (!licenseServerModelInstance) {\n            logger.debug('DRM: License server request not required for this message (type = ' + e.data.messageType + ').  Session ID = ' + sessionToken.getSessionId());\n            _sendLicenseRequestCompleteEvent(eventData);\n            return;\n        }\n\n        // Perform any special handling for ClearKey\n        if (protectionKeyController.isClearKey(selectedKeySystem)) {\n            const clearkeys = protectionKeyController.processClearKeyLicenseRequest(selectedKeySystem, protData, message);\n            if (clearkeys && clearkeys.keyPairs && clearkeys.keyPairs.length > 0) {\n                logger.debug('DRM: ClearKey license request handled by application!');\n                _sendLicenseRequestCompleteEvent(eventData);\n                protectionModel.updateKeySession(sessionToken, clearkeys);\n                return;\n            }\n        }\n\n        // In all other cases we have to make a license request\n        _issueLicenseRequest(keyMessage, licenseServerModelInstance, protData);\n    }\n\n    /**\n     * Notify other classes that the license request was completed\n     * @param {object} data\n     * @param {object} error\n     * @private\n     */\n    function _sendLicenseRequestCompleteEvent(data, error = null) {\n        eventBus.trigger(events.LICENSE_REQUEST_COMPLETE, { data: data, error: error });\n    }\n\n    /**\n     * Start issuing a license request\n     * @param {object} keyMessage\n     * @param {object} licenseServerData\n     * @param {object} protData\n     * @private\n     */\n    function _issueLicenseRequest(keyMessage, licenseServerData, protData) {\n        const sessionToken = keyMessage.sessionToken;\n        const messageType = (keyMessage.messageType) ? keyMessage.messageType : ProtectionConstants.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST;\n        const eventData = { sessionToken: sessionToken, messageType: messageType };\n        const keySystemString = selectedKeySystem ? selectedKeySystem.systemString : null;\n\n        // Determine license server URL\n        let url = _getLicenseServerUrl(protData, messageType, sessionToken, keyMessage, licenseServerData);\n\n        // Ensure valid license server URL\n        if (!url) {\n            _sendLicenseRequestCompleteEvent(eventData, new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE, ProtectionErrors.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));\n            return;\n        }\n\n        // Set optional XMLHttpRequest headers from protection data and message\n        const reqHeaders = {};\n        let withCredentials = false;\n        if (protData) {\n            _updateHeaders(reqHeaders, protData.httpRequestHeaders);\n        }\n        const message = keyMessage.message;\n        const headersFromMessage = selectedKeySystem.getRequestHeadersFromMessage(message);\n        _updateHeaders(reqHeaders, headersFromMessage);\n\n        Object.keys(reqHeaders).forEach((key) => {\n            if ('authorization' === key.toLowerCase()) {\n                withCredentials = true;\n            }\n        });\n\n        // Overwrite withCredentials property from protData if present\n        if (protData && typeof protData.withCredentials == 'boolean') {\n            withCredentials = protData.withCredentials;\n        }\n\n        const onLoad = function (xhr) {\n            if (!protectionModel) {\n                return;\n            }\n\n            if (xhr.status >= 200 && xhr.status <= 299) {\n                const responseHeaders = Utils.parseHttpHeaders(xhr.getAllResponseHeaders ? xhr.getAllResponseHeaders() : null);\n                let licenseResponse = new LicenseResponse(xhr.responseURL, responseHeaders, xhr.response);\n                const licenseResponseFilters = customParametersModel.getLicenseResponseFilters();\n                _applyFilters(licenseResponseFilters, licenseResponse)\n                    .then(() => {\n                        const licenseMessage = licenseServerData.getLicenseMessage(licenseResponse.data, keySystemString, messageType);\n                        if (licenseMessage !== null) {\n                            _sendLicenseRequestCompleteEvent(eventData);\n                            protectionModel.updateKeySession(sessionToken, licenseMessage);\n                        } else {\n                            _reportError(xhr, eventData, keySystemString, messageType, licenseServerData);\n                        }\n                    });\n            } else {\n                _reportError(xhr, eventData, keySystemString, messageType, licenseServerData);\n            }\n        };\n\n        const onAbort = function (xhr) {\n            _sendLicenseRequestCompleteEvent(eventData, new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,\n                ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + keySystemString + ' update, XHR aborted. status is \"' +\n                xhr.statusText + '\" (' + xhr.status + '), readyState is ' + xhr.readyState));\n        };\n\n        const onError = function (xhr) {\n            _sendLicenseRequestCompleteEvent(eventData, new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,\n                ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + keySystemString + ' update, XHR error. status is \"' +\n                xhr.statusText + '\" (' + xhr.status + '), readyState is ' + xhr.readyState));\n        };\n\n        const reqPayload = selectedKeySystem.getLicenseRequestFromMessage(message);\n        const reqMethod = licenseServerData.getHTTPMethod(messageType);\n        const responseType = licenseServerData.getResponseType(keySystemString, messageType);\n        const timeout = protData && !isNaN(protData.httpTimeout) ? protData.httpTimeout : LICENSE_SERVER_REQUEST_DEFAULT_TIMEOUT;\n        const sessionId = sessionToken.getSessionId() || null;\n\n        let licenseRequest = new LicenseRequest(url, reqMethod, responseType, reqHeaders, withCredentials, messageType, sessionId, reqPayload);\n        const retryAttempts = !isNaN(settings.get().streaming.retryAttempts[HTTPRequest.LICENSE]) ? settings.get().streaming.retryAttempts[HTTPRequest.LICENSE] : LICENSE_SERVER_REQUEST_RETRIES;\n        const licenseRequestFilters = customParametersModel.getLicenseRequestFilters();\n        _applyFilters(licenseRequestFilters, licenseRequest)\n            .then(() => {\n                _doLicenseRequest(licenseRequest, retryAttempts, timeout, onLoad, onAbort, onError);\n            });\n    }\n\n    /**\n     * Implement license requests with a retry mechanism to avoid temporary network issues to affect playback experience\n     * @param {object} request\n     * @param {number} retriesCount\n     * @param {number} timeout\n     * @param {function} onLoad\n     * @param {function} onAbort\n     * @param {function} onError\n     * @private\n     */\n    function _doLicenseRequest(request, retriesCount, timeout, onLoad, onAbort, onError) {\n        const xhr = new XMLHttpRequest();\n        const cmcdParameters = cmcdModel.getCmcdParametersFromManifest();\n\n        if (cmcdModel.isCmcdEnabled()) {\n            const cmcdMode = cmcdParameters.mode ? cmcdParameters.mode : settings.get().streaming.cmcd.mode;\n            if (cmcdMode === Constants.CMCD_MODE_QUERY) {\n                const cmcdParams = cmcdModel.getQueryParameter({\n                    url: request.url,\n                    type: HTTPRequest.LICENSE\n                });\n\n                if (cmcdParams) {\n                    request.url = Utils.addAdditionalQueryParameterToUrl(request.url, [cmcdParams]);\n                }\n            }\n        }\n\n        xhr.open(request.method, request.url, true);\n        xhr.responseType = request.responseType;\n        xhr.withCredentials = request.withCredentials;\n        if (timeout > 0) {\n            xhr.timeout = timeout;\n        }\n        for (const key in request.headers) {\n            xhr.setRequestHeader(key, request.headers[key]);\n        }\n\n        if (cmcdModel.isCmcdEnabled()) {\n            const cmcdMode = cmcdParameters.mode ? cmcdParameters.mode : settings.get().streaming.cmcd.mode;\n            if (cmcdMode === Constants.CMCD_MODE_HEADER) {\n                const cmcdHeaders = cmcdModel.getHeaderParameters({\n                    url: request.url,\n                    type: HTTPRequest.LICENSE\n                });\n\n                if (cmcdHeaders) {\n                    for (const header in cmcdHeaders) {\n                        let value = cmcdHeaders[header];\n                        if (value) {\n                            xhr.setRequestHeader(header, value);\n                        }\n                    }\n                }\n            }\n        }\n\n        const _retryRequest = function () {\n            // fail silently and retry\n            retriesCount--;\n            const retryInterval = !isNaN(settings.get().streaming.retryIntervals[HTTPRequest.LICENSE]) ? settings.get().streaming.retryIntervals[HTTPRequest.LICENSE] : LICENSE_SERVER_REQUEST_RETRY_INTERVAL;\n            licenseRequestRetryTimeout = setTimeout(function () {\n                _doLicenseRequest(request, retriesCount, timeout, onLoad, onAbort, onError);\n            }, retryInterval);\n        };\n\n        xhr.onload = function () {\n            licenseXhrRequest = null;\n            if (this.status >= 200 && this.status <= 299 || retriesCount <= 0) {\n                onLoad(this);\n            } else {\n                logger.warn('License request failed (' + this.status + '). Retrying it... Pending retries: ' + retriesCount);\n                _retryRequest();\n            }\n        };\n\n        xhr.ontimeout = xhr.onerror = function () {\n            licenseXhrRequest = null;\n            if (retriesCount <= 0) {\n                onError(this);\n            } else {\n                logger.warn('License request network request failed . Retrying it... Pending retries: ' + retriesCount);\n                _retryRequest();\n            }\n        };\n\n        xhr.onabort = function () {\n            onAbort(this);\n        };\n\n        // deprecated, to be removed\n        eventBus.trigger(events.LICENSE_REQUEST_SENDING, {\n            url: request.url,\n            headers: request.headers,\n            payload: request.data,\n            sessionId: request.sessionId\n        });\n\n        licenseXhrRequest = xhr;\n        xhr.send(request.data);\n    }\n\n    /**\n     * Aborts license request\n     * @private\n     */\n    function _abortLicenseRequest() {\n        if (licenseXhrRequest) {\n            licenseXhrRequest.onloadend = licenseXhrRequest.onerror = licenseXhrRequest.onprogress = undefined; //Ignore events from aborted requests.\n            licenseXhrRequest.abort();\n            licenseXhrRequest = null;\n        }\n\n        if (licenseRequestRetryTimeout) {\n            clearTimeout(licenseRequestRetryTimeout);\n            licenseRequestRetryTimeout = null;\n        }\n    }\n\n    /**\n     * Returns the url of the license server\n     * @param {object} protData\n     * @param {string} messageType\n     * @param {object} sessionToken\n     * @param {object} keyMessage\n     * @param {object} licenseServerData\n     * @return {*}\n     * @private\n     */\n    function _getLicenseServerUrl(protData, messageType, sessionToken, keyMessage, licenseServerData) {\n        let url = null;\n        const message = keyMessage.message;\n\n        // Check if the url is defined by the application\n        if (protData && protData.serverURL) {\n            const serverURL = protData.serverURL;\n            if (typeof serverURL === 'string' && serverURL !== '') {\n                url = serverURL;\n            } else if (typeof serverURL === 'object' && serverURL.hasOwnProperty(messageType)) {\n                url = serverURL[messageType];\n            }\n        }\n\n        // This is the old way of providing the url\n        else if (protData && protData.laURL && protData.laURL !== '') {\n            url = protData.laURL;\n        }\n\n        // No url provided by the app. Check the manifest and the pssh\n        else {\n            // Check for url defined in the manifest\n            url = CommonEncryption.getLicenseServerUrlFromMediaInfo(mediaInfoArr, selectedKeySystem.schemeIdURI);\n\n            // In case we are not using Clearky we can still get a url from the pssh.\n            if (!url && !protectionKeyController.isClearKey(selectedKeySystem)) {\n                const psshData = CommonEncryption.getPSSHData(sessionToken.initData);\n                url = selectedKeySystem.getLicenseServerURLFromInitData(psshData);\n\n                // Still no url, check the keymessage\n                if (!url) {\n                    url = keyMessage.laURL;\n                }\n            }\n        }\n        // Possibly update or override the URL based on the message\n        url = licenseServerData.getServerURLFromMessage(url, message, messageType);\n\n        return url;\n    }\n\n    /**\n     * Add new headers to the existing ones\n     * @param {array} reqHeaders\n     * @param {object} headers\n     * @private\n     */\n    function _updateHeaders(reqHeaders, headers) {\n        if (headers) {\n            for (const key in headers) {\n                reqHeaders[key] = headers[key];\n            }\n        }\n    }\n\n    /**\n     * Reports an error that might have occured during the license request\n     * @param {object} xhr\n     * @param {object} eventData\n     * @param {string} keySystemString\n     * @param {string} messageType\n     * @param {object} licenseServerData\n     * @private\n     */\n    function _reportError(xhr, eventData, keySystemString, messageType, licenseServerData) {\n        let errorMsg = 'NONE';\n        let data = null;\n\n        if (xhr.response) {\n            errorMsg = licenseServerData.getErrorResponse(xhr.response, keySystemString, messageType);\n            data = {\n                serverResponse: xhr.response || null,\n                responseCode: xhr.status || null,\n                responseText: xhr.statusText || null\n            }\n        }\n\n        _sendLicenseRequestCompleteEvent(eventData, new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,\n            ProtectionErrors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + keySystemString + ' update, XHR complete. status is \"' +\n            xhr.statusText + '\" (' + xhr.status + '), readyState is ' + xhr.readyState + '.  Response is ' + errorMsg,\n            data\n        ));\n    }\n\n    /**\n     * Applies custom filters defined by the application\n     * @param {array} filters\n     * @param {object} param\n     * @return {Promise<void>|*}\n     * @private\n     */\n    function _applyFilters(filters, param) {\n        if (!filters) {\n            return Promise.resolve();\n        }\n        return filters.reduce((prev, next) => {\n            return prev.then(() => {\n                return next(param);\n            });\n        }, Promise.resolve());\n    }\n\n    /**\n     * Event handler for \"needkey\" and \"encrypted\" events\n     * @param {object} event\n     * @param {number} retry\n     * @private\n     */\n    function _onNeedKey(event, retry) {\n        if (settings.get().streaming.protection.ignoreEmeEncryptedEvent) {\n            return\n        }\n\n        logger.debug('DRM: onNeedKey');\n\n        // Ignore non-cenc initData\n        if (event.key.initDataType !== ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC) {\n            logger.warn('DRM:  Only \\'cenc\\' initData is supported!  Ignoring initData of type: ' + event.key.initDataType);\n            return;\n        }\n\n        if (mediaInfoArr.length === 0) {\n            logger.warn('DRM: onNeedKey called before initializeForMedia, wait until initialized');\n            retry = typeof retry === 'undefined' ? 1 : retry + 1;\n            if (retry < NEEDKEY_BEFORE_INITIALIZE_RETRIES) {\n                needkeyRetries.push(setTimeout(() => {\n                    _onNeedKey(event, retry);\n                }, NEEDKEY_BEFORE_INITIALIZE_TIMEOUT));\n                return;\n            }\n        }\n\n        // Some browsers return initData as Uint8Array (IE), some as ArrayBuffer (Chrome).\n        // Convert to ArrayBuffer\n        let abInitData = event.key.initData;\n        if (ArrayBuffer.isView(abInitData)) {\n            abInitData = abInitData.buffer;\n        }\n\n        // If key system has already been selected and initData already seen, then do nothing\n        if (selectedKeySystem) {\n            const initDataForKS = CommonEncryption.getPSSHForKeySystem(selectedKeySystem, abInitData);\n            if (initDataForKS) {\n                // Check for duplicate initData\n                if (_isInitDataDuplicate(initDataForKS)) {\n                    return;\n                }\n            }\n        }\n\n        logger.debug('DRM: initData:', String.fromCharCode.apply(null, new Uint8Array(abInitData)));\n\n        const supportedKeySystemsMetadata = protectionKeyController.getSupportedKeySystemMetadataFromSegmentPssh(abInitData, applicationProvidedProtectionData, sessionType);\n        if (supportedKeySystemsMetadata.length === 0) {\n            logger.debug('DRM: Received needkey event with initData, but we don\\'t support any of the key systems!');\n            return;\n        }\n\n        _handleKeySystemFromPssh(supportedKeySystemsMetadata);\n    }\n\n    /**\n     * Returns all available key systems\n     * @return {array}\n     */\n    function getKeySystems() {\n        return protectionKeyController ? protectionKeyController.getKeySystems() : [];\n    }\n\n    /**\n     * Sets all available key systems\n     * @param {array} keySystems\n     */\n    function setKeySystems(keySystems) {\n        if (protectionKeyController) {\n            protectionKeyController.setKeySystems(keySystems);\n        }\n    }\n\n    function updateKeyStatusesMap(e) {\n        try {\n            if (!e || !e.sessionToken || !e.parsedKeyStatuses) {\n                return\n            }\n\n            e.sessionToken.hasTriggeredKeyStatusMapUpdate = true;\n            const parsedKeyStatuses = e.parsedKeyStatuses;\n            const ua = Utils.parseUserAgent();\n            const isEdgeBrowser = ua && ua.browser && ua.browser.name && ua.browser.name.toLowerCase() === 'edge';\n            parsedKeyStatuses.forEach((keyStatus) => {\n                if (isEdgeBrowser\n                    && selectedKeySystem.uuid === ProtectionConstants.PLAYREADY_UUID\n                    && keyStatus.keyId && keyStatus.keyId.byteLength === 16) {\n                    _handlePlayreadyKeyId(keyStatus.keyId);\n                }\n\n                const keyIdInHex = Utils.bufferSourceToHex(keyStatus.keyId).slice(0, 32);\n                if (keyIdInHex && keyIdInHex !== '') {\n                    keyStatusMap.set(keyIdInHex, keyStatus.status);\n                }\n            })\n            eventBus.trigger(events.KEY_STATUSES_MAP_UPDATED, { keyStatusMap });\n        } catch (e) {\n            logger.error(e);\n        }\n    }\n\n    function _handlePlayreadyKeyId(keyId) {\n        const dataView = Utils.bufferSourceToDataView(keyId);\n        const part0 = dataView.getUint32(0, /* LE= */ true);\n        const part1 = dataView.getUint16(4, /* LE= */ true);\n        const part2 = dataView.getUint16(6, /* LE= */ true);\n        // Write it back in big-endian:\n        dataView.setUint32(0, part0, /* BE= */ false);\n        dataView.setUint16(4, part1, /* BE= */ false);\n        dataView.setUint16(6, part2, /* BE= */ false);\n    }\n\n    function areKeyIdsUsable(normalizedKeyIds) {\n        try {\n            if (!_shouldCheckKeyStatusMap(normalizedKeyIds, keyStatusMap)) {\n                return true;\n            }\n\n            return [...normalizedKeyIds].some((normalizedKeyId) => {\n                const keyStatus = keyStatusMap.get(normalizedKeyId);\n                return keyStatus && keyStatus !== ProtectionConstants.MEDIA_KEY_STATUSES.INTERNAL_ERROR && keyStatus !== ProtectionConstants.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED;\n            });\n        } catch (error) {\n            logger.error(error);\n            return true\n        }\n    }\n\n    function areKeyIdsExpired(normalizedKeyIds) {\n        try {\n            if (!_shouldCheckKeyStatusMap(normalizedKeyIds, keyStatusMap)) {\n                return false;\n            }\n\n            return [...normalizedKeyIds].every((normalizedKeyId) => {\n                const keyStatus = keyStatusMap.get(normalizedKeyId);\n                return keyStatus === ProtectionConstants.MEDIA_KEY_STATUSES.EXPIRED;\n            })\n        } catch (error) {\n            logger.error(error);\n            return false\n        }\n    }\n\n    function _shouldCheckKeyStatusMap(normalizedKeyIds, keyStatusMap) {\n        if (normalizedKeyIds.size <= 0) {\n            return false;\n        }\n\n        const allHaveStatus = keyStatusMap.size > 0 && [...normalizedKeyIds].every((normalizedKeyId) => {\n            const keyStatus = keyStatusMap.get(normalizedKeyId);\n            return typeof keyStatus !== 'undefined' && keyStatus !== '';\n        });\n\n        if (allHaveStatus) {\n            return true\n        }\n\n        const sessionTokens = protectionModel.getSessionTokens();\n\n        if (sessionTokens && sessionTokens.length > 0) {\n            const targetSessionTokens = sessionTokens.filter((sessionToken) => {\n                return [...normalizedKeyIds].includes(sessionToken.normalizedKeyId);\n            })\n            const hasNotTriggeredKeyStatusMapUpdate = targetSessionTokens.some((sessionToken) => {\n                return !sessionToken.hasTriggeredKeyStatusMapUpdate;\n            })\n            if (hasNotTriggeredKeyStatusMapUpdate || targetSessionTokens.length === 0) {\n                return false;\n            }\n        }\n        return !settings.get().streaming.protection.ignoreKeyStatuses && normalizedKeyIds && normalizedKeyIds.size > 0 && keyStatusMap && keyStatusMap.size > 0\n    }\n\n    instance = {\n        areKeyIdsExpired,\n        areKeyIdsUsable,\n        clearMediaInfoArray,\n        closeKeySession,\n        createKeySession,\n        getKeySystems,\n        getSupportedKeySystemMetadataFromContentProtection,\n        handleKeySystemFromManifest,\n        initializeForMedia,\n        loadKeySession,\n        removeKeySession,\n        reset,\n        setKeySystems,\n        setMediaElement,\n        setProtectionData,\n        setRobustnessLevel,\n        setServerCertificate,\n        setSessionType,\n        stop,\n        updateKeyStatusesMap\n    };\n\n    setup();\n    return instance;\n}\n\nProtectionController.__dashjs_factory_name = 'ProtectionController';\nexport default FactoryMaker.getClassFactory(ProtectionController);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc Represents a 128-bit keyID and 128-bit encryption key\n * @ignore\n */\nclass KeyPair {\n    /**\n     * @param {string} keyID 128-bit key ID, base64 encoded, with no padding\n     * @param {string} key 128-bit encryption key, base64 encoded, with no padding\n     * @class\n     * @ignore\n     */\n    constructor(keyID, key) {\n        this.keyID = keyID;\n        this.key = key;\n    }\n}\n\nexport default KeyPair;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * @classdesc A collection of ClearKey encryption keys with an (optional) associated\n *  type\n * @ignore\n */\nclass ClearKeyKeySet {\n    /**\n     * @param {Array.<KeyPair>} keyPairs\n     * @param {string} type the type of keys in this set.  One of either 'persistent'\n     * or 'temporary'.  Can also be null or undefined.\n     * @class\n     * @ignore\n     */\n    constructor(keyPairs, type) {\n        if (type && type !== 'persistent' && type !== 'temporary') {\n            throw new Error('Invalid ClearKey key set type!  Must be one of \\'persistent\\' or \\'temporary\\'');\n        }\n        this.keyPairs = keyPairs;\n        this.type = type;\n    }\n\n    /**\n     * Convert this key set to its JSON Web Key (JWK) representation\n     *\n     * @return {ArrayBuffer} JWK object UTF-8 encoded as ArrayBuffer\n     */\n    toJWK() {\n        let i;\n        let numKeys = this.keyPairs.length;\n        let jwk = { keys: [] };\n\n        for (i = 0; i < numKeys; i++) {\n            let key = {\n                kty: 'oct',\n                alg: 'A128KW',\n                kid: this.keyPairs[i].keyID,\n                k: this.keyPairs[i].key\n            };\n            jwk.keys.push(key);\n        }\n        if (this.type) {\n            jwk.type = this.type;\n        }\n        let jwkString = JSON.stringify(jwk);\n        const len = jwkString.length;\n\n        // Convert JSON string to ArrayBuffer\n        let buf = new ArrayBuffer(len);\n        let bView = new Uint8Array(buf);\n        for (i = 0; i < len; i++) {\n            bView[i] = jwkString.charCodeAt(i);\n        }\n        return buf;\n    }\n}\n\nexport default ClearKeyKeySet;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport KeyPair from '../vo/KeyPair.js';\nimport ClearKeyKeySet from '../vo/ClearKeyKeySet.js';\nimport CommonEncryption from '../CommonEncryption.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nconst uuid = ProtectionConstants.CLEARKEY_UUID;\nconst systemString = ProtectionConstants.CLEARKEY_KEYSTEM_STRING;\nconst schemeIdURI = 'urn:uuid:' + uuid;\n\nfunction KeySystemClearKey(config) {\n\n    config = config || {};\n    let instance;\n    const BASE64 = config.BASE64;\n\n    /**\n     * Returns desired clearkeys (as specified in the CDM message) from protection data\n     *\n     * @param {ProtectionData} protectionData the protection data\n     * @param {ArrayBuffer} message the ClearKey CDM message\n     * @returns {ClearKeyKeySet} the key set or null if none found\n     * @throws {Error} if a keyID specified in the CDM message was not found in the\n     * protection data\n     * @memberof KeySystemClearKey\n     */\n    function getClearKeysFromProtectionData(protectionData, message) {\n        let clearkeySet = null;\n        if (protectionData) {\n            // ClearKey is the only system that does not require a license server URL, so we\n            // handle it here when keys are specified in protection data\n            const jsonMsg = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(message)));\n            const keyPairs = [];\n            for (let i = 0; i < jsonMsg.kids.length; i++) {\n                const clearkeyID = jsonMsg.kids[i];\n                const clearkey = (protectionData.clearkeys && protectionData.clearkeys.hasOwnProperty(clearkeyID)) ? protectionData.clearkeys[clearkeyID] : null;\n                if (!clearkey) {\n                    throw new Error('DRM: ClearKey keyID (' + clearkeyID + ') is not known!');\n                }\n                // KeyIDs from CDM are not base64 padded.  Keys may or may not be padded\n                keyPairs.push(new KeyPair(clearkeyID, clearkey));\n            }\n            clearkeySet = new ClearKeyKeySet(keyPairs);\n        }\n        return clearkeySet;\n    }\n\n    function getInitData(cp, cencContentProtection) {\n        try {\n            let initData = CommonEncryption.parseInitDataFromContentProtection(cp, BASE64);\n\n            if (!initData && cencContentProtection) {\n                const cencDefaultKid = cencDefaultKidToBase64Representation(cencContentProtection.cencDefaultKid);\n                const data = { kids: [cencDefaultKid] };\n                initData = new TextEncoder().encode(JSON.stringify(data));\n            }\n\n            return initData;\n        } catch (e) {\n            return null;\n        }\n    }\n\n    function cencDefaultKidToBase64Representation(cencDefaultKid) {\n        try {\n            let kid = cencDefaultKid.replace(/-/g, '');\n            kid = btoa(kid.match(/\\w{2}/g).map((a) => {\n                return String.fromCharCode(parseInt(a, 16));\n            }).join(''));\n            return kid.replace(/=/g, '')\n                .replace(/\\//g, '_')\n                .replace(/\\+/g, '-');\n        } catch (e) {\n            return null;\n        }\n    }\n\n    function getRequestHeadersFromMessage(/*message*/) {\n        // Set content type to application/json by default\n        return {\n            'Content-Type': 'application/json'\n        };\n    }\n\n    function getLicenseRequestFromMessage(message) {\n        return JSON.stringify(JSON.parse(String.fromCharCode.apply(null, new Uint8Array(message))));\n    }\n\n    function getLicenseServerURLFromInitData(/*initData*/) {\n        return null;\n    }\n\n    function getCDMData(/*cdmData*/) {\n        return null;\n    }\n\n    instance = {\n        uuid,\n        schemeIdURI,\n        systemString,\n        getInitData,\n        getRequestHeadersFromMessage,\n        getLicenseRequestFromMessage,\n        getLicenseServerURLFromInitData,\n        getCDMData,\n        getClearKeysFromProtectionData\n    };\n\n    return instance;\n}\n\nKeySystemClearKey.__dashjs_factory_name = 'KeySystemClearKey';\nexport default FactoryMaker.getSingletonFactory(KeySystemClearKey);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport KeyPair from '../vo/KeyPair.js';\nimport ClearKeyKeySet from '../vo/ClearKeyKeySet.js';\nimport CommonEncryption from '../CommonEncryption.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nconst uuid = ProtectionConstants.W3C_CLEARKEY_UUID;\nconst systemString = ProtectionConstants.CLEARKEY_KEYSTEM_STRING;\nconst schemeIdURI = 'urn:uuid:' + uuid;\n\nfunction KeySystemW3CClearKey(config) {\n    let instance;\n    const BASE64 = config.BASE64;\n    const logger = config.debug.getLogger(instance);\n    /**\n     * Returns desired clearkeys (as specified in the CDM message) from protection data\n     *\n     * @param {ProtectionDataSet} protectionData the protection data\n     * @param {ArrayBuffer} message the ClearKey CDM message\n     * @returns {ClearKeyKeySet} the key set or null if none found\n     * @throws {Error} if a keyID specified in the CDM message was not found in the\n     * protection data\n     * @memberof KeySystemClearKey\n     */\n    function getClearKeysFromProtectionData(protectionData, message) {\n        let clearkeySet = null;\n        if (protectionData) {\n            // ClearKey is the only system that does not require a license server URL, so we\n            // handle it here when keys are specified in protection data\n            const jsonMsg = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(message)));\n            const keyPairs = [];\n            for (let i = 0; i < jsonMsg.kids.length; i++) {\n                const clearkeyID = jsonMsg.kids[i];\n                const clearkey = (protectionData.clearkeys && protectionData.clearkeys.hasOwnProperty(clearkeyID)) ? protectionData.clearkeys[clearkeyID] : null;\n                if (!clearkey) {\n                    throw new Error('DRM: ClearKey keyID (' + clearkeyID + ') is not known!');\n                }\n                // KeyIDs from CDM are not base64 padded.  Keys may or may not be padded\n                keyPairs.push(new KeyPair(clearkeyID, clearkey));\n            }\n            clearkeySet = new ClearKeyKeySet(keyPairs);\n\n            logger.warn('ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4');\n        }\n        return clearkeySet;\n    }\n\n    function getInitData(cp) {\n        return CommonEncryption.parseInitDataFromContentProtection(cp, BASE64);\n    }\n\n    function getRequestHeadersFromMessage(/*message*/) {\n        return null;\n    }\n\n    function getLicenseRequestFromMessage(message) {\n        return new Uint8Array(message);\n    }\n\n    function getLicenseServerURLFromInitData(/*initData*/) {\n        return null;\n    }\n\n    function getCDMData(/*cdmData*/) {\n        return null;\n    }\n\n    instance = {\n        uuid: uuid,\n        schemeIdURI: schemeIdURI,\n        systemString: systemString,\n        getInitData: getInitData,\n        getRequestHeadersFromMessage: getRequestHeadersFromMessage,\n        getLicenseRequestFromMessage: getLicenseRequestFromMessage,\n        getLicenseServerURLFromInitData: getLicenseServerURLFromInitData,\n        getCDMData: getCDMData,\n        getClearKeysFromProtectionData: getClearKeysFromProtectionData\n    };\n\n    return instance;\n}\n\nKeySystemW3CClearKey.__dashjs_factory_name = 'KeySystemW3CClearKey';\nexport default FactoryMaker.getSingletonFactory(KeySystemW3CClearKey);\n\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Google Widevine DRM\n *\n * @class\n * @implements MediaPlayer.dependencies.protection.KeySystem\n */\n\nimport CommonEncryption from '../CommonEncryption.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nconst uuid = ProtectionConstants.WIDEVINE_UUID;\nconst systemString = ProtectionConstants.WIDEVINE_KEYSTEM_STRING;\nconst schemeIdURI = 'urn:uuid:' + uuid;\n\nfunction KeySystemWidevine(config) {\n\n    config = config || {};\n    let instance;\n    const BASE64 = config.BASE64;\n\n    function getInitData(cp) {\n        return CommonEncryption.parseInitDataFromContentProtection(cp, BASE64);\n    }\n\n    function getRequestHeadersFromMessage( /*message*/ ) {\n        return null;\n    }\n\n    function getLicenseRequestFromMessage(message) {\n        return new Uint8Array(message);\n    }\n\n    function getLicenseServerURLFromInitData( /*initData*/ ) {\n        return null;\n    }\n\n    function getCDMData(/*cdmData*/) {\n        return null;\n    }\n\n    instance = {\n        uuid,\n        schemeIdURI,\n        systemString,\n        getInitData,\n        getRequestHeadersFromMessage,\n        getLicenseRequestFromMessage,\n        getLicenseServerURLFromInitData,\n        getCDMData\n    };\n\n    return instance;\n}\n\nKeySystemWidevine.__dashjs_factory_name = 'KeySystemWidevine';\nexport default FactoryMaker.getSingletonFactory(KeySystemWidevine);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Microsoft PlayReady DRM\n *\n * @class\n * @implements KeySystem\n */\nimport CommonEncryption from '../CommonEncryption.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nconst uuid = ProtectionConstants.PLAYREADY_UUID;\nconst systemString = ProtectionConstants.PLAYREADY_KEYSTEM_STRING;\nconst schemeIdURI = 'urn:uuid:' + uuid;\nconst PRCDMData = '<PlayReadyCDMData type=\"LicenseAcquisition\"><LicenseAcquisition version=\"1.0\" Proactive=\"false\"><CustomData encoding=\"base64encoded\">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>';\n\nfunction KeySystemPlayReady(config) {\n\n    config = config || {};\n    let instance;\n    let messageFormat = 'utf-16';\n    const BASE64 = config.BASE64;\n    const settings = config.settings;\n\n    function checkConfig() {\n        if (!BASE64 || !BASE64.hasOwnProperty('decodeArray') || !BASE64.hasOwnProperty('decodeArray')) {\n            throw new Error('Missing config parameter(s)');\n        }\n    }\n\n    function getRequestHeadersFromMessage(message) {\n        let msg,\n            xmlDoc;\n        const headers = {};\n        const parser = new DOMParser();\n\n        if (settings && settings.get().streaming.protection.detectPlayreadyMessageFormat) {\n            // If message format configured/defaulted to utf-16 AND number of bytes is odd, assume 'unwrapped' raw CDM message.\n            if (messageFormat === 'utf-16' && message && message.byteLength % 2 === 1) {\n                headers['Content-Type'] = 'text/xml; charset=utf-8';\n                return headers;\n            }\n        }\n\n        const dataview = (messageFormat === 'utf-16') ? new Uint16Array(message) : new Uint8Array(message);\n\n        msg = String.fromCharCode.apply(null, dataview);\n        xmlDoc = parser.parseFromString(msg, 'application/xml');\n\n        const headerNameList = xmlDoc.getElementsByTagName('name');\n        const headerValueList = xmlDoc.getElementsByTagName('value');\n        for (let i = 0; i < headerNameList.length; i++) {\n            headers[headerNameList[i].childNodes[0].nodeValue] = headerValueList[i].childNodes[0].nodeValue;\n        }\n        // Some versions of the PlayReady CDM return 'Content' instead of 'Content-Type'.\n        // this is NOT w3c conform and license servers may reject the request!\n        // -> rename it to proper w3c definition!\n        if (headers.hasOwnProperty('Content')) {\n            headers['Content-Type'] = headers.Content;\n            delete headers.Content;\n        }\n        // Set Content-Type header by default if not provided in the the CDM message (<PlayReadyKeyMessage/>)\n        // or if the message contains directly the challenge itself (Ex: LG SmartTVs)\n        if (!headers.hasOwnProperty('Content-Type')) {\n            headers['Content-Type'] = 'text/xml; charset=utf-8';\n        }\n        return headers;\n    }\n\n    function getLicenseRequestFromMessage(message) {\n        let licenseRequest = null;\n        const parser = new DOMParser();\n\n        if (settings && settings.get().streaming.protection.detectPlayreadyMessageFormat) {\n            // If message format configured/defaulted to utf-16 AND number of bytes is odd, assume 'unwrapped' raw CDM message.\n            if (messageFormat === 'utf-16' && message && message.byteLength % 2 === 1) {\n                return message;\n            }\n        }\n\n        const dataview = (messageFormat === 'utf-16') ? new Uint16Array(message) : new Uint8Array(message);\n\n        checkConfig();\n        const msg = String.fromCharCode.apply(null, dataview);\n        const xmlDoc = parser.parseFromString(msg, 'application/xml');\n\n        if (xmlDoc.getElementsByTagName('PlayReadyKeyMessage')[0]) {\n            const Challenge = xmlDoc.getElementsByTagName('Challenge')[0].childNodes[0].nodeValue;\n            if (Challenge) {\n                licenseRequest = BASE64.decode(Challenge);\n            }\n        } else {\n            // The message from CDM is not a wrapped message as on IE11 and Edge,\n            // thus it contains direclty the challenge itself\n            // (note that the xmlDoc at this point may be unreadable since it may have been interpreted as UTF-16)\n            return message;\n        }\n\n        return licenseRequest;\n    }\n\n    function getLicenseServerURLFromInitData(initData) {\n        if (initData) {\n            const data = new DataView(initData);\n            const numRecords = data.getUint16(4, true);\n            let offset = 6;\n            const parser = new DOMParser();\n\n            for (let i = 0; i < numRecords; i++) {\n                // Parse the PlayReady Record header\n                const recordType = data.getUint16(offset, true);\n                offset += 2;\n                const recordLength = data.getUint16(offset, true);\n                offset += 2;\n                if (recordType !== 0x0001) {\n                    offset += recordLength;\n                    continue;\n                }\n\n                const recordData = initData.slice(offset, offset + recordLength);\n                const record = String.fromCharCode.apply(null, new Uint16Array(recordData));\n                const xmlDoc = parser.parseFromString(record, 'application/xml');\n\n                // First try <LA_URL>\n                if (xmlDoc.getElementsByTagName('LA_URL')[0]) {\n                    const laurl = xmlDoc.getElementsByTagName('LA_URL')[0].childNodes[0].nodeValue;\n                    if (laurl) {\n                        return laurl;\n                    }\n                }\n\n                // Optionally, try <LUI_URL>\n                if (xmlDoc.getElementsByTagName('LUI_URL')[0]) {\n                    const luiurl = xmlDoc.getElementsByTagName('LUI_URL')[0].childNodes[0].nodeValue;\n                    if (luiurl) {\n                        return luiurl;\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n\n    function getInitData(cpData) {\n        // * desc@ getInitData\n        // *   generate PSSH data from PROHeader defined in MPD file\n        // *   PSSH format:\n        // *   size (4)\n        // *   box type(PSSH) (8)\n        // *   Protection SystemID (16)\n        // *   protection system data size (4) - length of decoded PROHeader\n        // *   decoded PROHeader data from MPD file\n        const PSSHBoxType = new Uint8Array([0x70, 0x73, 0x73, 0x68, 0x00, 0x00, 0x00, 0x00]); //'PSSH' 8 bytes\n        const playreadySystemID = new Uint8Array([0x9a, 0x04, 0xf0, 0x79, 0x98, 0x40, 0x42, 0x86, 0xab, 0x92, 0xe6, 0x5b, 0xe0, 0x88, 0x5f, 0x95]);\n\n        let byteCursor = 0;\n        let uint8arraydecodedPROHeader = null;\n\n        let PROSize,\n            PSSHSize,\n            PSSHBoxBuffer,\n            PSSHBox,\n            PSSHData;\n\n        checkConfig();\n        if (!cpData) {\n            return null;\n        }\n        // Handle common encryption PSSH\n        if ('pssh' in cpData && cpData.pssh) {\n            return CommonEncryption.parseInitDataFromContentProtection(cpData, BASE64);\n        }\n        // Handle native MS PlayReady ContentProtection elements\n        if ('pro' in cpData && cpData.pro) {\n            uint8arraydecodedPROHeader = BASE64.decodeArray(cpData.pro.__text);\n        } else if ('prheader' in cpData && cpData.prheader) {\n            uint8arraydecodedPROHeader = BASE64.decodeArray(cpData.prheader.__text);\n        } else {\n            return null;\n        }\n\n        PROSize = uint8arraydecodedPROHeader.length;\n        PSSHSize = 0x4 + PSSHBoxType.length + playreadySystemID.length + 0x4 + PROSize;\n\n        PSSHBoxBuffer = new ArrayBuffer(PSSHSize);\n\n        PSSHBox = new Uint8Array(PSSHBoxBuffer);\n        PSSHData = new DataView(PSSHBoxBuffer);\n\n        PSSHData.setUint32(byteCursor, PSSHSize);\n        byteCursor += 0x4;\n\n        PSSHBox.set(PSSHBoxType, byteCursor);\n        byteCursor += PSSHBoxType.length;\n\n        PSSHBox.set(playreadySystemID, byteCursor);\n        byteCursor += playreadySystemID.length;\n\n        PSSHData.setUint32(byteCursor, PROSize);\n        byteCursor += 0x4;\n\n        PSSHBox.set(uint8arraydecodedPROHeader, byteCursor);\n        byteCursor += PROSize;\n\n        return PSSHBox.buffer;\n    }\n\n    /**\n     * It seems that some PlayReady implementations return their XML-based CDM\n     * messages using UTF16, while others return them as UTF8.  Use this function\n     * to modify the message format to expect when parsing CDM messages.\n     *\n     * @param {string} format the expected message format.  Either \"utf-8\" or \"utf-16\".\n     * @throws {Error} Specified message format is not one of \"utf8\" or \"utf16\"\n     */\n    function setPlayReadyMessageFormat(format) {\n        if (format !== 'utf-8' && format !== 'utf-16') {\n            throw new Error('Specified message format is not one of \"utf-8\" or \"utf-16\"');\n        }\n        messageFormat = format;\n    }\n\n    /**\n     * Get Playready Custom data\n     */\n    function getCDMData(_cdmData) {\n        let customData,\n            cdmData,\n            cdmDataBytes,\n            i;\n\n        checkConfig();\n        if (!_cdmData) {\n            return null;\n        }\n\n        // Convert custom data into multibyte string\n        customData = [];\n        for (i = 0; i < _cdmData.length; ++i) {\n            customData.push(_cdmData.charCodeAt(i));\n            customData.push(0);\n        }\n        customData = String.fromCharCode.apply(null, customData);\n\n        // Encode in Base 64 the custom data string\n        customData = BASE64.encode(customData);\n\n        // Initialize CDM data with Base 64 encoded custom data\n        // (see https://msdn.microsoft.com/en-us/library/dn457361.aspx)\n        cdmData = PRCDMData.replace('%CUSTOMDATA%', customData);\n\n        // Convert CDM data into multibyte characters\n        cdmDataBytes = [];\n        for (i = 0; i < cdmData.length; ++i) {\n            cdmDataBytes.push(cdmData.charCodeAt(i));\n            cdmDataBytes.push(0);\n        }\n\n        return new Uint8Array(cdmDataBytes).buffer;\n    }\n\n    instance = {\n        uuid,\n        schemeIdURI,\n        systemString,\n        getInitData,\n        getRequestHeadersFromMessage,\n        getLicenseRequestFromMessage,\n        getLicenseServerURLFromInitData,\n        getCDMData,\n        setPlayReadyMessageFormat\n    };\n\n    return instance;\n}\n\nKeySystemPlayReady.__dashjs_factory_name = 'KeySystemPlayReady';\nexport default FactoryMaker.getSingletonFactory(KeySystemPlayReady);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * CastLabs DRMToday License Server implementation\n *\n * @implements LicenseServer\n * @class\n */\n\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nfunction DRMToday(config) {\n\n    config = config || {};\n    const BASE64 = config.BASE64;\n\n    const keySystems = {};\n    keySystems[ProtectionConstants.WIDEVINE_KEYSTEM_STRING] = {\n        responseType: 'json',\n        getLicenseMessage: function (response) {\n            return BASE64.decodeArray(response.license);\n        },\n        getErrorResponse: function (response) {\n            return response;\n        }\n    };\n    keySystems[ProtectionConstants.PLAYREADY_KEYSTEM_STRING] = {\n        responseType: 'arraybuffer',\n        getLicenseMessage: function (response) {\n            return response;\n        },\n        getErrorResponse: function (response) {\n            return String.fromCharCode.apply(null, new Uint8Array(response));\n        }\n    };\n\n    let instance;\n\n    function checkConfig() {\n        if (!BASE64 || !BASE64.hasOwnProperty('decodeArray')) {\n            throw new Error('Missing config parameter(s)');\n        }\n    }\n\n    function getServerURLFromMessage(url /*, message, messageType*/) {\n        return url;\n    }\n\n    function getHTTPMethod(/*messageType*/) {\n        return 'POST';\n    }\n\n    function getResponseType(keySystemStr/*, messageType*/) {\n        return keySystems[keySystemStr].responseType;\n    }\n\n    function getLicenseMessage(serverResponse, keySystemStr/*, messageType*/) {\n        checkConfig();\n        return keySystems[keySystemStr].getLicenseMessage(serverResponse);\n    }\n\n    function getErrorResponse(serverResponse, keySystemStr/*, messageType*/) {\n        return keySystems[keySystemStr].getErrorResponse(serverResponse);\n    }\n\n    instance = {\n        getServerURLFromMessage,\n        getHTTPMethod,\n        getResponseType,\n        getLicenseMessage,\n        getErrorResponse\n    };\n\n    return instance;\n}\n\nDRMToday.__dashjs_factory_name = 'DRMToday';\nexport default FactoryMaker.getSingletonFactory(DRMToday); \n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* global escape: true */\n\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\n/**\n * Microsoft PlayReady Test License Server\n *\n * For testing content that uses the PlayReady test server at\n *\n * @implements LicenseServer\n * @class\n * @ignore\n */\n\nfunction PlayReady() {\n\n    let instance;\n\n    const soap = 'http://schemas.xmlsoap.org/soap/envelope/';\n\n    function uintToString(arrayBuffer) {\n        const encodedString = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n        const decodedString = decodeURIComponent(escape(encodedString));\n        return decodedString;\n    }\n\n    function parseServerResponse(serverResponse) {\n        if (window.DOMParser) {\n            const stringResponse = uintToString(serverResponse);\n            const parser = new window.DOMParser();\n            const xmlDoc = parser.parseFromString(stringResponse, 'text/xml');\n            const envelope = xmlDoc ? xmlDoc.getElementsByTagNameNS(soap, 'Envelope')[0] : null;\n            const body = envelope ? envelope.getElementsByTagNameNS(soap, 'Body')[0] : null;\n            const fault = body ? body.getElementsByTagNameNS(soap, 'Fault')[0] : null;\n\n            if (fault) {\n                return null;\n            }\n        }\n        return serverResponse;\n    }\n\n    function parseErrorResponse(serverResponse) {\n        let faultstring = '';\n        let statusCode = '';\n        let message = '';\n        let idStart = -1;\n        let idEnd = -1;\n\n        if (window.DOMParser) {\n            const stringResponse = uintToString(serverResponse);\n            const parser = new window.DOMParser();\n            const xmlDoc = parser.parseFromString(stringResponse, 'text/xml');\n            const envelope = xmlDoc ? xmlDoc.getElementsByTagNameNS(soap, 'Envelope')[0] : null;\n            const body = envelope ? envelope.getElementsByTagNameNS(soap, 'Body')[0] : null;\n            const fault = body ? body.getElementsByTagNameNS(soap, 'Fault')[0] : null;\n            const detail = fault ? fault.getElementsByTagName('detail')[0] : null;\n            const exception = detail ? detail.getElementsByTagName('Exception')[0] : null;\n            let node = null;\n\n            if (fault === null) {\n                return stringResponse;\n            }\n\n            node = fault.getElementsByTagName('faultstring')[0].firstChild;\n            faultstring = node ? node.nodeValue : null;\n\n            if (exception !== null) {\n                node = exception.getElementsByTagName('StatusCode')[0];\n                statusCode = node ? node.firstChild.nodeValue : null;\n                node = exception.getElementsByTagName('Message')[0];\n                message = node ? node.firstChild.nodeValue : null;\n                idStart = message ? message.lastIndexOf('[') + 1 : -1;\n                idEnd = message ? message.indexOf(']') : -1;\n                message = message ? message.substring(idStart, idEnd) : '';\n            }\n        }\n\n        let errorString = `code: ${statusCode}, name: ${faultstring}`;\n        if (message) {\n            errorString += `, message: ${message}`;\n        }\n\n        return errorString;\n    }\n\n    function getServerURLFromMessage(url /*, message, messageType*/) {\n        return url;\n    }\n\n    function getHTTPMethod(/*messageType*/) {\n        return 'POST';\n    }\n\n    function getResponseType(/*keySystemStr, messageType*/) {\n        return 'arraybuffer';\n    }\n\n    function getLicenseMessage(serverResponse/*, keySystemStr, messageType*/) {\n        return parseServerResponse.call(this, serverResponse);\n    }\n\n    function getErrorResponse(serverResponse/*, keySystemStr, messageType*/) {\n        return parseErrorResponse.call(this, serverResponse);\n    }\n\n    instance = {\n        getServerURLFromMessage,\n        getHTTPMethod,\n        getResponseType,\n        getLicenseMessage,\n        getErrorResponse\n    };\n\n    return instance;\n}\n\nPlayReady.__dashjs_factory_name = 'PlayReady';\nexport default FactoryMaker.getSingletonFactory(PlayReady); \n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\n/**\n * @ignore\n */\nfunction Widevine() {\n\n    let instance;\n\n    function getServerURLFromMessage(url /*, message, messageType*/) {\n        return url;\n    }\n\n    function getHTTPMethod(/*messageType*/) {\n        return 'POST';\n    }\n\n    function getResponseType(/*keySystemStr, messageType*/) {\n        return 'arraybuffer';\n    }\n\n    function getLicenseMessage(serverResponse/*, keySystemStr, messageType*/) {\n        return serverResponse;\n    }\n\n    function getErrorResponse(serverResponse/*, keySystemStr, messageType*/) {\n        return String.fromCharCode.apply(null, new Uint8Array(serverResponse));\n    }\n\n    instance = {\n        getServerURLFromMessage,\n        getHTTPMethod,\n        getResponseType,\n        getLicenseMessage,\n        getErrorResponse\n    };\n\n    return instance;\n}\n\nWidevine.__dashjs_factory_name = 'Widevine';\nexport default FactoryMaker.getSingletonFactory(Widevine); \n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * CableLabs ClearKey license server implementation\n *\n * For testing purposes and evaluating potential uses for ClearKey, we have developed\n * a dirt-simple API for requesting ClearKey licenses from a remote server.\n *\n * @implements LicenseServer\n * @class\n */\nimport KeyPair from '../vo/KeyPair.js';\nimport ClearKeyKeySet from '../vo/ClearKeyKeySet.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nfunction ClearKey() {\n\n    let instance;\n\n    function getServerURLFromMessage(url /* message, messageType*/) {\n        return url;\n    }\n\n    function getHTTPMethod(/*messageType*/) {\n        return 'POST';\n    }\n\n    function getResponseType(/*keySystemStr*/) {\n        return 'json';\n    }\n\n    function getLicenseMessage(serverResponse/*, keySystemStr, messageType*/) {\n        if (!serverResponse.hasOwnProperty('keys')) {\n            return null;\n        }\n        let keyPairs = [];\n        for (let i = 0; i < serverResponse.keys.length; i++) {\n            let keypair = serverResponse.keys[i];\n            let keyid = keypair.kid.replace(/=/g, '');\n            let key = keypair.k.replace(/=/g, '');\n\n            keyPairs.push(new KeyPair(keyid, key));\n        }\n        return new ClearKeyKeySet(keyPairs);\n    }\n\n    function getErrorResponse(serverResponse/*, keySystemStr, messageType*/) {\n        return String.fromCharCode.apply(null, new Uint8Array(serverResponse));\n    }\n\n    instance = {\n        getServerURLFromMessage,\n        getHTTPMethod,\n        getResponseType,\n        getLicenseMessage,\n        getErrorResponse\n    };\n\n    return instance;\n}\n\nClearKey.__dashjs_factory_name = 'ClearKey';\nexport default FactoryMaker.getSingletonFactory(ClearKey); \n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc A model class to save metadata about a key system\n * @ignore\n */\n\nclass KeySystemMetadata {\n    constructor(config) {\n        this.ks = config.ks;\n        this.keyId = config.keyId;\n        this.initData = config.initData;\n        this.protData = config.protData;\n        this.cdmData = config.cdmData;\n        this.sessionId = config.sessionId;\n        this.sessionType = config.sessionType;\n    }\n}\n\nexport default KeySystemMetadata;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport CommonEncryption from './../CommonEncryption.js';\nimport KeySystemClearKey from './../drm/KeySystemClearKey.js';\nimport KeySystemW3CClearKey from './../drm/KeySystemW3CClearKey.js';\nimport KeySystemWidevine from './../drm/KeySystemWidevine.js';\nimport KeySystemPlayReady from './../drm/KeySystemPlayReady.js';\nimport DRMToday from './../servers/DRMToday.js';\nimport PlayReady from './../servers/PlayReady.js';\nimport Widevine from './../servers/Widevine.js';\nimport ClearKey from './../servers/ClearKey.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\nimport KeySystemMetadata from '../vo/KeySystemMetadata.js';\n\n/**\n * @module ProtectionKeyController\n * @ignore\n * @description Media protection key system functionality that can be modified/overridden by applications\n */\nfunction ProtectionKeyController() {\n\n    let context = this.context;\n\n    let instance,\n        debug,\n        logger,\n        keySystems,\n        BASE64,\n        settings,\n        clearkeyKeySystem,\n        clearkeyW3CKeySystem;\n\n    function setConfig(config) {\n        if (!config) {\n            return;\n        }\n\n        if (config.debug) {\n            debug = config.debug;\n            logger = debug.getLogger(instance);\n        }\n\n        if (config.BASE64) {\n            BASE64 = config.BASE64;\n        }\n\n        if (config.settings) {\n            settings = config.settings\n        }\n    }\n\n    function initialize() {\n        keySystems = [];\n\n        let keySystem;\n\n        // PlayReady\n        keySystem = KeySystemPlayReady(context).getInstance({BASE64: BASE64, settings: settings});\n        keySystems.push(keySystem);\n\n        // Widevine\n        keySystem = KeySystemWidevine(context).getInstance({BASE64: BASE64});\n        keySystems.push(keySystem);\n\n        // ClearKey\n        keySystem = KeySystemClearKey(context).getInstance({BASE64: BASE64});\n        keySystems.push(keySystem);\n        clearkeyKeySystem = keySystem;\n\n        // W3C ClearKey\n        keySystem = KeySystemW3CClearKey(context).getInstance({BASE64: BASE64, debug: debug});\n        keySystems.push(keySystem);\n        clearkeyW3CKeySystem = keySystem;\n    }\n\n    /**\n     * Returns a prioritized list of key systems supported\n     * by this player (not necessarily those supported by the\n     * user agent)\n     *\n     * @returns {Array.<KeySystem>} a prioritized\n     * list of key systems\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function getKeySystems() {\n        return keySystems;\n    }\n\n    /**\n     * Sets the prioritized list of key systems to be supported\n     * by this player.\n     *\n     * @param {Array.<KeySystem>} newKeySystems the new prioritized\n     * list of key systems\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function setKeySystems(newKeySystems) {\n        keySystems = newKeySystems;\n    }\n\n    /**\n     * Returns the key system associated with the given key system string\n     * name (i.e. 'org.w3.clearkey')\n     *\n     * @param {string} systemString the system string\n     * @returns {KeySystem|null} the key system\n     * or null if no supported key system is associated with the given key\n     * system string\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function getKeySystemBySystemString(systemString) {\n        for (let i = 0; i < keySystems.length; i++) {\n            if (keySystems[i].systemString === systemString) {\n                return keySystems[i];\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Determines whether the given key system is ClearKey.  This is\n     * necessary because the EME spec defines ClearKey and its method\n     * for providing keys to the key session; and this method has changed\n     * between the various API versions.  Our EME-specific ProtectionModels\n     * must know if the system is ClearKey so that it can format the keys\n     * according to the particular spec version.\n     *\n     * @param {Object} keySystem the key\n     * @returns {boolean} true if this is the ClearKey key system, false\n     * otherwise\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function isClearKey(keySystem) {\n        return (keySystem === clearkeyKeySystem || keySystem === clearkeyW3CKeySystem);\n    }\n\n    /**\n     * Check equality of initData array buffers.\n     *\n     * @param {ArrayBuffer} initData1 - first initData\n     * @param {ArrayBuffer} initData2 - second initData\n     * @returns {boolean} true if the initData arrays are equal in size and\n     * contents, false otherwise\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function initDataEquals(initData1, initData2) {\n        if (initData1.byteLength === initData2.byteLength) {\n            let data1 = new Uint8Array(initData1);\n            let data2 = new Uint8Array(initData2);\n\n            for (let j = 0; j < data1.length; j++) {\n                if (data1[j] !== data2[j]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Returns a set of supported key systems and CENC initialization data\n     * from the given array of ContentProtection elements.  Only\n     * key systems that are supported by this player will be returned.\n     * Key systems are returned in priority order (highest first).\n     *\n     * @param {Array.<Object>} contentProtectionElements - array of content protection elements parsed\n     * from the manifest\n     * @param {ProtectionData} applicationSpecifiedProtectionData user specified protection data - license server url etc\n     * supported by the content\n     * @param {string} sessionType session type\n     * @returns {Array.<Object>} array of objects indicating which supported key\n     * systems were found.  Empty array is returned if no supported key systems were found\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function getSupportedKeySystemMetadataFromContentProtection(contentProtectionElements, applicationSpecifiedProtectionData, sessionType) {\n        let contentProtectionElement, keySystem, ksIdx, cpIdx;\n        let supportedKS = [];\n\n        if (!contentProtectionElements || !contentProtectionElements.length) {\n            return supportedKS\n        }\n\n        const mp4ProtectionElement = CommonEncryption.findMp4ProtectionElement(contentProtectionElements);\n        for (ksIdx = 0; ksIdx < keySystems.length; ksIdx++) {\n            keySystem = keySystems[ksIdx];\n\n            // Get protection data that applies for current key system\n            const protData = _getProtDataForKeySystem(keySystem.systemString, applicationSpecifiedProtectionData);\n\n            for (cpIdx = 0; cpIdx < contentProtectionElements.length; cpIdx++) {\n                contentProtectionElement = contentProtectionElements[cpIdx];\n                if (contentProtectionElement.schemeIdUri.toLowerCase() === keySystem.schemeIdURI) {\n                    // Look for DRM-specific ContentProtection\n                    let initData = keySystem.getInitData(contentProtectionElement, mp4ProtectionElement);\n                    const keySystemMetadata = new KeySystemMetadata({\n                        ks: keySystems[ksIdx],\n                        keyId: contentProtectionElement.keyId,\n                        initData: initData,\n                        protData: protData,\n                        cdmData: keySystem.getCDMData(protData ? protData.cdmData : null),\n                        sessionId: _getSessionId(protData, contentProtectionElement),\n                        sessionType: _getSessionType(protData, sessionType)\n                    })\n\n                    if (protData) {\n                        supportedKS.unshift(keySystemMetadata);\n                    } else {\n                        supportedKS.push(keySystemMetadata);\n                    }\n                }\n            }\n        }\n\n        return supportedKS;\n    }\n\n    /**\n     * Returns key systems supported by this player for the given PSSH\n     * initializationData. Key systems are returned in priority order\n     * (highest priority first)\n     *\n     * @param {ArrayBuffer} initData Concatenated PSSH data for all DRMs\n     * supported by the content\n     * @param {ProtectionData} protDataSet user specified protection data - license server url etc\n     * supported by the content\n     * @param {string} default session type\n     * @returns {Array.<Object>} array of objects indicating which supported key\n     * systems were found.  Empty array is returned if no\n     * supported key systems were found\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function getSupportedKeySystemMetadataFromSegmentPssh(initData, protDataSet, sessionType) {\n        let supportedKS = [];\n        let pssh = CommonEncryption.parsePSSHList(initData);\n        let ks, keySystemString;\n\n        for (let ksIdx = 0; ksIdx < keySystems.length; ++ksIdx) {\n            ks = keySystems[ksIdx];\n            keySystemString = ks.systemString;\n\n            // Get protection data that applies for current key system\n            const protData = _getProtDataForKeySystem(keySystemString, protDataSet);\n\n            if (ks.uuid in pssh) {\n                supportedKS.push({\n                    ks: ks,\n                    initData: pssh[ks.uuid],\n                    protData: protData,\n                    cdmData: ks.getCDMData(protData ? protData.cdmData : null),\n                    sessionId: _getSessionId(protData),\n                    sessionType: _getSessionType(protData, sessionType)\n                });\n            }\n        }\n        return supportedKS;\n    }\n\n    /**\n     * Returns the license server implementation data that should be used for this request.\n     *\n     * @param {KeySystem} keySystem the key system\n     * associated with this license request\n     * @param {ProtectionData} protData protection data to use for the\n     * request\n     * @param {string} [messageType=\"license-request\"] the message type associated with this\n     * request.  Supported message types can be found\n     * {@link https://w3c.github.io/encrypted-media/#idl-def-MediaKeyMessageType|here}.\n     * @returns {LicenseServer|null} the license server\n     * implementation that should be used for this request or null if the player should not\n     * pass messages of the given type to a license server\n     * @memberof module:ProtectionKeyController\n     * @instance\n     *\n     */\n    function getLicenseServerModelInstance(keySystem, protData, messageType) {\n\n        // Our default server implementations do not do anything with \"license-release\" or\n        // \"individualization-request\" messages, so we just send a success event\n        if (messageType === ProtectionConstants.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE || messageType === ProtectionConstants.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST) {\n            return null;\n        }\n\n        let licenseServerData = null;\n        if (protData && protData.hasOwnProperty('drmtoday')) {\n            licenseServerData = DRMToday(context).getInstance({BASE64: BASE64});\n        } else if (keySystem.systemString === ProtectionConstants.WIDEVINE_KEYSTEM_STRING) {\n            licenseServerData = Widevine(context).getInstance();\n        } else if (keySystem.systemString === ProtectionConstants.PLAYREADY_KEYSTEM_STRING) {\n            licenseServerData = PlayReady(context).getInstance();\n        } else if (keySystem.systemString === ProtectionConstants.CLEARKEY_KEYSTEM_STRING) {\n            licenseServerData = ClearKey(context).getInstance();\n        }\n\n        return licenseServerData;\n    }\n\n    /**\n     * Allows application-specific retrieval of ClearKey keys.\n     *\n     * @param {KeySystem} clearkeyKeySystem They exact ClearKey System to be used\n     * @param {ProtectionData} protData protection data to use for the\n     * request\n     * @param {ArrayBuffer} message the key message from the CDM\n     * @return {ClearKeyKeySet|null} the clear keys associated with\n     * the request or null if no keys can be returned by this function\n     * @memberof module:ProtectionKeyController\n     * @instance\n     */\n    function processClearKeyLicenseRequest(clearkeyKeySystem, protData, message) {\n        try {\n            return clearkeyKeySystem.getClearKeysFromProtectionData(protData, message);\n        } catch (error) {\n            logger.error('Failed to retrieve clearkeys from ProtectionData');\n            return null;\n        }\n    }\n\n    function setProtectionData(protectionDataSet) {\n        var getProtectionData = function (keySystemString) {\n            var protData = null;\n            if (protectionDataSet) {\n                protData = (keySystemString in protectionDataSet) ? protectionDataSet[keySystemString] : null;\n            }\n            return protData;\n        };\n\n        for (var i = 0; i < keySystems.length; i++) {\n            var keySystem = keySystems[i];\n            if (keySystem.hasOwnProperty('init')) {\n                keySystem.init(getProtectionData(keySystem.systemString));\n            }\n        }\n    }\n\n    function _getProtDataForKeySystem(systemString, protDataSet) {\n        if (!protDataSet) {\n            return null;\n        }\n        return (systemString in protDataSet) ? protDataSet[systemString] : null;\n    }\n\n    function _getSessionId(protData, cp) {\n        // Get sessionId from protectionData or from manifest (ContentProtection)\n        if (protData && protData.sessionId) {\n            return protData.sessionId;\n        } else if (cp && cp.sessionId) {\n            return cp.sessionId;\n        }\n        return null;\n    }\n\n    function _getSessionType(protData, sessionType) {\n        return (protData && protData.sessionType) ? protData.sessionType : sessionType;\n    }\n\n    instance = {\n        getKeySystemBySystemString,\n        getKeySystems,\n        getLicenseServerModelInstance,\n        getSupportedKeySystemMetadataFromContentProtection,\n        getSupportedKeySystemMetadataFromSegmentPssh,\n        initDataEquals,\n        initialize,\n        isClearKey,\n        processClearKeyLicenseRequest,\n        setConfig,\n        setKeySystems,\n        setProtectionData,\n    };\n\n    return instance;\n}\n\nProtectionKeyController.__dashjs_factory_name = 'ProtectionKeyController';\nexport default FactoryMaker.getSingletonFactory(ProtectionKeyController);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc NeedKey\n * @ignore\n */\nclass NeedKey {\n    /**\n     * @param {ArrayBuffer} initData the initialization data\n     * @param {string} initDataType initialization data type\n     * @class\n     */\n    constructor(initData, initDataType) {\n        this.initData = initData;\n        this.initDataType = initDataType;\n    }\n}\n\nexport default NeedKey;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\n\n/**\n * @classdesc EME-independent KeyMessage\n * @ignore\n */\nclass KeyMessage {\n    /**\n     * @param {SessionToken} sessionToken the session\n     * to which the key message is associated\n     * @param {ArrayBuffer} message the key message\n     * @param {string} defaultURL license acquisition URL provided by the CDM\n     * @param {string} messageType Supported message types can be found\n     * {@link https://w3c.github.io/encrypted-media/#idl-def-MediaKeyMessageType|here}.\n     * @class\n     */\n    constructor(sessionToken, message, defaultURL, messageType) {\n        this.sessionToken = sessionToken;\n        this.message = message;\n        this.defaultURL = defaultURL;\n        this.messageType = messageType ? messageType : ProtectionConstants.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST;\n    }\n}\n\nexport default KeyMessage;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n/**\n * @classdesc Creates a new key system access token.  Represents a valid key system for\n * given piece of content and key system requirements.  Used to initialize license\n * acquisition operations.\n * @ignore\n */\nclass KeySystemAccess {\n    /**\n     * @param {MediaPlayer.dependencies.protection.KeySystem} keySystem the key system\n     * @param {KeySystemConfiguration} ksConfiguration the\n     * subset of configurations passed to the key system access request that are supported\n     * by this user agent\n     * @class\n     * @ignore\n     */\n    constructor(keySystem, ksConfiguration) {\n        this.keySystem = keySystem;\n        this.ksConfiguration = ksConfiguration;\n        this.nativeMediaKeySystemAccessObject = null;\n        this.selectedSystemString = null;\n    }\n}\n\nexport default KeySystemAccess;\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Most recent EME implementation\n *\n * Implemented by Google Chrome v36+ (Windows, OSX, Linux)\n *\n * @implements ProtectionModel\n * @class\n */\nimport ProtectionKeyController from '../controllers/ProtectionKeyController.js';\nimport NeedKey from '../vo/NeedKey.js';\nimport ProtectionErrors from '../errors/ProtectionErrors.js';\nimport DashJSError from '../../vo/DashJSError.js';\nimport KeyMessage from '../vo/KeyMessage.js';\nimport KeySystemAccess from '../vo/KeySystemAccess.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\n\nconst SYSTEM_STRING_PRIORITY = {};\nSYSTEM_STRING_PRIORITY[ProtectionConstants.PLAYREADY_KEYSTEM_STRING] = [ProtectionConstants.PLAYREADY_KEYSTEM_STRING, ProtectionConstants.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING];\nSYSTEM_STRING_PRIORITY[ProtectionConstants.WIDEVINE_KEYSTEM_STRING] = [ProtectionConstants.WIDEVINE_KEYSTEM_STRING];\nSYSTEM_STRING_PRIORITY[ProtectionConstants.CLEARKEY_KEYSTEM_STRING] = [ProtectionConstants.CLEARKEY_KEYSTEM_STRING];\n\nfunction DefaultProtectionModel(config) {\n\n    config = config || {};\n    const context = this.context;\n    const eventBus = config.eventBus;//Need to pass in here so we can use same instance since this is optional module\n    const events = config.events;\n    const debug = config.debug;\n\n    let instance,\n        logger,\n        keySystem,\n        videoElement,\n        mediaKeys,\n        sessionTokens,\n        eventHandler,\n        protectionKeyController;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        keySystem = null;\n        videoElement = null;\n        mediaKeys = null;\n        sessionTokens = [];\n        protectionKeyController = ProtectionKeyController(context).getInstance();\n        eventHandler = createEventHandler();\n    }\n\n    function reset() {\n        const numSessions = sessionTokens.length;\n        let session;\n\n        if (numSessions !== 0) {\n            // Called when we are done closing a session.  Success or fail\n            const done = function (session) {\n                removeSession(session);\n                if (sessionTokens.length === 0) {\n                    if (videoElement) {\n                        videoElement.removeEventListener('encrypted', eventHandler);\n                        videoElement.setMediaKeys(null).then(function () {\n                            eventBus.trigger(events.TEARDOWN_COMPLETE);\n                        });\n                    } else {\n                        eventBus.trigger(events.TEARDOWN_COMPLETE);\n                    }\n                }\n            };\n            for (let i = 0; i < numSessions; i++) {\n                session = sessionTokens[i];\n                (function (s) {\n                    _closeKeySessionInternal(session)\n                    done(s);\n                })(session);\n            }\n        } else {\n            eventBus.trigger(events.TEARDOWN_COMPLETE);\n        }\n    }\n\n    function stop() {\n        // Close and remove not usable sessions\n        let session;\n        for (let i = 0; i < sessionTokens.length; i++) {\n            session = sessionTokens[i];\n            if (!session.getUsable()) {\n                _closeKeySessionInternal(session)\n                removeSession(session);\n            }\n        }\n    }\n\n    function getAllInitData() {\n        const retVal = [];\n        for (let i = 0; i < sessionTokens.length; i++) {\n            if (sessionTokens[i].initData) {\n                retVal.push(sessionTokens[i].initData);\n            }\n        }\n        return retVal;\n    }\n\n    function getSessionTokens() {\n        return sessionTokens;\n    }\n\n    function requestKeySystemAccess(keySystemConfigurationsToRequest) {\n        return new Promise((resolve, reject) => {\n            _requestKeySystemAccessInternal(keySystemConfigurationsToRequest, 0, resolve, reject);\n        })\n    }\n\n    /**\n     * Initializes access to a key system. Once we found a valid configuration we get a mediaKeySystemAccess object\n     * @param keySystemConfigurationsToRequest\n     * @param idx\n     * @param resolve\n     * @param reject\n     * @private\n     */\n    function _requestKeySystemAccessInternal(keySystemConfigurationsToRequest, idx, resolve, reject) {\n\n        // In case requestMediaKeySystemAccess is not available we can not proceed and dispatch an error\n        if (navigator.requestMediaKeySystemAccess === undefined ||\n            typeof navigator.requestMediaKeySystemAccess !== 'function') {\n            const msg = 'Insecure origins are not allowed';\n            eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { error: msg });\n            reject({ error: msg });\n            return;\n        }\n\n        // If a systemStringPriority is defined by the application we use these values. Otherwise, we use the default system string\n        // This is useful for DRM systems such as Playready for which multiple system strings are possible for instance com.microsoft.playready and com.microsoft.playready.recommendation\n        const protDataSystemStringPriority = keySystemConfigurationsToRequest[idx].protData && keySystemConfigurationsToRequest[idx].protData.systemStringPriority ? keySystemConfigurationsToRequest[idx].protData.systemStringPriority : null;\n        const configs = keySystemConfigurationsToRequest[idx].configs;\n        const currentKeySystem = keySystemConfigurationsToRequest[idx].ks;\n        let systemString = currentKeySystem.systemString;\n\n        // Use the default values in case no values are provided by the application\n        const systemStringsToApply = protDataSystemStringPriority ? protDataSystemStringPriority : SYSTEM_STRING_PRIORITY[systemString] ? SYSTEM_STRING_PRIORITY[systemString] : [systemString];\n\n        // Check all the available system strings and the available configurations for support\n        _checkAccessForKeySystem(systemStringsToApply, configs)\n            .then((data) => {\n                const configuration = data && data.nativeMediaKeySystemAccessObject && typeof data.nativeMediaKeySystemAccessObject.getConfiguration === 'function' ?\n                    data.nativeMediaKeySystemAccessObject.getConfiguration() : null;\n                const keySystemAccess = new KeySystemAccess(currentKeySystem, configuration);\n                keySystemAccess.selectedSystemString = data.selectedSystemString;\n                keySystemAccess.nativeMediaKeySystemAccessObject = data.nativeMediaKeySystemAccessObject;\n                eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { data: keySystemAccess });\n                resolve({ data: keySystemAccess });\n            })\n            .catch((e) => {\n                if (idx + 1 < keySystemConfigurationsToRequest.length) {\n                    _requestKeySystemAccessInternal(keySystemConfigurationsToRequest, idx + 1, resolve, reject);\n                } else {\n                    const errorMessage = 'Key system access denied! ';\n                    eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { error: errorMessage + e.message });\n                    reject({ error: errorMessage + e.message });\n                }\n            })\n    }\n\n    /**\n     * For a specific key system: Iterate over the possible system strings and resolve once a valid configuration was found\n     * @param {array} systemStringsToApply\n     * @param {object} configs\n     * @return {Promise}\n     * @private\n     */\n    function _checkAccessForKeySystem(systemStringsToApply, configs) {\n        return new Promise((resolve, reject) => {\n            _checkAccessForSystemStrings(systemStringsToApply, configs, 0, resolve, reject);\n        })\n    }\n\n    /**\n     * Recursively iterate over the possible system strings until a supported configuration is found or we ran out of options\n     * @param {array} systemStringsToApply\n     * @param {object} configs\n     * @param {number} idx\n     * @param {function} resolve\n     * @param {function} reject\n     * @private\n     */\n    function _checkAccessForSystemStrings(systemStringsToApply, configs, idx, resolve, reject) {\n        const systemString = systemStringsToApply[idx];\n\n        logger.debug(`Requesting key system access for system string ${systemString}`);\n\n        navigator.requestMediaKeySystemAccess(systemString, configs)\n            .then((mediaKeySystemAccess) => {\n                resolve({ nativeMediaKeySystemAccessObject: mediaKeySystemAccess, selectedSystemString: systemString });\n            })\n            .catch((e) => {\n                if (idx + 1 < systemStringsToApply.length) {\n                    _checkAccessForSystemStrings(systemStringsToApply, configs, idx + 1, resolve, reject);\n                } else {\n                    reject(e);\n                }\n            });\n    }\n\n    /**\n     * Selects a key system by creating the mediaKeys and adding them to the video element\n     * @param keySystemAccess\n     * @return {Promise<unknown>}\n     */\n    function selectKeySystem(keySystemAccess) {\n        return new Promise((resolve, reject) => {\n            keySystemAccess.nativeMediaKeySystemAccessObject.createMediaKeys()\n                .then((mkeys) => {\n                    keySystem = keySystemAccess.keySystem;\n                    mediaKeys = mkeys;\n                    if (videoElement) {\n                        return videoElement.setMediaKeys(mediaKeys)\n                    } else {\n                        return Promise.resolve();\n                    }\n                })\n                .then(() => {\n                    resolve(keySystem);\n                })\n                .catch(function () {\n                    reject({ error: 'Error selecting keys system (' + keySystemAccess.keySystem.systemString + ')! Could not create MediaKeys -- TODO' });\n                });\n        })\n    }\n\n    function setMediaElement(mediaElement) {\n        if (videoElement === mediaElement) {\n            return;\n        }\n\n        // Replacing the previous element\n        if (videoElement) {\n            videoElement.removeEventListener('encrypted', eventHandler);\n            if (videoElement.setMediaKeys) {\n                videoElement.setMediaKeys(null);\n            }\n        }\n\n        videoElement = mediaElement;\n\n        // Only if we are not detaching from the existing element\n        if (videoElement) {\n            videoElement.addEventListener('encrypted', eventHandler);\n            if (videoElement.setMediaKeys && mediaKeys) {\n                videoElement.setMediaKeys(mediaKeys);\n            }\n        }\n    }\n\n    function setServerCertificate(serverCertificate) {\n        return new Promise((resolve) => {\n            mediaKeys.setServerCertificate(serverCertificate)\n                .then(function () {\n                    logger.info('DRM: License server certificate successfully updated.');\n                    eventBus.trigger(events.SERVER_CERTIFICATE_UPDATED);\n                    resolve();\n                })\n                .catch((error) => {\n                    eventBus.trigger(events.SERVER_CERTIFICATE_UPDATED, { error: new DashJSError(ProtectionErrors.SERVER_CERTIFICATE_UPDATED_ERROR_CODE, ProtectionErrors.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE + error.name) });\n                    resolve()\n                });\n        })\n    }\n\n    /**\n     * Create a key session, a session token and initialize a request by calling generateRequest\n     * @param keySystemMetadata\n     */\n    function createKeySession(keySystemMetadata) {\n        if (!keySystem || !mediaKeys) {\n            throw new Error('Can not create sessions until you have selected a key system');\n        }\n\n        const mediaKeySession = mediaKeys.createSession(keySystemMetadata.sessionType);\n        const sessionToken = _createSessionToken(mediaKeySession, keySystemMetadata);\n\n        // The \"keyids\" type is used for Clearkey when keys are provided directly in the protection data and a request to a license server is not needed\n        const dataType = keySystem.systemString === ProtectionConstants.CLEARKEY_KEYSTEM_STRING && (keySystemMetadata.initData || (keySystemMetadata.protData && keySystemMetadata.protData.clearkeys)) ? ProtectionConstants.INITIALIZATION_DATA_TYPE_KEYIDS : ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC;\n\n        mediaKeySession.generateRequest(dataType, keySystemMetadata.initData)\n            .then(function () {\n                logger.debug('DRM: Session created.  SessionID = ' + sessionToken.getSessionId());\n                eventBus.trigger(events.KEY_SESSION_CREATED, { data: sessionToken });\n            })\n            .catch(function (error) {\n                removeSession(sessionToken);\n                eventBus.trigger(events.KEY_SESSION_CREATED, {\n                    data: null,\n                    error: new DashJSError(ProtectionErrors.KEY_SESSION_CREATED_ERROR_CODE, ProtectionErrors.KEY_SESSION_CREATED_ERROR_MESSAGE + 'Error generating key request -- ' + error.name)\n                });\n            });\n    }\n\n    function updateKeySession(sessionToken, message) {\n        const session = sessionToken.session;\n\n        // Send our request to the key session\n        if (protectionKeyController.isClearKey(keySystem)) {\n            message = message.toJWK();\n        }\n        session.update(message)\n            .then(() => {\n                eventBus.trigger(events.KEY_SESSION_UPDATED);\n            })\n            .catch(function (error) {\n                eventBus.trigger(events.KEY_ERROR, { error: new DashJSError(ProtectionErrors.MEDIA_KEYERR_CODE, 'Error sending update() message! ' + error.name, sessionToken) });\n            });\n    }\n\n    function loadKeySession(keySystemMetadata) {\n        if (!keySystem || !mediaKeys) {\n            throw new Error('Can not load sessions until you have selected a key system');\n        }\n\n        const sessionId = keySystemMetadata.sessionId;\n\n        // Check if session Id is not already loaded or loading\n        for (let i = 0; i < sessionTokens.length; i++) {\n            if (sessionId === sessionTokens[i].sessionId) {\n                logger.warn('DRM: Ignoring session ID because we have already seen it!');\n                return;\n            }\n        }\n\n        const session = mediaKeys.createSession(keySystemMetadata.sessionType);\n        const sessionToken = _createSessionToken(session, keySystemMetadata);\n        sessionToken.hasTriggeredKeyStatusMapUpdate = true;\n\n        // Load persisted session data into our newly created session object\n        session.load(sessionId).then(function (success) {\n            if (success) {\n                logger.debug('DRM: Session loaded.  SessionID = ' + sessionToken.getSessionId());\n                eventBus.trigger(events.KEY_SESSION_CREATED, { data: sessionToken });\n            } else {\n                removeSession(sessionToken);\n                eventBus.trigger(events.KEY_SESSION_CREATED, {\n                    data: null,\n                    error: new DashJSError(ProtectionErrors.KEY_SESSION_CREATED_ERROR_CODE, ProtectionErrors.KEY_SESSION_CREATED_ERROR_MESSAGE + 'Could not load session! Invalid Session ID (' + sessionId + ')')\n                });\n            }\n        }).catch(function (error) {\n            removeSession(sessionToken);\n            eventBus.trigger(events.KEY_SESSION_CREATED, {\n                data: null,\n                error: new DashJSError(ProtectionErrors.KEY_SESSION_CREATED_ERROR_CODE, ProtectionErrors.KEY_SESSION_CREATED_ERROR_MESSAGE + 'Could not load session (' + sessionId + ')! ' + error.name)\n            });\n        });\n    }\n\n    function removeKeySession(sessionToken) {\n        const session = sessionToken.session;\n\n        session.remove().then(function () {\n            logger.debug('DRM: Session removed.  SessionID = ' + sessionToken.getSessionId());\n            eventBus.trigger(events.KEY_SESSION_REMOVED, { data: sessionToken.getSessionId() });\n        }, function (error) {\n            eventBus.trigger(events.KEY_SESSION_REMOVED, {\n                data: null,\n                error: 'Error removing session (' + sessionToken.getSessionId() + '). ' + error.name\n            });\n\n        });\n    }\n\n    function closeKeySession(sessionToken) {\n        // Send our request to the key session\n        _closeKeySessionInternal(sessionToken).catch(function (error) {\n            removeSession(sessionToken);\n            eventBus.trigger(events.KEY_SESSION_CLOSED, {\n                data: null,\n                error: 'Error closing session (' + sessionToken.getSessionId() + ') ' + error.name\n            });\n        });\n    }\n\n    function _closeKeySessionInternal(sessionToken) {\n        if (!sessionToken || !sessionToken.session) {\n            return Promise.resolve;\n        }\n        const session = sessionToken.session;\n\n        // Remove event listeners\n        session.removeEventListener('keystatuseschange', sessionToken);\n        session.removeEventListener('message', sessionToken);\n\n        // Send our request to the key session\n        return session.close();\n    }\n\n    // This is our main event handler for all desired HTMLMediaElement events\n    // related to EME.  These events are translated into our API-independent\n    // versions of the same events\n    function createEventHandler() {\n        return {\n            handleEvent: function (event) {\n                switch (event.type) {\n                    case 'encrypted':\n                        if (event.initData) {\n                            let initData = ArrayBuffer.isView(event.initData) ? event.initData.buffer : event.initData;\n                            eventBus.trigger(events.NEED_KEY, { key: new NeedKey(initData, event.initDataType) });\n                        }\n                        break;\n                }\n            }\n        };\n    }\n\n    function removeSession(token) {\n        // Remove from our session list\n        for (let i = 0; i < sessionTokens.length; i++) {\n            if (sessionTokens[i] === token) {\n                sessionTokens.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    // Function to create our session token objects which manage the EME\n    // MediaKeySession and session-specific event handler\n    function _createSessionToken(session, keySystemMetadata) {\n        const token = { // Implements SessionToken\n            session: session,\n            keyId: keySystemMetadata.keyId,\n            normalizedKeyId: keySystemMetadata && keySystemMetadata.keyId && typeof keySystemMetadata.keyId === 'string' ? keySystemMetadata.keyId.replace(/-/g, '').toLowerCase() : '',\n            initData: keySystemMetadata.initData,\n            sessionId: keySystemMetadata.sessionId,\n            sessionType: keySystemMetadata.sessionType,\n            hasTriggeredKeyStatusMapUpdate: false,\n\n            // This is our main event handler for all desired MediaKeySession events\n            // These events are translated into our API-independent versions of the\n            // same events\n            handleEvent: function (event) {\n                switch (event.type) {\n                    case 'keystatuseschange':\n                        this._onKeyStatusesChange(event);\n                        break;\n\n                    case 'message':\n                        this._onKeyMessage(event);\n                        break;\n                }\n            },\n\n            _onKeyStatusesChange: function (event) {\n                eventBus.trigger(events.KEY_STATUSES_CHANGED, { data: this });\n\n                const keyStatuses = [];\n                event.target.keyStatuses.forEach(function () {\n                    keyStatuses.push(_parseKeyStatus(arguments));\n                });\n                eventBus.trigger(events.INTERNAL_KEY_STATUSES_CHANGED, {\n                    parsedKeyStatuses: keyStatuses,\n                    sessionToken: token\n                });\n            },\n\n            _onKeyMessage: function (event) {\n                let message = ArrayBuffer.isView(event.message) ? event.message.buffer : event.message;\n                eventBus.trigger(events.INTERNAL_KEY_MESSAGE, { data: new KeyMessage(this, message, undefined, event.messageType) });\n\n            },\n\n            getKeyId: function () {\n                return this.keyId;\n            },\n\n            getSessionId: function () {\n                return session.sessionId;\n            },\n\n            getSessionType: function () {\n                return this.sessionType;\n            },\n\n            getExpirationTime: function () {\n                return session.expiration;\n            },\n\n            getKeyStatuses: function () {\n                return session.keyStatuses;\n            },\n\n            getUsable: function () {\n                let usable = false;\n                session.keyStatuses.forEach(function () {\n                    let keyStatus = _parseKeyStatus(arguments);\n                    if (keyStatus.status === ProtectionConstants.MEDIA_KEY_STATUSES.USABLE) {\n                        usable = true;\n                    }\n                });\n                return usable;\n            }\n\n        };\n\n        // Add all event listeners\n        session.addEventListener('keystatuseschange', token);\n        session.addEventListener('message', token);\n\n        // Register callback for session closed Promise\n        session.closed.then(() => {\n            removeSession(token);\n            logger.debug('DRM: Session closed.  SessionID = ' + token.getSessionId());\n            eventBus.trigger(events.KEY_SESSION_CLOSED, { data: token.getSessionId() });\n        });\n\n        // Add to our session list\n        sessionTokens.push(token);\n\n        return token;\n    }\n\n    function _parseKeyStatus(args) {\n        // Edge and Chrome implement different version of keystatuses, param are not on same order\n        let status, keyId;\n        if (args && args.length > 0) {\n            if (args[0]) {\n                if (typeof args[0] === 'string') {\n                    status = args[0];\n                } else {\n                    keyId = args[0];\n                }\n            }\n\n            if (args[1]) {\n                if (typeof args[1] === 'string') {\n                    status = args[1];\n                } else {\n                    keyId = args[1];\n                }\n            }\n        }\n        return {\n            status: status,\n            keyId: keyId\n        };\n    }\n\n    instance = {\n        closeKeySession,\n        createKeySession,\n        getAllInitData,\n        getSessionTokens,\n        loadKeySession,\n        removeKeySession,\n        requestKeySystemAccess,\n        reset,\n        selectKeySystem,\n        setMediaElement,\n        setServerCertificate,\n        stop,\n        updateKeySession,\n    };\n\n    setup();\n\n    return instance;\n}\n\nDefaultProtectionModel.__dashjs_factory_name = 'DefaultProtectionModel';\nexport default FactoryMaker.getClassFactory(DefaultProtectionModel);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Implementation of the EME APIs as of the 3 Feb 2014 state of the specification.\n *\n * Implemented by Internet Explorer 11 (Windows 8.1)\n *\n * @implements ProtectionModel\n * @class\n */\n\nimport ProtectionKeyController from '../controllers/ProtectionKeyController.js';\nimport NeedKey from '../vo/NeedKey.js';\nimport DashJSError from '../../vo/DashJSError.js';\nimport ProtectionErrors from '../errors/ProtectionErrors.js';\nimport KeyMessage from '../vo/KeyMessage.js';\nimport KeySystemConfiguration from '../vo/KeySystemConfiguration.js';\nimport KeySystemAccess from '../vo/KeySystemAccess.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\n\nfunction ProtectionModel_3Feb2014(config) {\n\n    config = config || {};\n    const context = this.context;\n    const eventBus = config.eventBus;//Need to pass in here so we can use same instance since this is optional module\n    const events = config.events;\n    const debug = config.debug;\n    const api = config.api;\n\n    let instance,\n        logger,\n        videoElement,\n        keySystem,\n        mediaKeys,\n        keySystemAccess,\n        sessionTokens,\n        eventHandler,\n        protectionKeyController;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        videoElement = null;\n        keySystem = null;\n        mediaKeys = null;\n        keySystemAccess = null;\n        sessionTokens = [];\n        protectionKeyController = ProtectionKeyController(context).getInstance();\n        eventHandler = createEventHandler();\n    }\n\n    function reset() {\n        try {\n            for (let i = 0; i < sessionTokens.length; i++) {\n                closeKeySession(sessionTokens[i]);\n            }\n            if (videoElement) {\n                videoElement.removeEventListener(api.needkey, eventHandler);\n            }\n            eventBus.trigger(events.TEARDOWN_COMPLETE);\n        } catch (error) {\n            eventBus.trigger(events.TEARDOWN_COMPLETE, { error: 'Error tearing down key sessions and MediaKeys! -- ' + error.message });\n        }\n    }\n\n    function getAllInitData() {\n        const retVal = [];\n        for (let i = 0; i < sessionTokens.length; i++) {\n            retVal.push(sessionTokens[i].initData);\n        }\n        return retVal;\n    }\n\n    function getSessionTokens() {\n        return sessionTokens;\n    }\n\n    function requestKeySystemAccess(ksConfigurations) {\n        return new Promise((resolve, reject) => {\n            // Try key systems in order, first one with supported key system configuration\n            // is used\n            let found = false;\n            for (let ksIdx = 0; ksIdx < ksConfigurations.length; ksIdx++) {\n                const systemString = ksConfigurations[ksIdx].ks.systemString;\n                const configs = ksConfigurations[ksIdx].configs;\n                let supportedAudio = null;\n                let supportedVideo = null;\n\n                // Try key system configs in order, first one with supported audio/video\n                // is used\n                for (let configIdx = 0; configIdx < configs.length; configIdx++) {\n                    const audios = configs[configIdx].audioCapabilities;\n                    const videos = configs[configIdx].videoCapabilities;\n\n                    // Look for supported audio container/codecs\n                    if (audios && audios.length !== 0) {\n                        supportedAudio = []; // Indicates that we have a requested audio config\n                        for (let audioIdx = 0; audioIdx < audios.length; audioIdx++) {\n                            if (window[api.MediaKeys].isTypeSupported(systemString, audios[audioIdx].contentType)) {\n                                supportedAudio.push(audios[audioIdx]);\n                            }\n                        }\n                    }\n\n                    // Look for supported video container/codecs\n                    if (videos && videos.length !== 0) {\n                        supportedVideo = []; // Indicates that we have a requested video config\n                        for (let videoIdx = 0; videoIdx < videos.length; videoIdx++) {\n                            if (window[api.MediaKeys].isTypeSupported(systemString, videos[videoIdx].contentType)) {\n                                supportedVideo.push(videos[videoIdx]);\n                            }\n                        }\n                    }\n\n                    // No supported audio or video in this configuration OR we have\n                    // requested audio or video configuration that is not supported\n                    if ((!supportedAudio && !supportedVideo) ||\n                        (supportedAudio && supportedAudio.length === 0) ||\n                        (supportedVideo && supportedVideo.length === 0)) {\n                        continue;\n                    }\n\n                    // This configuration is supported\n                    found = true;\n                    const ksConfig = new KeySystemConfiguration(supportedAudio, supportedVideo);\n                    const ks = protectionKeyController.getKeySystemBySystemString(systemString);\n                    const keySystemAccess = new KeySystemAccess(ks, ksConfig);\n                    eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { data: keySystemAccess });\n                    resolve({ data: keySystemAccess });\n                    break;\n                }\n            }\n            if (!found) {\n                const errorMessage = 'Key system access denied! -- No valid audio/video content configurations detected!';\n                eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { error: errorMessage });\n                reject({ error: errorMessage });\n            }\n        })\n    }\n\n    function selectKeySystem(ksAccess) {\n        return new Promise((resolve, reject) => {\n            try {\n                mediaKeys = ksAccess.mediaKeys = new window[api.MediaKeys](ksAccess.keySystem.systemString);\n                keySystem = ksAccess.keySystem;\n                keySystemAccess = ksAccess;\n                if (videoElement) {\n                    setMediaKeys();\n                }\n                resolve(keySystem);\n            } catch (error) {\n                reject({ error: 'Error selecting keys system (' + keySystem.systemString + ')! Could not create MediaKeys -- TODO' });\n            }\n        })\n    }\n\n    function setMediaElement(mediaElement) {\n        if (videoElement === mediaElement) {\n            return;\n        }\n\n        // Replacing the previous element\n        if (videoElement) {\n            videoElement.removeEventListener(api.needkey, eventHandler);\n        }\n\n        videoElement = mediaElement;\n\n        // Only if we are not detaching from the existing element\n        if (videoElement) {\n            videoElement.addEventListener(api.needkey, eventHandler);\n            if (mediaKeys) {\n                setMediaKeys();\n            }\n        }\n    }\n\n    function createKeySession(ksInfo) {\n        if (!keySystem || !mediaKeys || !keySystemAccess) {\n            throw new Error('Can not create sessions until you have selected a key system');\n        }\n\n        // Use the first video capability for the contentType.\n        // TODO:  Not sure if there is a way to concatenate all capability data into a RFC6386-compatible format\n\n        // If player is trying to playback Audio only stream - don't error out.\n        let capabilities = null;\n\n        if (keySystemAccess.ksConfiguration.videoCapabilities && keySystemAccess.ksConfiguration.videoCapabilities.length > 0) {\n            capabilities = keySystemAccess.ksConfiguration.videoCapabilities[0];\n        }\n\n        if (capabilities === null && keySystemAccess.ksConfiguration.audioCapabilities && keySystemAccess.ksConfiguration.audioCapabilities.length > 0) {\n            capabilities = keySystemAccess.ksConfiguration.audioCapabilities[0];\n        }\n\n        if (capabilities === null) {\n            throw new Error('Can not create sessions for unknown content types.');\n        }\n\n        const contentType = capabilities.contentType;\n        const session = mediaKeys.createSession(contentType, new Uint8Array(ksInfo.initData), ksInfo.cdmData ? new Uint8Array(ksInfo.cdmData) : null);\n        const sessionToken = createSessionToken(session, ksInfo);\n\n        // Add all event listeners\n        session.addEventListener(api.error, sessionToken);\n        session.addEventListener(api.message, sessionToken);\n        session.addEventListener(api.ready, sessionToken);\n        session.addEventListener(api.close, sessionToken);\n\n        // Add to our session list\n        sessionTokens.push(sessionToken);\n        logger.debug('DRM: Session created.  SessionID = ' + sessionToken.getSessionId());\n        eventBus.trigger(events.KEY_SESSION_CREATED, { data: sessionToken });\n    }\n\n    function updateKeySession(sessionToken, message) {\n        const session = sessionToken.session;\n\n        if (!protectionKeyController.isClearKey(keySystem)) {\n            // Send our request to the key session\n            session.update(new Uint8Array(message));\n        } else {\n            // For clearkey, message is a ClearKeyKeySet\n            session.update(new Uint8Array(message.toJWK()));\n        }\n        eventBus.trigger(events.KEY_SESSION_UPDATED);\n    }\n\n    /**\n     * Close the given session and release all associated keys.  Following\n     * this call, the sessionToken becomes invalid\n     *\n     * @param {Object} sessionToken - the session token\n     */\n    function closeKeySession(sessionToken) {\n        const session = sessionToken.session;\n\n        // Remove event listeners\n        session.removeEventListener(api.error, sessionToken);\n        session.removeEventListener(api.message, sessionToken);\n        session.removeEventListener(api.ready, sessionToken);\n        session.removeEventListener(api.close, sessionToken);\n\n        // Remove from our session list\n        for (let i = 0; i < sessionTokens.length; i++) {\n            if (sessionTokens[i] === sessionToken) {\n                sessionTokens.splice(i, 1);\n                break;\n            }\n        }\n\n        // Send our request to the key session\n        session[api.release]();\n    }\n\n    function setServerCertificate(/*serverCertificate*/) { /* Not supported */\n        return Promise.resolve();\n    }\n\n    function loadKeySession(/*ksInfo*/) { /* Not supported */\n    }\n\n    function removeKeySession(/*sessionToken*/) { /* Not supported */\n    }\n\n\n    function createEventHandler() {\n        return {\n            handleEvent: function (event) {\n                switch (event.type) {\n\n                    case api.needkey:\n                        if (event.initData) {\n                            const initData = ArrayBuffer.isView(event.initData) ? event.initData.buffer : event.initData;\n                            eventBus.trigger(events.NEED_KEY, { key: new NeedKey(initData, ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC) });\n                        }\n                        break;\n                }\n            }\n        };\n    }\n\n\n    // IE11 does not let you set MediaKeys until it has entered a certain\n    // readyState, so we need this logic to ensure we don't set the keys\n    // too early\n    function setMediaKeys() {\n        let boundDoSetKeys = null;\n        const doSetKeys = function () {\n            videoElement.removeEventListener('loadedmetadata', boundDoSetKeys);\n            videoElement[api.setMediaKeys](mediaKeys);\n            eventBus.trigger(events.VIDEO_ELEMENT_SELECTED);\n        };\n        if (videoElement.readyState >= 1) {\n            doSetKeys();\n        } else {\n            boundDoSetKeys = doSetKeys.bind(this);\n            videoElement.addEventListener('loadedmetadata', boundDoSetKeys);\n        }\n\n    }\n\n    // Function to create our session token objects which manage the EME\n    // MediaKeySession and session-specific event handler\n    function createSessionToken(keySession, ksInfo) {\n        return {\n            // Implements SessionToken\n            session: keySession,\n            keyId: ksInfo.keyId,\n            normalizedKeyId: ksInfo && ksInfo.keyId && typeof ksInfo.keyId === 'string' ? ksInfo.keyId.replace(/-/g, '').toLowerCase() : '',\n            initData: ksInfo.initData,\n            hasTriggeredKeyStatusMapUpdate: false,\n\n            getKeyId: function () {\n                return this.keyId;\n            },\n\n            getSessionId: function () {\n                return this.session.sessionId;\n            },\n\n            getExpirationTime: function () {\n                return NaN;\n            },\n\n            getSessionType: function () {\n                return 'temporary';\n            },\n\n            getKeyStatuses: function () {\n                return {\n                    size: 0,\n                    has: () => {\n                        return false\n                    },\n                    get: () => {\n                        return undefined\n                    }\n                }\n            },\n\n            // This is our main event handler for all desired MediaKeySession events\n            // These events are translated into our API-independent versions of the\n            // same events\n            handleEvent: function (event) {\n                switch (event.type) {\n                    case api.error:\n                        let errorStr = 'KeyError'; // TODO: Make better string from event\n                        eventBus.trigger(events.KEY_ERROR, { error: new DashJSError(ProtectionErrors.MEDIA_KEYERR_CODE, errorStr, this) });\n                        break;\n                    case api.message:\n                        let message = ArrayBuffer.isView(event.message) ? event.message.buffer : event.message;\n                        eventBus.trigger(events.INTERNAL_KEY_MESSAGE, { data: new KeyMessage(this, message, event.destinationURL) });\n                        break;\n                    case api.ready:\n                        logger.debug('DRM: Key added.');\n                        eventBus.trigger(events.KEY_ADDED);\n                        break;\n\n                    case api.close:\n                        logger.debug('DRM: Session closed.  SessionID = ' + this.getSessionId());\n                        eventBus.trigger(events.KEY_SESSION_CLOSED, { data: this.getSessionId() });\n                        break;\n                }\n            }\n        };\n    }\n\n    instance = {\n        getAllInitData,\n        getSessionTokens,\n        requestKeySystemAccess,\n        selectKeySystem,\n        setMediaElement,\n        createKeySession,\n        updateKeySession,\n        closeKeySession,\n        setServerCertificate,\n        loadKeySession,\n        removeKeySession,\n        stop: reset,\n        reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nProtectionModel_3Feb2014.__dashjs_factory_name = 'ProtectionModel_3Feb2014';\nexport default FactoryMaker.getClassFactory(ProtectionModel_3Feb2014);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Initial implementation of EME\n *\n * Implemented by Google Chrome prior to v36\n *\n * @implements ProtectionModel\n * @class\n */\nimport ProtectionKeyController from '../controllers/ProtectionKeyController.js';\nimport NeedKey from '../vo/NeedKey.js';\nimport DashJSError from '../../vo/DashJSError.js';\nimport KeyMessage from '../vo/KeyMessage.js';\nimport KeySystemConfiguration from '../vo/KeySystemConfiguration.js';\nimport KeySystemAccess from '../vo/KeySystemAccess.js';\nimport ProtectionErrors from '../errors/ProtectionErrors.js';\nimport FactoryMaker from '../../../core/FactoryMaker.js';\nimport ProtectionConstants from '../../constants/ProtectionConstants.js';\n\nfunction ProtectionModel_01b(config) {\n\n    config = config || {};\n    const context = this.context;\n    const eventBus = config.eventBus;//Need to pass in here so we can use same instance since this is optional module\n    const events = config.events;\n    const debug = config.debug;\n    const api = config.api;\n    const errHandler = config.errHandler;\n\n    let instance,\n        logger,\n        videoElement,\n        keySystem,\n        protectionKeyController,\n\n        // With this version of the EME APIs, sessionIds are not assigned to\n        // sessions until the first key message is received.  We are assuming\n        // that in the case of multiple sessions, key messages will be received\n        // in the order that generateKeyRequest() is called.\n        // Holding spot for newly-created sessions until we determine whether or\n        // not the CDM supports sessionIds\n        pendingSessions,\n\n        // List of sessions that have been initialized.  Only the first position will\n        // be used in the case that the CDM does not support sessionIds\n        sessionTokens,\n\n        // Not all CDMs support the notion of sessionIds.  Without sessionIds\n        // there is no way for us to differentiate between sessions, therefore\n        // we must only allow a single session.  Once we receive the first key\n        // message we can set this flag to determine if more sessions are allowed\n        moreSessionsAllowed,\n\n        // This is our main event handler for all desired HTMLMediaElement events\n        // related to EME.  These events are translated into our API-independent\n        // versions of the same events\n        eventHandler;\n\n    function setup() {\n        logger = debug.getLogger(instance);\n        videoElement = null;\n        keySystem = null;\n        pendingSessions = [];\n        sessionTokens = [];\n        protectionKeyController = ProtectionKeyController(context).getInstance();\n        eventHandler = createEventHandler();\n    }\n\n    function reset() {\n        if (videoElement) {\n            removeEventListeners();\n        }\n        for (let i = 0; i < sessionTokens.length; i++) {\n            closeKeySession(sessionTokens[i]);\n        }\n        eventBus.trigger(events.TEARDOWN_COMPLETE);\n    }\n\n    function getAllInitData() {\n        const retVal = [];\n        for (let i = 0; i < pendingSessions.length; i++) {\n            retVal.push(pendingSessions[i].initData);\n        }\n        for (let i = 0; i < sessionTokens.length; i++) {\n            retVal.push(sessionTokens[i].initData);\n        }\n        return retVal;\n    }\n\n    function getSessionTokens() {\n        return sessionTokens.concat(pendingSessions);\n    }\n\n    function requestKeySystemAccess(ksConfigurations) {\n        return new Promise((resolve, reject) => {\n            let ve = videoElement;\n            if (!ve) { // Must have a video element to do this capability tests\n                ve = document.createElement('video');\n            }\n\n            // Try key systems in order, first one with supported key system configuration\n            // is used\n            let found = false;\n            for (let ksIdx = 0; ksIdx < ksConfigurations.length; ksIdx++) {\n                const systemString = ksConfigurations[ksIdx].ks.systemString;\n                const configs = ksConfigurations[ksIdx].configs;\n                let supportedAudio = null;\n                let supportedVideo = null;\n\n                // Try key system configs in order, first one with supported audio/video\n                // is used\n                for (let configIdx = 0; configIdx < configs.length; configIdx++) {\n                    //let audios = configs[configIdx].audioCapabilities;\n                    const videos = configs[configIdx].videoCapabilities;\n                    // Look for supported video container/codecs\n                    if (videos && videos.length !== 0) {\n                        supportedVideo = []; // Indicates that we have a requested video config\n                        for (let videoIdx = 0; videoIdx < videos.length; videoIdx++) {\n                            if (ve.canPlayType(videos[videoIdx].contentType, systemString) !== '') {\n                                supportedVideo.push(videos[videoIdx]);\n                            }\n                        }\n                    }\n\n                    // No supported audio or video in this configuration OR we have\n                    // requested audio or video configuration that is not supported\n                    if ((!supportedAudio && !supportedVideo) ||\n                        (supportedAudio && supportedAudio.length === 0) ||\n                        (supportedVideo && supportedVideo.length === 0)) {\n                        continue;\n                    }\n\n                    // This configuration is supported\n                    found = true;\n                    const ksConfig = new KeySystemConfiguration(supportedAudio, supportedVideo);\n                    const ks = protectionKeyController.getKeySystemBySystemString(systemString);\n                    const keySystemAccess = new KeySystemAccess(ks, ksConfig)\n                    eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { data: keySystemAccess });\n                    resolve({ data: keySystemAccess });\n                    break;\n                }\n            }\n            if (!found) {\n                const errorMessage = 'Key system access denied! -- No valid audio/video content configurations detected!';\n                eventBus.trigger(events.KEY_SYSTEM_ACCESS_COMPLETE, { error: errorMessage });\n                reject({ error: errorMessage });\n            }\n        })\n\n    }\n\n    function selectKeySystem(keySystemAccess) {\n        keySystem = keySystemAccess.keySystem;\n        return Promise.resolve(keySystem);\n    }\n\n    function setMediaElement(mediaElement) {\n        if (videoElement === mediaElement) {\n            return;\n        }\n\n        // Replacing the previous element\n        if (videoElement) {\n            removeEventListeners();\n\n            // Close any open sessions - avoids memory leak on LG webOS 2016/2017 TVs\n            for (var i = 0; i < sessionTokens.length; i++) {\n                closeKeySession(sessionTokens[i]);\n            }\n            sessionTokens = [];\n        }\n\n        videoElement = mediaElement;\n\n        // Only if we are not detaching from the existing element\n        if (videoElement) {\n            videoElement.addEventListener(api.keyerror, eventHandler);\n            videoElement.addEventListener(api.needkey, eventHandler);\n            videoElement.addEventListener(api.keymessage, eventHandler);\n            videoElement.addEventListener(api.keyadded, eventHandler);\n            eventBus.trigger(events.VIDEO_ELEMENT_SELECTED);\n        }\n    }\n\n    function createKeySession(ksInfo) {\n        if (!keySystem) {\n            throw new Error('Can not create sessions until you have selected a key system');\n        }\n\n        // Determine if creating a new session is allowed\n        if (moreSessionsAllowed || sessionTokens.length === 0) {\n            const newSession = { // Implements SessionToken\n                sessionId: null,\n                keyId: ksInfo.keyId,\n                normalizedKeyId: ksInfo && ksInfo.keyId && typeof ksInfo.keyId === 'string' ? ksInfo.keyId.replace(/-/g, '').toLowerCase() : '',\n                initData: ksInfo.initData,\n                hasTriggeredKeyStatusMapUpdate: false,\n\n                getKeyId: function () {\n                    return this.keyId;\n                },\n\n                getSessionId: function () {\n                    return this.sessionId;\n                },\n\n                getExpirationTime: function () {\n                    return NaN;\n                },\n\n                getSessionType: function () {\n                    return 'temporary';\n                },\n\n                getKeyStatuses: function () {\n                    return {\n                        size: 0,\n                        has: () => {\n                            return false\n                        },\n                        get: () => {\n                            return undefined\n                        }\n                    }\n                }\n            };\n            pendingSessions.push(newSession);\n\n            // Send our request to the CDM\n            videoElement[api.generateKeyRequest](keySystem.systemString, new Uint8Array(ksInfo.initData));\n\n            return newSession;\n\n        } else {\n            throw new Error('Multiple sessions not allowed!');\n        }\n\n    }\n\n    function updateKeySession(sessionToken, message) {\n        const sessionId = sessionToken.sessionId;\n        if (!protectionKeyController.isClearKey(keySystem)) {\n            // Send our request to the CDM\n            videoElement[api.addKey](keySystem.systemString,\n                new Uint8Array(message), new Uint8Array(sessionToken.initData), sessionId);\n        } else {\n            // For clearkey, message is a ClearKeyKeySet\n            for (let i = 0; i < message.keyPairs.length; i++) {\n                videoElement[api.addKey](keySystem.systemString,\n                    message.keyPairs[i].key, message.keyPairs[i].keyID, sessionId);\n            }\n        }\n        eventBus.trigger(events.KEY_SESSION_UPDATED);\n    }\n\n    function closeKeySession(sessionToken) {\n        // Send our request to the CDM\n        try {\n            videoElement[api.cancelKeyRequest](keySystem.systemString, sessionToken.sessionId);\n        } catch (error) {\n            eventBus.trigger(events.KEY_SESSION_CLOSED, {\n                data: null,\n                error: 'Error closing session (' + sessionToken.sessionId + ') ' + error.message\n            });\n        }\n    }\n\n    function setServerCertificate(/*serverCertificate*/) { /* Not supported */\n        return Promise.resolve();\n    }\n\n    function loadKeySession(/*ksInfo*/) { /* Not supported */\n    }\n\n    function removeKeySession(/*sessionToken*/) { /* Not supported */\n    }\n\n    function createEventHandler() {\n        return {\n            handleEvent: function (event) {\n                let sessionToken = null;\n                switch (event.type) {\n                    case api.needkey:\n                        let initData = ArrayBuffer.isView(event.initData) ? event.initData.buffer : event.initData;\n                        eventBus.trigger(events.NEED_KEY, { key: new NeedKey(initData, ProtectionConstants.INITIALIZATION_DATA_TYPE_CENC) });\n                        break;\n\n                    case api.keyerror:\n                        sessionToken = findSessionByID(sessionTokens, event.sessionId);\n                        if (!sessionToken) {\n                            sessionToken = findSessionByID(pendingSessions, event.sessionId);\n                        }\n\n                        if (sessionToken) {\n                            let code = ProtectionErrors.MEDIA_KEYERR_CODE;\n                            let msg = '';\n                            switch (event.errorCode.code) {\n                                case 1:\n                                    code = ProtectionErrors.MEDIA_KEYERR_UNKNOWN_CODE;\n                                    msg += 'MEDIA_KEYERR_UNKNOWN - ' + ProtectionErrors.MEDIA_KEYERR_UNKNOWN_MESSAGE;\n                                    break;\n                                case 2:\n                                    code = ProtectionErrors.MEDIA_KEYERR_CLIENT_CODE;\n                                    msg += 'MEDIA_KEYERR_CLIENT - ' + ProtectionErrors.MEDIA_KEYERR_CLIENT_MESSAGE;\n                                    break;\n                                case 3:\n                                    code = ProtectionErrors.MEDIA_KEYERR_SERVICE_CODE;\n                                    msg += 'MEDIA_KEYERR_SERVICE - ' + ProtectionErrors.MEDIA_KEYERR_SERVICE_MESSAGE;\n                                    break;\n                                case 4:\n                                    code = ProtectionErrors.MEDIA_KEYERR_OUTPUT_CODE;\n                                    msg += 'MEDIA_KEYERR_OUTPUT - ' + ProtectionErrors.MEDIA_KEYERR_OUTPUT_MESSAGE;\n                                    break;\n                                case 5:\n                                    code = ProtectionErrors.MEDIA_KEYERR_HARDWARECHANGE_CODE;\n                                    msg += 'MEDIA_KEYERR_HARDWARECHANGE - ' + ProtectionErrors.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;\n                                    break;\n                                case 6:\n                                    code = ProtectionErrors.MEDIA_KEYERR_DOMAIN_CODE;\n                                    msg += 'MEDIA_KEYERR_DOMAIN - ' + ProtectionErrors.MEDIA_KEYERR_DOMAIN_MESSAGE;\n                                    break;\n                            }\n                            msg += '  System Code = ' + event.systemCode;\n                            // TODO: Build error string based on key error\n                            eventBus.trigger(events.KEY_ERROR, { error: new DashJSError(code, msg, sessionToken) });\n                        } else {\n                            logger.error('No session token found for key error');\n                        }\n                        break;\n\n                    case api.keyadded:\n                        sessionToken = findSessionByID(sessionTokens, event.sessionId);\n                        if (!sessionToken) {\n                            sessionToken = findSessionByID(pendingSessions, event.sessionId);\n                        }\n\n                        if (sessionToken) {\n                            logger.debug('DRM: Key added.');\n                            eventBus.trigger(events.KEY_ADDED, { data: sessionToken });//TODO not sure anything is using sessionToken? why there?\n                        } else {\n                            logger.debug('No session token found for key added');\n                        }\n                        break;\n\n                    case api.keymessage:\n                        // If this CDM does not support session IDs, we will be limited\n                        // to a single session\n                        moreSessionsAllowed = (event.sessionId !== null) && (event.sessionId !== undefined);\n\n                        // SessionIDs supported\n                        if (moreSessionsAllowed) {\n                            // Attempt to find an uninitialized token with this sessionId\n                            sessionToken = findSessionByID(sessionTokens, event.sessionId);\n                            if (!sessionToken && pendingSessions.length > 0) {\n\n                                // This is the first message for our latest session, so set the\n                                // sessionId and add it to our list\n                                sessionToken = pendingSessions.shift();\n                                sessionTokens.push(sessionToken);\n                                sessionToken.sessionId = event.sessionId;\n\n                                eventBus.trigger(events.KEY_SESSION_CREATED, { data: sessionToken });\n                            }\n                        } else if (pendingSessions.length > 0) { // SessionIDs not supported\n                            sessionToken = pendingSessions.shift();\n                            sessionTokens.push(sessionToken);\n\n                            if (pendingSessions.length !== 0) {\n                                errHandler.error(new DashJSError(ProtectionErrors.MEDIA_KEY_MESSAGE_ERROR_CODE, ProtectionErrors.MEDIA_KEY_MESSAGE_ERROR_MESSAGE));\n                            }\n                        }\n\n                        if (sessionToken) {\n                            let message = ArrayBuffer.isView(event.message) ? event.message.buffer : event.message;\n\n                            // For ClearKey, the spec mandates that you pass this message to the\n                            // addKey method, so we always save it to the token since there is no\n                            // way to tell which key system is in use\n                            sessionToken.keyMessage = message;\n                            eventBus.trigger(events.INTERNAL_KEY_MESSAGE, { data: new KeyMessage(sessionToken, message, event.defaultURL) });\n\n                        } else {\n                            logger.warn('No session token found for key message');\n                        }\n                        break;\n                }\n            }\n        };\n    }\n\n\n    /**\n     * Helper function to retrieve the stored session token based on a given\n     * sessionId value\n     *\n     * @param {Array} sessionArray - the array of sessions to search\n     * @param {*} sessionId - the sessionId to search for\n     * @returns {*} the session token with the given sessionId\n     */\n    function findSessionByID(sessionArray, sessionId) {\n        if (!sessionId || !sessionArray) {\n            return null;\n        } else {\n            const len = sessionArray.length;\n            for (let i = 0; i < len; i++) {\n                if (sessionArray[i].sessionId == sessionId) {\n                    return sessionArray[i];\n                }\n            }\n            return null;\n        }\n    }\n\n    function removeEventListeners() {\n        videoElement.removeEventListener(api.keyerror, eventHandler);\n        videoElement.removeEventListener(api.needkey, eventHandler);\n        videoElement.removeEventListener(api.keymessage, eventHandler);\n        videoElement.removeEventListener(api.keyadded, eventHandler);\n    }\n\n    instance = {\n        getAllInitData,\n        getSessionTokens,\n        requestKeySystemAccess,\n        selectKeySystem,\n        setMediaElement,\n        createKeySession,\n        updateKeySession,\n        closeKeySession,\n        setServerCertificate,\n        loadKeySession,\n        removeKeySession,\n        stop: reset,\n        reset\n    };\n\n    setup();\n\n    return instance;\n}\n\nProtectionModel_01b.__dashjs_factory_name = 'ProtectionModel_01b';\nexport default FactoryMaker.getClassFactory(ProtectionModel_01b);\n","/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport ProtectionController from './controllers/ProtectionController.js';\nimport ProtectionKeyController from './controllers/ProtectionKeyController.js';\nimport ProtectionEvents from './ProtectionEvents.js';\nimport ProtectionErrors from './errors/ProtectionErrors.js';\nimport DefaultProtectionModel from './models/DefaultProtectionModel.js';\nimport ProtectionModel_3Feb2014 from './models/ProtectionModel_3Feb2014.js';\nimport ProtectionModel_01b from './models/ProtectionModel_01b.js';\nimport FactoryMaker from '../../core/FactoryMaker.js';\n\nconst APIS_ProtectionModel_01b = [\n    // Un-prefixed as per spec\n    {\n        // Video Element\n        generateKeyRequest: 'generateKeyRequest',\n        addKey: 'addKey',\n        cancelKeyRequest: 'cancelKeyRequest',\n\n        // Events\n        needkey: 'needkey',\n        keyerror: 'keyerror',\n        keyadded: 'keyadded',\n        keymessage: 'keymessage'\n    },\n    // Webkit-prefixed (early Chrome versions and Chrome with EME disabled in chrome://flags)\n    {\n        // Video Element\n        generateKeyRequest: 'webkitGenerateKeyRequest',\n        addKey: 'webkitAddKey',\n        cancelKeyRequest: 'webkitCancelKeyRequest',\n\n        // Events\n        needkey: 'webkitneedkey',\n        keyerror: 'webkitkeyerror',\n        keyadded: 'webkitkeyadded',\n        keymessage: 'webkitkeymessage'\n    }\n];\n\nconst APIS_ProtectionModel_3Feb2014 = [\n    // Un-prefixed as per spec\n    // Chrome 38-39 (and some earlier versions) with chrome://flags -- Enable Encrypted Media Extensions\n    {\n        // Video Element\n        setMediaKeys: 'setMediaKeys',\n        // MediaKeys\n        MediaKeys: 'MediaKeys',\n        // MediaKeySession\n        release: 'close',\n\n        // Events\n        needkey: 'needkey',\n        error: 'keyerror',\n        message: 'keymessage',\n        ready: 'keyadded',\n        close: 'keyclose'\n    },\n    // MS-prefixed (IE11, Windows 8.1)\n    {\n        // Video Element\n        setMediaKeys: 'msSetMediaKeys',\n        // MediaKeys\n        MediaKeys: 'MSMediaKeys',\n        // MediaKeySession\n        release: 'close',\n        // Events\n        needkey: 'msneedkey',\n        error: 'mskeyerror',\n        message: 'mskeymessage',\n        ready: 'mskeyadded',\n        close: 'mskeyclose'\n    }\n];\n\nfunction Protection() {\n    let instance;\n    const context = this.context;\n\n    /**\n     * Create a ProtectionController and associated ProtectionModel for use with\n     * a single piece of content.\n     *\n     * @param {Object} config\n     * @return {ProtectionController} protection controller\n     *\n     */\n    function createProtectionSystem(config) {\n        let controller = null;\n\n        const protectionKeyController = ProtectionKeyController(context).getInstance();\n        protectionKeyController.setConfig({ debug: config.debug, BASE64: config.BASE64, settings: config.settings });\n        protectionKeyController.initialize();\n\n        let protectionModel = _getProtectionModel(config);\n\n        if (protectionModel) {\n            controller = ProtectionController(context).create({\n                BASE64: config.BASE64,\n                cmcdModel: config.cmcdModel,\n                constants: config.constants,\n                customParametersModel: config.customParametersModel,\n                debug: config.debug,\n                eventBus: config.eventBus,\n                events: config.events,\n                protectionKeyController: protectionKeyController,\n                protectionModel: protectionModel,\n                settings: config.settings\n            });\n            config.capabilities.setEncryptedMediaSupported(true);\n        }\n        return controller;\n    }\n\n    function _getProtectionModel(config) {\n        const debug = config.debug;\n        const logger = debug.getLogger(instance);\n        const eventBus = config.eventBus;\n        const errHandler = config.errHandler;\n        const videoElement = config.videoModel ? config.videoModel.getElement() : null;\n\n        if ((!videoElement || videoElement.onencrypted !== undefined) &&\n            (!videoElement || videoElement.mediaKeys !== undefined)) {\n            logger.info('EME detected on this user agent! (DefaultProtectionModel');\n            return DefaultProtectionModel(context).create({\n                debug: debug,\n                eventBus: eventBus,\n                events: config.events\n            });\n        } else if (_getAPI(videoElement, APIS_ProtectionModel_3Feb2014)) {\n            logger.info('EME detected on this user agent! (ProtectionModel_3Feb2014)');\n            return ProtectionModel_3Feb2014(context).create({\n                debug: debug,\n                eventBus: eventBus,\n                events: config.events,\n                api: _getAPI(videoElement, APIS_ProtectionModel_3Feb2014)\n            });\n        } else if (_getAPI(videoElement, APIS_ProtectionModel_01b)) {\n            logger.info('EME detected on this user agent! (ProtectionModel_01b)');\n            return ProtectionModel_01b(context).create({\n                debug: debug,\n                eventBus: eventBus,\n                errHandler: errHandler,\n                events: config.events,\n                api: _getAPI(videoElement, APIS_ProtectionModel_01b)\n            });\n        } else {\n            logger.warn('No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!');\n            return null;\n        }\n    }\n\n    function _getAPI(videoElement, apis) {\n        for (let i = 0; i < apis.length; i++) {\n            const api = apis[i];\n            // detect if api is supported by browser\n            // check only first function in api -> should be fine\n            if (typeof videoElement[api[Object.keys(api)[0]]] !== 'function') {\n                continue;\n            }\n\n            return api;\n        }\n\n        return null;\n    }\n\n    instance = {\n        createProtectionSystem\n    };\n\n    return instance;\n}\n\nProtection.__dashjs_factory_name = 'Protection';\nconst factory = FactoryMaker.getClassFactory(Protection);\nfactory.events = ProtectionEvents;\nfactory.errors = ProtectionErrors;\nFactoryMaker.updateClassFactory(Protection.__dashjs_factory_name, factory);\nexport default factory;\n"],"names":["root","factory","exports","module","define","amd","self","assertPath","path","TypeError","JSON","stringify","normalizeStringPosix","allowAboveRoot","code","res","lastSegmentLength","lastSlash","dots","i","length","charCodeAt","lastSlashIndex","lastIndexOf","slice","require","posix","resolve","cwd","resolvedPath","resolvedAbsolute","arguments","undefined","process","normalize","isAbsolute","trailingSeparator","join","joined","arg","relative","from","to","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","out","_makeLong","dirname","hasRoot","end","matchedSlash","basename","ext","start","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","format","pathObject","sep","dir","base","name","_format","parse","ret","delimiter","win32","window","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","enumerize","arr","enums","toUpperCase","has","str1","str2","lowerize","indexOf","str","toLowerCase","trim","len","replace","substring","rgxMapper","ua","arrays","j","k","p","q","matches","match","regex","props","exec","this","call","test","strMapper","map","windowsVersionMap","regexes","browser","cpu","device","engine","EDGE","os","UAParser","extensions","getResult","_navigator","navigator","_ua","userAgent","_uach","userAgentData","_rgxmap","mergedRegexes","concat","extend","_isSelfNav","getBrowser","version","_browser","split","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","getOS","_os","platform","getUA","setUA","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","parser","get","set","result","prop","isCallable","tryToString","$TypeError","argument","isPossiblePrototype","$String","String","isPrototypeOf","it","Prototype","isObject","ArrayBuffer","DataView","globalThis","uncurryThisAccessor","classof","prototype","O","byteLength","uncurryThis","arrayBufferByteLength","ArrayBufferPrototype","error","isDetached","toIndex","notDetached","detachTransferable","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","min","Math","DataViewPrototype","isResizable","maxByteLength","getInt8","setInt8","arrayBuffer","newLength","preserveResizability","newBuffer","newByteLength","fixedLength","transfer","options","a","b","copyLength","Constructor","NATIVE_ARRAY_BUFFER","DESCRIPTORS","hasOwn","createNonEnumerableProperty","defineBuiltIn","defineBuiltInAccessor","getPrototypeOf","setPrototypeOf","wellKnownSymbol","uid","InternalStateModule","enforceInternalState","enforce","getInternalState","Int8Array","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","Object","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","getTypedArrayConstructor","proto","state","isTypedArray","klass","Function","configurable","aTypedArray","aTypedArrayConstructor","C","exportTypedArrayMethod","KEY","property","forced","ARRAY","TypedArrayConstructor","error2","exportTypedArrayStaticMethod","isView","lengthOfArrayLike","list","$length","index","toIndexedObject","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","value","includes","bind","IndexedObject","toObject","IS_FIND_LAST_INDEX","callbackfn","that","boundFunction","findLast","findLastIndex","fails","METHOD_NAME","method","aCallable","REDUCE_EMPTY","IS_RIGHT","argumentsLength","memo","left","right","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","defineProperty","writable","arraySlice","floor","sort","array","comparefn","element","middle","llength","rlength","lindex","rindex","A","toIntegerOrInfinity","$RangeError","RangeError","relativeIndex","actualIndex","toString","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","$Object","CORRECT_ARGUMENTS","tag","key","tryGet","callee","ownKeys","getOwnPropertyDescriptorModule","definePropertyModule","target","source","exceptions","keys","f","F","constructor","createPropertyDescriptor","object","bitmap","enumerable","makeBuiltIn","descriptor","getter","setter","defineGlobalProperty","simple","global","unsafe","nonConfigurable","nonWritable","P","WorkerThreads","channel","buffer","$detach","getBuiltInNodeModule","$ArrayBuffer","$MessageChannel","MessageChannel","detach","transferable","port1","postMessage","document","EXISTS","createElement","IndexSizeError","s","c","m","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","firefox","UA","ENVIRONMENT","Deno","versions","v8","webkit","userAgentStartsWith","string","Bun","$Error","Error","TEST","stack","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","clearErrorStack","ERROR_STACK_INSTALLABLE","captureStackTrace","copyConstructorProperties","isForced","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","sham","NATIVE_BIND","FunctionPrototype","apply","Reflect","fn","hasOwnProperty","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","IS_NODE","getBuiltinModule","namespace","push","replacer","rawLength","keysLength","isNullOrUndefined","V","func","check","g","propertyIsEnumerable","dummy","Wrapper","NewTarget","NewTargetPrototype","store","functionToString","inspectSource","cause","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","WeakMap","metadata","facade","STATE","getterFor","type","Array","documentAll","all","replacement","feature","detection","data","POLYFILL","NATIVE","getBuiltIn","USE_SYMBOL_AS_UID","$Symbol","toLength","obj","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE_LENGTH","TEMPLATE","arity","ceil","trunc","x","n","$default","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","anObject","toPropertyKey","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","current","propertyIsEnumerableModule","internalObjectKeys","getOwnPropertyNames","getOwnPropertySymbols","CORRECT_PROTOTYPE_GETTER","IE_PROTO","names","$propertyIsEnumerable","NASHORN_BUG","requireObjectCoercible","aPossiblePrototype","CORRECT_SETTER","__proto__","input","pref","val","valueOf","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","Target","Source","IS_PURE","SHARED","mode","copyright","license","V8","clone","V8_VERSION","symbol","Symbol","max","integer","toPrimitive","prim","BigInt","number","toPositiveInteger","BYTES","offset","isSymbol","getMethod","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","id","postfix","random","NATIVE_SYMBOL","iterator","passed","required","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","proxyAccessor","inheritIfRequired","normalizeStringArgument","installErrorCause","installErrorStack","FULL_NAME","wrapper","FORCED","IS_AGGREGATE_ERROR","STACK_TRACE_LIMIT","OPTIONS_POSITION","ERROR_NAME","OriginalError","OriginalErrorPrototype","BaseError","WrappedError","message","$transfer","transferToFixedLength","setArrayLength","doesNotExceedSafeInteger","properErrorOnNonWritableLength","item","argCount","$reduce","arrayMethodIsStrict","CHROME_VERSION","reduce","deletePropertyOrThrow","internalSort","FF","IE_OR_EDGE","WEBKIT","nativeSort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","chr","fromCharCode","v","charAt","itemsLength","items","arrayLength","y","getSortCompare","unshift","wrapErrorConstructorWithCause","WEB_ASSEMBLY","WebAssembly","exportGlobalErrorCauseWrapper","exportWebAssemblyErrorCauseWrapper","init","getReplacerFunction","$stringify","numberToString","tester","low","hi","WRONG_SYMBOLS_CONVERSION","ILL_FORMED_UNICODE","stringifyWithSymbolsFix","args","$replacer","fixIllFormed","prev","next","space","ArrayBufferViewCore","$findLastIndex","predicate","$findLast","toOffset","$set","WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS","TO_OBJECT_BUG","arrayLike","src","ACCEPT_INCORRECT_ARGUMENTS","mod","expected","arrayToReversed","arrayFromConstructorAndList","compareFn","arrayWith","isBigIntArray","toBigInt","PROPER_ORDER","actualValue","anInstance","DOMExceptionConstants","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","DOMException","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","append","$delete","forEach","params","$value","entries","entry","dindex","found","entriesLength","getAll","$has","values","count","toJSON","URL","FactoryMaker","instance","singletonContexts","singletonFactories","classFactories","getSingletonInstance","context","className","getFactoryByName","factoriesArray","updateFactory","merge","classConstructor","classInstance","__dashjs_factory_name","extensionObject","extension","override","parent","getClassName","deleteSingletonInstances","filter","childInstance","getClassFactory","create","getClassFactoryByName","getSingletonFactory","getInstance","getSingletonFactoryByName","setSingletonInstance","updateClassFactory","updateSingletonFactory","Utils","mixin","dest","copy","empty","RegExp","r","l","addAdditionalQueryParameterToUrl","url","updatedUrl","separator","encodeURIComponent","e","removeQueryParameterFromUrl","queryParameter","parsedUrl","search","size","delete","queryString","baseUrl","origin","pathname","parseHttpHeaders","headerStr","headers","headerPairs","ilen","headerPair","parseQueryParams","queryParamString","searchParams","decodeURIComponent","generateUuid","dt","Date","getTime","generateHashCode","hash","getRelativeUrl","originalUrl","targetUrl","original","protocol","relativePath","substr","startIndexOffset","getHostFromUrl","urlString","host","parseUserAgent","uaString","stringHasProtocol","bufferSourceToDataView","bufferSource","toDataView","bufferSourceToInt8","uint8ArrayToString","uint8Array","TextDecoder","decode","bufferSourceToHex","hex","Type","getArrayBuffer","bytesPerElement","BYTES_PER_ELEMENT","dataEnd","byteOffset","rawStart","Infinity","view","getCodecFamily","codecString","profile","_getCodecParts","Constants","CODEC_FAMILIES","MP3","AAC","AC3","EC3","DTSX","DTSC","AVC","HEVC","rest","errors","config","publicOnly","err","events","evt","ACCESSIBILITY","ADAPTATION_SET","ADAPTATION_SETS","ADAPTATION_SET_SWITCHING_SCHEME_ID_URI","ADD","ASSET_IDENTIFIER","AUDIO_CHANNEL_CONFIGURATION","AUDIO_SAMPLING_RATE","AVAILABILITY_END_TIME","AVAILABILITY_START_TIME","AVAILABILITY_TIME_COMPLETE","AVAILABILITY_TIME_OFFSET","BANDWITH","BASE_URL","BITSTREAM_SWITCHING","BITSTREAM_SWITCHING_MINUS","BYTE_RANGE","CAPTION","CENC_DEFAULT_KID","CLIENT_DATA_REPORTING","CLIENT_REQUIREMENT","CMCD_PARAMETERS","CODECS","CODEC_PRIVATE_DATA","CODING_DEPENDENCY","CONTENT_COMPONENT","CONTENT_PROTECTION","CONTENT_STEERING","CONTENT_STEERING_RESPONSE","TTL","RELOAD_URI","PATHWAY_PRIORITY","PATHWAY_CLONES","BASE_ID","ID","URI_REPLACEMENT","HOST","PARAMS","CONTENT_TYPE","DEFAULT_SERVICE_LOCATION","DEPENDENCY_ID","DURATION","DVB_PRIORITY","DVB_WEIGHT","DVB_URL","DVB_MIMETYPE","DVB_FONTFAMILY","DYNAMIC","END_NUMBER","ESSENTIAL_PROPERTY","EVENT","EVENT_STREAM","FORCED_SUBTITLE","FRAMERATE","FRAME_PACKING","GROUP_LABEL","HEIGHT","INBAND","INBAND_EVENT_STREAM","INDEX","INDEX_RANGE","INITIALIZATION","INITIALIZATION_MINUS","LA_URL","LA_URL_LOWER_CASE","LABEL","LANG","LOCATION","MAIN","MAXIMUM_SAP_PERIOD","MAX_PLAYOUT_RATE","MAX_SEGMENT_DURATION","MAX_SUBSEGMENT_DURATION","MEDIA","MEDIA_PRESENTATION_DURATION","MEDIA_RANGE","MEDIA_STREAM_STRUCTURE_ID","METRICS","METRICS_MINUS","MIME_TYPE","MINIMUM_UPDATE_PERIOD","MIN_BUFFER_TIME","MP4_PROTECTION_SCHEME","MPD","MPD_TYPE","MPD_PATCH_TYPE","ORDER","ORIGINAL_MPD_ID","ORIGINAL_PUBLISH_TIME","PATCH_LOCATION","PERIOD","PRESELECTION","PRESELECTION_COMPONENTS","PRESENTATION_TIME","PRESENTATION_TIME_OFFSET","PRO","PRODUCER_REFERENCE_TIME","PRODUCER_REFERENCE_TIME_TYPE","ENCODER","CAPTURED","APPLICATION","PROFILES","PSSH","PUBLISH_TIME","QUALITY_RANKING","QUERY_BEFORE_START","QUERY_PART","RANGE","RATING","REF","REF_ID","REMOVE","REPLACE","REPORTING","REPRESENTATION","REPRESENTATION_INDEX","ROBUSTNESS","ROLE","S","SAR","SCAN_TYPE","SEGMENT_ALIGNMENT","SEGMENT_BASE","SEGMENT_LIST","SEGMENT_PROFILES","SEGMENT_SEQUENCE_PROPERTIES","SEGMENT_TEMPLATE","SEGMENT_TIMELINE","SEGMENT_TYPE","SEGMENT_URL","SERVICE_DESCRIPTION","SERVICE_DESCRIPTION_LATENCY","SERVICE_DESCRIPTION_OPERATING_BANDWIDTH","SERVICE_DESCRIPTION_OPERATING_QUALITY","SERVICE_DESCRIPTION_PLAYBACK_RATE","SERVICE_DESCRIPTION_SCOPE","SERVICE_LOCATION","SERVICE_LOCATIONS","SOURCE_URL","START","START_NUMBER","START_WITH_SAP","STEERING_TYPE","SUBSET","SUBTITLE","SUB_REPRESENTATION","SUB_SEGMENT_ALIGNMENT","SUGGESTED_PRESENTATION_DELAY","SUPPLEMENTAL_PROPERTY","SUPPLEMENTAL_CODECS","TAG","TIMESCALE","TIMESHIFT_BUFFER_DEPTH","UTC_TIMING","VALUE","VIEWPOINT","WALL_CLOCK_TIME","WIDTH","STREAM","VIDEO","ENHANCEMENT","AUDIO","TEXT","MUXED","IMAGE","STPP","TTML","VTT","WVTT","LIVE_CATCHUP_MODE_DEFAULT","LIVE_CATCHUP_MODE_LOLP","MOVING_AVERAGE_SLIDING_WINDOW","MOVING_AVERAGE_EWMA","BAD_ARGUMENT_ERROR","MISSING_CONFIG_ERROR","TRACK_SWITCH_MODE_ALWAYS_REPLACE","TRACK_SWITCH_MODE_NEVER_REPLACE","TRACK_SELECTION_MODE_FIRST_TRACK","TRACK_SELECTION_MODE_HIGHEST_BITRATE","TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY","TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY","TRACK_SELECTION_MODE_WIDEST_RANGE","CMCD_QUERY_KEY","CMCD_MODE_QUERY","CMCD_MODE_HEADER","CMCD_AVAILABLE_KEYS","CMCD_V2_AVAILABLE_KEYS","CMCD_AVAILABLE_REQUESTS","INITIALIZE","TEXT_SHOWING","TEXT_HIDDEN","TEXT_DISABLED","ACCESSIBILITY_CEA608_SCHEME","CC1","CC3","UTF8","SCHEME_ID_URI","START_TIME","SERVICE_DESCRIPTION_DVB_LL_SCHEME","SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME","CTA_5004_2023_SCHEME","THUMBNAILS_SCHEME_ID_URIS","FONT_DOWNLOAD_DVB_SCHEME","COLOUR_PRIMARIES_SCHEME_ID_URI","URL_QUERY_INFO_SCHEME","EXT_URL_QUERY_INFO_SCHEME","MATRIX_COEFFICIENTS_SCHEME_ID_URI","TRANSFER_CHARACTERISTICS_SCHEME_ID_URI","SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI","HDR_METADATA_FORMAT_SCHEME_ID_URI","HDR_METADATA_FORMAT_VALUES","ST2094_10","SL_HDR2","ST2094_40","MEDIA_CAPABILITIES_API","COLORGAMUT","SRGB","P3","REC2020","TRANSFERFUNCTION","PQ","HLG","HDR_METADATATYPE","SMPTE_ST_2094_10","SLHDR2","SMPTE_ST_2094_40","XML","ARRAY_BUFFER","DVB_REPORTING_URL","DVB_PROBABILITY","OFF_MIMETYPE","WOFF_MIMETYPE","VIDEO_ELEMENT_READY_STATES","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","FILE_LOADER_TYPES","FETCH","XHR","THROUGHPUT_TYPES","LATENCY","BANDWIDTH","THROUGHPUT_CALCULATION_MODES","EWMA","ZLEMA","ARITHMETIC_MEAN","BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN","DATE_WEIGHTED_ARITHMETIC_MEAN","HARMONIC_MEAN","BYTE_SIZE_WEIGHTED_HARMONIC_MEAN","DATE_WEIGHTED_HARMONIC_MEAN","LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE","MOOF_PARSING","DOWNLOADED_DATA","AAST","RULES_TYPES","QUALITY_SWITCH_RULES","ABANDON_FRAGMENT_RULES","BOLA_RULE","THROUGHPUT_RULE","INSUFFICIENT_BUFFER_RULE","SWITCH_HISTORY_RULE","DROPPED_FRAMES_RULE","LEARN_TO_ADAPT_RULE","LOL_PLUS_RULE","ABANDON_REQUEST_RULE","ID3_SCHEME_ID_URI","COMMON_ACCESS_TOKEN_HEADER","DASH_ROLE_SCHEME_ID","CLEARKEY_KEYSTEM_STRING","WIDEVINE_KEYSTEM_STRING","PLAYREADY_KEYSTEM_STRING","PLAYREADY_RECOMMENDATION_KEYSTEM_STRING","WIDEVINE_UUID","PLAYREADY_UUID","CLEARKEY_UUID","W3C_CLEARKEY_UUID","INITIALIZATION_DATA_TYPE_CENC","INITIALIZATION_DATA_TYPE_KEYIDS","INITIALIZATION_DATA_TYPE_WEBM","ENCRYPTION_SCHEME_CENC","ENCRYPTION_SCHEME_CBCS","MEDIA_KEY_MESSAGE_TYPES","LICENSE_REQUEST","LICENSE_RENEWAL","LICENSE_RELEASE","INDIVIDUALIZATION_REQUEST","ROBUSTNESS_STRINGS","WIDEVINE","SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL","MEDIA_KEY_STATUSES","USABLE","EXPIRED","RELEASED","OUTPUT_RESTRICTED","OUTPUT_DOWNSCALED","STATUS_PENDING","INTERNAL_ERROR","ProtectionEvents","EventsBase","super","INTERNAL_KEY_MESSAGE","INTERNAL_KEY_STATUSES_CHANGED","KEY_ADDED","KEY_ERROR","KEY_MESSAGE","KEY_SESSION_CLOSED","KEY_SESSION_CREATED","KEY_SESSION_REMOVED","KEY_STATUSES_CHANGED","KEY_STATUSES_MAP_UPDATED","KEY_SYSTEM_ACCESS_COMPLETE","KEY_SYSTEM_SELECTED","LICENSE_REQUEST_COMPLETE","LICENSE_REQUEST_SENDING","NEED_KEY","PROTECTION_CREATED","PROTECTION_DESTROYED","SERVER_CERTIFICATE_UPDATED","TEARDOWN_COMPLETE","VIDEO_ELEMENT_SELECTED","KEY_SESSION_UPDATED","protectionEvents","ProtectionErrors","ErrorsBase","MEDIA_KEYERR_CODE","MEDIA_KEYERR_UNKNOWN_CODE","MEDIA_KEYERR_CLIENT_CODE","MEDIA_KEYERR_SERVICE_CODE","MEDIA_KEYERR_OUTPUT_CODE","MEDIA_KEYERR_HARDWARECHANGE_CODE","MEDIA_KEYERR_DOMAIN_CODE","MEDIA_KEY_MESSAGE_ERROR_CODE","MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE","SERVER_CERTIFICATE_UPDATED_ERROR_CODE","KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE","MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE","KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE","KEY_SESSION_CREATED_ERROR_CODE","MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE","MEDIA_KEYERR_UNKNOWN_MESSAGE","MEDIA_KEYERR_CLIENT_MESSAGE","MEDIA_KEYERR_SERVICE_MESSAGE","MEDIA_KEYERR_OUTPUT_MESSAGE","MEDIA_KEYERR_HARDWARECHANGE_MESSAGE","MEDIA_KEYERR_DOMAIN_MESSAGE","MEDIA_KEY_MESSAGE_ERROR_MESSAGE","MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE","SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE","KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE","MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE","KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE","KEY_SESSION_CREATED_ERROR_MESSAGE","MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE","protectionErrors","HTTPRequest","tcpid","actualurl","range","trequest","tresponse","responsecode","interval","trace","cmsd","_stream","_tfinish","_mediaduration","_responseHeaders","_serviceLocation","_fileLoaderType","_resourceTimingValues","GET","HEAD","XLINK_EXPANSION_TYPE","INIT_SEGMENT_TYPE","INDEX_SEGMENT_TYPE","MEDIA_SEGMENT_TYPE","BITSTREAM_SWITCHING_SEGMENT_TYPE","MSS_FRAGMENT_INFO_SEGMENT_TYPE","DVB_REPORTING_TYPE","LICENSE","CONTENT_STEERING_TYPE","OTHER_TYPE","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdO","d","definition","o","LICENSE_SERVER_MANIFEST_CONFIGURATIONS","prefixes","CommonEncryption","findMp4ProtectionElement","cpArray","retVal","cp","schemeIdUri","DashConstants","ProtectionConstants","getPSSHData","pssh","getUint8","getUint32","getPSSHForKeySystem","keySystem","initData","psshList","parsePSSHList","uuid","parseInitDataFromContentProtection","cpData","BASE64","__text","decodeArray","dv","byteCursor","nextBox","systemID","boxStart","getLicenseServerUrlFromMediaInfo","mediaInfoArr","licenseServer","mediaInfo","contentProtection","targetProtectionData","laUrl","__prefix","hexKidToBufferSource","hexKid","cleanedHexKid","h","parseInt","contentType","robustness","audioCapabilities","videoCapabilities","distinctiveIdentifier","persistentState","sessionTypes","initDataTypes","responseType","withCredentials","messageType","sessionId","ProtectionController","cmcdModel","constants","customParametersModel","debug","eventBus","protectionKeyController","settings","applicationProvidedProtectionData","keyStatusMap","keySystemSelectionInProgress","licenseRequestRetryTimeout","licenseXhrRequest","logger","pendingMediaTypesToHandle","robustnessLevel","selectedKeySystem","sessionType","protectionModel","needkeyRetries","_checkConfig","_selectKeySystemOrUpdateKeySessions","supportedKeySystemsMetadata","fromManifest","_handlePendingMediaTypes","supportedKeySystems","keySystemConfigurationsToRequest","keySystemConfiguration","_getKeySystemConfiguration","ks","configs","protData","_getKeySystemConfigurations","ksA","ksB","systemString","priority","keySystemAccess","requestKeySystemAccess","then","event","selectedSystemString","info","selectKeySystem","_onKeySystemAccessed","trigger","_getProtDataForKeySystem","serverCertificate","setServerCertificate","_onMediaKeysCreated","catch","DashJSError","_handleKeySystemSelectionError","_selectInitialKeySystem","ksIdx","keySystemMetadata","isClearKey","clearkeys","kids","TextEncoder","encode","_handleClearkeySession","loadKeySession","createKeySession","keySystemData","audioRobustness","videoRobustness","ksSessionType","media","MediaCapability","codec","KeySystemConfiguration","keyId","sessions","getSessionTokens","getKeyId","_doesSessionForKeyIdExists","isKeepProtectionMediaKeysEnabled","streaming","protection","keepProtectionMediaKeys","maxSessions","keepProtectionMediaKeysMaximumOpenSessions","warn","sessionTokens","oldestSession","closeKeySession","_enforceMediaKeySessionLimit","initDataForKS","_isInitDataDuplicate","keySystemString","currentInitData","getAllInitData","initDataEquals","sessionToken","setMediaElement","on","_onNeedKey","off","_onKeyMessage","keyMessage","licenseServerModelInstance","getLicenseServerModelInstance","eventData","getSessionId","_sendLicenseRequestCompleteEvent","processClearKeyLicenseRequest","keyPairs","updateKeySession","licenseServerData","serverURL","laURL","schemeIdURI","psshData","getLicenseServerURLFromInitData","getServerURLFromMessage","_getLicenseServerUrl","reqHeaders","_updateHeaders","httpRequestHeaders","getRequestHeadersFromMessage","onLoad","xhr","status","responseHeaders","getAllResponseHeaders","licenseResponse","LicenseResponse","responseURL","response","_applyFilters","getLicenseResponseFilters","licenseMessage","getLicenseMessage","_reportError","onAbort","statusText","readyState","onError","reqPayload","getLicenseRequestFromMessage","reqMethod","getHTTPMethod","getResponseType","timeout","isNaN","httpTimeout","licenseRequest","LicenseRequest","retryAttempts","getLicenseRequestFilters","_doLicenseRequest","_issueLicenseRequest","request","retriesCount","XMLHttpRequest","cmcdParameters","getCmcdParametersFromManifest","isCmcdEnabled","cmcd","cmcdParams","getQueryParameter","open","setRequestHeader","cmcdHeaders","getHeaderParameters","header","_retryRequest","retryInterval","retryIntervals","setTimeout","onload","ontimeout","onerror","onabort","payload","send","_abortLicenseRequest","onloadend","onprogress","abort","clearTimeout","errorMsg","getErrorResponse","serverResponse","responseCode","responseText","filters","param","Promise","retry","ignoreEmeEncryptedEvent","initDataType","abInitData","getSupportedKeySystemMetadataFromSegmentPssh","_handleKeySystemFromPssh","_shouldCheckKeyStatusMap","normalizedKeyIds","every","normalizedKeyId","keyStatus","targetSessionTokens","some","hasTriggeredKeyStatusMapUpdate","ignoreKeyStatuses","areKeyIdsExpired","areKeyIdsUsable","clearMediaInfoArray","getKeySystems","getSupportedKeySystemMetadataFromContentProtection","cps","handleKeySystemFromManifest","keySystemsMetadata","initializeForMedia","removeKeySession","reset","Map","retryTimeout","setKeySystems","keySystems","setProtectionData","setRobustnessLevel","level","setSessionType","stop","updateKeyStatusesMap","parsedKeyStatuses","isEdgeBrowser","dataView","part0","part1","getUint16","part2","setUint32","setUint16","_handlePlayreadyKeyId","keyIdInHex","getLogger","keyID","toJWK","numKeys","jwk","kty","alg","kid","jwkString","buf","bView","KeySystemClearKey","getInitData","cencContentProtection","cencDefaultKid","btoa","cencDefaultKidToBase64Representation","getCDMData","getClearKeysFromProtectionData","protectionData","clearkeySet","jsonMsg","clearkeyID","clearkey","KeyPair","ClearKeyKeySet","KeySystemW3CClearKey","KeySystemWidevine","KeySystemPlayReady","messageFormat","checkConfig","PSSHBoxType","playreadySystemID","PROSize","PSSHSize","PSSHBoxBuffer","PSSHBox","PSSHData","uint8arraydecodedPROHeader","pro","prheader","msg","xmlDoc","DOMParser","detectPlayreadyMessageFormat","dataview","parseFromString","headerNameList","getElementsByTagName","headerValueList","childNodes","nodeValue","Content","Challenge","numRecords","recordType","recordLength","recordData","record","laurl","luiurl","_cdmData","customData","cdmData","cdmDataBytes","setPlayReadyMessageFormat","DRMToday","keySystemStr","PlayReady","soap","uintToString","encodedString","escape","parseServerResponse","stringResponse","envelope","getElementsByTagNameNS","body","parseErrorResponse","faultstring","statusCode","idStart","idEnd","fault","detail","exception","node","firstChild","errorString","Widevine","ClearKey","keypair","keyid","ProtectionKeyController","clearkeyKeySystem","clearkeyW3CKeySystem","protDataSet","_getSessionId","_getSessionType","getKeySystemBySystemString","contentProtectionElements","applicationSpecifiedProtectionData","contentProtectionElement","cpIdx","supportedKS","mp4ProtectionElement","KeySystemMetadata","initData1","initData2","data1","data2","initialize","setConfig","newKeySystems","protectionDataSet","defaultURL","ksConfiguration","nativeMediaKeySystemAccessObject","SYSTEM_STRING_PRIORITY","DefaultProtectionModel","videoElement","mediaKeys","eventHandler","_requestKeySystemAccessInternal","idx","reject","requestMediaKeySystemAccess","protDataSystemStringPriority","systemStringPriority","currentKeySystem","systemStringsToApply","_checkAccessForSystemStrings","_checkAccessForKeySystem","configuration","getConfiguration","KeySystemAccess","errorMessage","mediaKeySystemAccess","_closeKeySessionInternal","session","removeEventListener","close","removeSession","token","splice","_createSessionToken","handleEvent","_onKeyStatusesChange","keyStatuses","_parseKeyStatus","KeyMessage","getSessionType","getExpirationTime","expiration","getKeyStatuses","getUsable","usable","addEventListener","closed","mediaKeySession","createSession","dataType","generateRequest","load","success","remove","numSessions","done","setMediaKeys","createMediaKeys","mkeys","mediaElement","update","NeedKey","ProtectionModel_3Feb2014","api","needkey","ready","release","boundDoSetKeys","doSetKeys","ksConfigurations","supportedAudio","supportedVideo","configIdx","audios","videos","audioIdx","MediaKeys","isTypeSupported","videoIdx","ksConfig","ksAccess","ksInfo","capabilities","keySession","NaN","errorStr","destinationURL","createSessionToken","ProtectionModel_01b","errHandler","pendingSessions","moreSessionsAllowed","removeEventListeners","cancelKeyRequest","findSessionByID","sessionArray","keyerror","keymessage","keyadded","ve","canPlayType","newSession","generateKeyRequest","addKey","errorCode","systemCode","shift","APIS_ProtectionModel_01b","APIS_ProtectionModel_3Feb2014","Protection","_getAPI","apis","createProtectionSystem","controller","videoModel","getElement","onencrypted","_getProtectionModel","setEncryptedMediaSupported"],"sourceRoot":""}