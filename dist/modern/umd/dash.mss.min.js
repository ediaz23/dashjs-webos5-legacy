!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dashjs=e():t.dashjs=e()}(self,(function(){return function(){"use strict";var t={9306:function(t,e,r){var n=r(4901),o=r(6823),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},3506:function(t,e,r){var n=r(3925),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},8551:function(t,e,r){var n=r(34),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:function(t,e,r){var n=r(4576),o=r(6706),i=r(2195),a=n.ArrayBuffer,u=n.TypeError;t.exports=a&&o(a.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new u("ArrayBuffer expected");return t.byteLength}},3238:function(t,e,r){var n=r(4576),o=r(7476),i=r(7394),a=n.ArrayBuffer,u=a&&a.prototype,s=u&&o(u.slice);t.exports=function(t){if(0!==i(t))return!1;if(!s)return!1;try{return s(t,0,0),!1}catch(t){return!0}}},5169:function(t,e,r){var n=r(3238),o=TypeError;t.exports=function(t){if(n(t))throw new o("ArrayBuffer is detached");return t}},5636:function(t,e,r){var n=r(4576),o=r(9504),i=r(6706),a=r(7696),u=r(5169),s=r(7394),f=r(4483),c=r(1548),l=n.structuredClone,p=n.ArrayBuffer,d=n.DataView,h=Math.min,y=p.prototype,g=d.prototype,m=o(y.slice),v=i(y,"resizable","get"),_=i(y,"maxByteLength","get"),E=o(g.getInt8),T=o(g.setInt8);t.exports=(c||f)&&function(t,e,r){var n,o=s(t),i=void 0===e?o:a(e),y=!v||!v(t);if(u(t),c&&(t=l(t,{transfer:[t]}),o===i&&(r||y)))return t;if(o>=i&&(!r||y))n=m(t,0,i);else{var g=r&&!y&&_?{maxByteLength:_(t)}:void 0;n=new p(i,g);for(var b=new d(t),A=new d(n),S=h(i,o),w=0;w<S;w++)T(A,w,E(b,w))}return c||f(t),n}},4644:function(t,e,r){var n,o,i,a=r(7811),u=r(3724),s=r(4576),f=r(4901),c=r(34),l=r(9297),p=r(6955),d=r(6823),h=r(6699),y=r(6840),g=r(2106),m=r(1625),v=r(2787),_=r(2967),E=r(8227),T=r(3392),b=r(1181),A=b.enforce,S=b.get,w=s.Int8Array,x=w&&w.prototype,I=s.Uint8ClampedArray,O=I&&I.prototype,D=w&&v(w),N=x&&v(x),M=Object.prototype,C=s.TypeError,P=E("toStringTag"),B=T("TYPED_ARRAY_TAG"),R="TypedArrayConstructor",F=a&&!!_&&"Opera"!==p(s.opera),L=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},j={BigInt64Array:8,BigUint64Array:8},G=function(t){var e=v(t);if(c(e)){var r=S(e);return r&&l(r,R)?r[R]:G(e)}},q=function(t){if(!c(t))return!1;var e=p(t);return l(U,e)||l(j,e)};for(n in U)(i=(o=s[n])&&o.prototype)?A(i)[R]=o:F=!1;for(n in j)(i=(o=s[n])&&o.prototype)&&(A(i)[R]=o);if((!F||!f(D)||D===Function.prototype)&&(D=function(){throw new C("Incorrect invocation")},F))for(n in U)s[n]&&_(s[n],D);if((!F||!N||N===M)&&(N=D.prototype,F))for(n in U)s[n]&&_(s[n].prototype,N);if(F&&v(O)!==N&&_(O,N),u&&!l(N,P))for(n in L=!0,g(N,P,{configurable:!0,get:function(){return c(this)?this[B]:void 0}}),U)s[n]&&h(s[n],B,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:L&&B,aTypedArray:function(t){if(q(t))return t;throw new C("Target is not a typed array")},aTypedArrayConstructor:function(t){if(f(t)&&(!_||m(D,t)))return t;throw new C(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(u){if(r)for(var o in U){var i=s[o];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}N[t]&&!r||y(N,t,r?e:F&&x[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(u){if(_){if(r)for(n in U)if((o=s[n])&&l(o,t))try{delete o[t]}catch(t){}if(D[t]&&!r)return;try{return y(D,t,r?e:F&&D[t]||e)}catch(t){}}for(n in U)!(o=s[n])||o[t]&&!r||y(o,t,e)}},getTypedArrayConstructor:G,isView:function(t){if(!c(t))return!1;var e=p(t);return"DataView"===e||l(U,e)||l(j,e)},isTypedArray:q,TypedArray:D,TypedArrayPrototype:N}},5370:function(t,e,r){var n=r(6198);t.exports=function(t,e,r){for(var o=0,i=arguments.length>2?r:n(e),a=new t(i);i>o;)a[o]=e[o++];return a}},9617:function(t,e,r){var n=r(5397),o=r(5610),i=r(6198),a=function(t){return function(e,r,a){var u=n(e),s=i(u);if(0===s)return!t&&-1;var f,c=o(a,s);if(t&&r!=r){for(;s>c;)if((f=u[c++])!=f)return!0}else for(;s>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},3839:function(t,e,r){var n=r(6080),o=r(7055),i=r(8981),a=r(6198),u=function(t){var e=1===t;return function(r,u,s){for(var f,c=i(r),l=o(c),p=a(l),d=n(u,s);p-- >0;)if(d(f=l[p],p,c))switch(t){case 0:return f;case 1:return p}return e?-1:void 0}};t.exports={findLast:u(0),findLastIndex:u(1)}},4527:function(t,e,r){var n=r(3724),o=r(4376),i=TypeError,a=Object.getOwnPropertyDescriptor,u=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=u?function(t,e){if(o(t)&&!a(t,"length").writable)throw new i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7680:function(t,e,r){var n=r(9504);t.exports=n([].slice)},4488:function(t,e,r){var n=r(7680),o=Math.floor,i=function(t,e){var r=t.length;if(r<8)for(var a,u,s=1;s<r;){for(u=s,a=t[s];u&&e(t[u-1],a)>0;)t[u]=t[--u];u!==s++&&(t[u]=a)}else for(var f=o(r/2),c=i(n(t,0,f),e),l=i(n(t,f),e),p=c.length,d=l.length,h=0,y=0;h<p||y<d;)t[h+y]=h<p&&y<d?e(c[h],l[y])<=0?c[h++]:l[y++]:h<p?c[h++]:l[y++];return t};t.exports=i},7628:function(t,e,r){var n=r(6198);t.exports=function(t,e){for(var r=n(t),o=new e(r),i=0;i<r;i++)o[i]=t[r-i-1];return o}},9928:function(t,e,r){var n=r(6198),o=r(1291),i=RangeError;t.exports=function(t,e,r,a){var u=n(t),s=o(r),f=s<0?u+s:s;if(f>=u||f<0)throw new i("Incorrect index");for(var c=new e(u),l=0;l<u;l++)c[l]=l===f?a:t[l];return c}},2195:function(t,e,r){var n=r(9504),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},6955:function(t,e,r){var n=r(2140),o=r(4901),i=r(2195),a=r(8227)("toStringTag"),u=Object,s="Arguments"===i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=u(t),a))?r:s?i(e):"Object"===(n=i(e))&&o(e.callee)?"Arguments":n}},7740:function(t,e,r){var n=r(9297),o=r(5031),i=r(7347),a=r(4913);t.exports=function(t,e,r){for(var u=o(e),s=a.f,f=i.f,c=0;c<u.length;c++){var l=u[c];n(t,l)||r&&n(r,l)||s(t,l,f(e,l))}}},2211:function(t,e,r){var n=r(9039);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6699:function(t,e,r){var n=r(3724),o=r(4913),i=r(6980);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:function(t,e,r){var n=r(283),o=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),o.f(t,e,r)}},6840:function(t,e,r){var n=r(4901),o=r(4913),i=r(283),a=r(9433);t.exports=function(t,e,r,u){u||(u={});var s=u.enumerable,f=void 0!==u.name?u.name:e;if(n(r)&&i(r,f,u),u.global)s?t[e]=r:a(e,r);else{try{u.unsafe?t[e]&&(s=!0):delete t[e]}catch(t){}s?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},9433:function(t,e,r){var n=r(4576),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},4606:function(t,e,r){var n=r(6823),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw new o("Cannot delete property "+n(e)+" of "+n(t))}},3724:function(t,e,r){var n=r(9039);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4483:function(t,e,r){var n,o,i,a,u=r(4576),s=r(9429),f=r(1548),c=u.structuredClone,l=u.ArrayBuffer,p=u.MessageChannel,d=!1;if(f)d=function(t){c(t,{transfer:[t]})};else if(l)try{p||(n=s("worker_threads"))&&(p=n.MessageChannel),p&&(o=new p,i=new l(2),a=function(t){o.port1.postMessage(null,[t])},2===i.byteLength&&(a(i),0===i.byteLength&&(d=a)))}catch(t){}t.exports=d},4055:function(t,e,r){var n=r(4576),o=r(34),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},6837:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3709:function(t,e,r){var n=r(2839).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},3763:function(t,e,r){var n=r(2839);t.exports=/MSIE|Trident/.test(n)},6193:function(t,e,r){var n=r(4215);t.exports="NODE"===n},2839:function(t,e,r){var n=r(4576).navigator,o=n&&n.userAgent;t.exports=o?String(o):""},9519:function(t,e,r){var n,o,i=r(4576),a=r(2839),u=i.process,s=i.Deno,f=u&&u.versions||s&&s.version,c=f&&f.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},3607:function(t,e,r){var n=r(2839).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},4215:function(t,e,r){var n=r(4576),o=r(2839),i=r(2195),a=function(t){return o.slice(0,t.length)===t};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},8574:function(t,e,r){var n=r(9504),o=Error,i=n("".replace),a=String(new o("zxcasd").stack),u=/\n\s*at [^:]*:[^\n]*/,s=u.test(a);t.exports=function(t,e){if(s&&"string"==typeof t&&!o.prepareStackTrace)for(;e--;)t=i(t,u,"");return t}},747:function(t,e,r){var n=r(6699),o=r(8574),i=r(4659),a=Error.captureStackTrace;t.exports=function(t,e,r,u){i&&(a?a(t,e):n(t,"stack",o(r,u)))}},4659:function(t,e,r){var n=r(9039),o=r(6980);t.exports=!n((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},6518:function(t,e,r){var n=r(4576),o=r(7347).f,i=r(6699),a=r(6840),u=r(9433),s=r(7740),f=r(2796);t.exports=function(t,e){var r,c,l,p,d,h=t.target,y=t.global,g=t.stat;if(r=y?n:g?n[h]||u(h,{}):n[h]&&n[h].prototype)for(c in e){if(p=e[c],l=t.dontCallGetSet?(d=o(r,c))&&d.value:r[c],!f(y?c:h+(g?".":"#")+c,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;s(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),a(r,c,p,t)}}},9039:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},8745:function(t,e,r){var n=r(616),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},6080:function(t,e,r){var n=r(7476),o=r(9306),i=r(616),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},616:function(t,e,r){var n=r(9039);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:function(t,e,r){var n=r(616),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350:function(t,e,r){var n=r(3724),o=r(9297),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,u=o(i,"name"),s=u&&"something"===function(){}.name,f=u&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:u,PROPER:s,CONFIGURABLE:f}},6706:function(t,e,r){var n=r(9504),o=r(9306);t.exports=function(t,e,r){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},7476:function(t,e,r){var n=r(2195),o=r(9504);t.exports=function(t){if("Function"===n(t))return o(t)}},9504:function(t,e,r){var n=r(616),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},9429:function(t,e,r){var n=r(4576),o=r(6193);t.exports=function(t){if(o){try{return n.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}}},7751:function(t,e,r){var n=r(4576),o=r(4901);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},5966:function(t,e,r){var n=r(9306),o=r(4117);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},4576:function(t,e,r){var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,r){var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},421:function(t){t.exports={}},5917:function(t,e,r){var n=r(3724),o=r(9039),i=r(4055);t.exports=!n&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,r){var n=r(9504),o=r(9039),i=r(2195),a=Object,u=n("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?u(t,""):a(t)}:a},3167:function(t,e,r){var n=r(4901),o=r(34),i=r(2967);t.exports=function(t,e,r){var a,u;return i&&n(a=e.constructor)&&a!==r&&o(u=a.prototype)&&u!==r.prototype&&i(t,u),t}},3706:function(t,e,r){var n=r(9504),o=r(4901),i=r(7629),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},7584:function(t,e,r){var n=r(34),o=r(6699);t.exports=function(t,e){n(e)&&"cause"in e&&o(t,"cause",e.cause)}},1181:function(t,e,r){var n,o,i,a=r(8622),u=r(4576),s=r(34),f=r(6699),c=r(9297),l=r(7629),p=r(6119),d=r(421),h="Object already initialized",y=u.TypeError,g=u.WeakMap;if(a||l.state){var m=l.state||(l.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,n=function(t,e){if(m.has(t))throw new y(h);return e.facade=t,m.set(t,e),e},o=function(t){return m.get(t)||{}},i=function(t){return m.has(t)}}else{var v=p("state");d[v]=!0,n=function(t,e){if(c(t,v))throw new y(h);return e.facade=t,f(t,v,e),e},o=function(t){return c(t,v)?t[v]:{}},i=function(t){return c(t,v)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!s(e)||(r=o(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return r}}}},4376:function(t,e,r){var n=r(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},1108:function(t,e,r){var n=r(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901:function(t){var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:function(t,e,r){var n=r(9039),o=r(4901),i=/#|\.prototype\./,a=function(t,e){var r=s[u(t)];return r===c||r!==f&&(o(e)?n(e):!!e)},u=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},f=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},4117:function(t){t.exports=function(t){return null==t}},34:function(t,e,r){var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},3925:function(t,e,r){var n=r(34);t.exports=function(t){return n(t)||null===t}},6395:function(t){t.exports=!1},757:function(t,e,r){var n=r(7751),o=r(4901),i=r(1625),a=r(7040),u=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,u(t))}},6198:function(t,e,r){var n=r(8014);t.exports=function(t){return n(t.length)}},283:function(t,e,r){var n=r(9504),o=r(9039),i=r(4901),a=r(9297),u=r(3724),s=r(350).CONFIGURABLE,f=r(3706),c=r(1181),l=c.enforce,p=c.get,d=String,h=Object.defineProperty,y=n("".slice),g=n("".replace),m=n([].join),v=u&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),_=String(String).split("String"),E=t.exports=function(t,e,r){"Symbol("===y(d(e),0,7)&&(e="["+g(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||s&&t.name!==e)&&(u?h(t,"name",{value:e,configurable:!0}):t.name=e),v&&r&&a(r,"arity")&&t.length!==r.arity&&h(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?u&&h(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=l(t);return a(n,"source")||(n.source=m(_,"string"==typeof e?e:"")),t};Function.prototype.toString=E((function(){return i(this)&&p(this).source||f(this)}),"toString")},741:function(t){var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},2603:function(t,e,r){var n=r(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},4913:function(t,e,r){var n=r(3724),o=r(5917),i=r(8686),a=r(8551),u=r(6969),s=TypeError,f=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l="enumerable",p="configurable",d="writable";e.f=n?i?function(t,e,r){if(a(t),e=u(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&d in r&&!r[d]){var n=c(t,e);n&&n[d]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:l in r?r[l]:n[l],writable:!1})}return f(t,e,r)}:f:function(t,e,r){if(a(t),e=u(e),a(r),o)try{return f(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7347:function(t,e,r){var n=r(3724),o=r(9565),i=r(8773),a=r(6980),u=r(5397),s=r(6969),f=r(9297),c=r(5917),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=u(t),e=s(e),c)try{return l(t,e)}catch(t){}if(f(t,e))return a(!o(i.f,t,e),t[e])}},8480:function(t,e,r){var n=r(1828),o=r(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},2787:function(t,e,r){var n=r(9297),o=r(4901),i=r(8981),a=r(6119),u=r(2211),s=a("IE_PROTO"),f=Object,c=f.prototype;t.exports=u?f.getPrototypeOf:function(t){var e=i(t);if(n(e,s))return e[s];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof f?c:null}},1625:function(t,e,r){var n=r(9504);t.exports=n({}.isPrototypeOf)},1828:function(t,e,r){var n=r(9504),o=r(9297),i=r(5397),a=r(9617).indexOf,u=r(421),s=n([].push);t.exports=function(t,e){var r,n=i(t),f=0,c=[];for(r in n)!o(u,r)&&o(n,r)&&s(c,r);for(;e.length>f;)o(n,r=e[f++])&&(~a(c,r)||s(c,r));return c}},8773:function(t,e){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2967:function(t,e,r){var n=r(6706),o=r(34),i=r(7750),a=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return i(r),a(n),o(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},4270:function(t,e,r){var n=r(9565),o=r(4901),i=r(34),a=TypeError;t.exports=function(t,e){var r,u;if("string"===e&&o(r=t.toString)&&!i(u=n(r,t)))return u;if(o(r=t.valueOf)&&!i(u=n(r,t)))return u;if("string"!==e&&o(r=t.toString)&&!i(u=n(r,t)))return u;throw new a("Can't convert object to primitive value")}},5031:function(t,e,r){var n=r(7751),o=r(9504),i=r(8480),a=r(3717),u=r(8551),s=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(u(t)),r=a.f;return r?s(e,r(t)):e}},1056:function(t,e,r){var n=r(4913).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},7979:function(t,e,r){var n=r(8551);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},7750:function(t,e,r){var n=r(4117),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},6119:function(t,e,r){var n=r(5745),o=r(3392),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},7629:function(t,e,r){var n=r(6395),o=r(4576),i=r(9433),a="__core-js_shared__",u=t.exports=o[a]||i(a,{});(u.versions||(u.versions=[])).push({version:"3.39.0",mode:n?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,r){var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},1548:function(t,e,r){var n=r(4576),o=r(9039),i=r(9519),a=r(4215),u=n.structuredClone;t.exports=!!u&&!o((function(){if("DENO"===a&&i>92||"NODE"===a&&i>94||"BROWSER"===a&&i>97)return!1;var t=new ArrayBuffer(8),e=u(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},4495:function(t,e,r){var n=r(9519),o=r(9039),i=r(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},5610:function(t,e,r){var n=r(1291),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5854:function(t,e,r){var n=r(2777),o=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new o("Can't convert number to bigint");return BigInt(e)}},7696:function(t,e,r){var n=r(1291),o=r(8014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw new i("Wrong length or index");return r}},5397:function(t,e,r){var n=r(7055),o=r(7750);t.exports=function(t){return n(o(t))}},1291:function(t,e,r){var n=r(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},8014:function(t,e,r){var n=r(1291),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},8981:function(t,e,r){var n=r(7750),o=Object;t.exports=function(t){return o(n(t))}},8229:function(t,e,r){var n=r(9590),o=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw new o("Wrong offset");return r}},9590:function(t,e,r){var n=r(1291),o=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw new o("The argument can't be less than 0");return e}},2777:function(t,e,r){var n=r(9565),o=r(34),i=r(757),a=r(5966),u=r(4270),s=r(8227),f=TypeError,c=s("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,s=a(t,c);if(s){if(void 0===e&&(e="default"),r=n(s,t,e),!o(r)||i(r))return r;throw new f("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},6969:function(t,e,r){var n=r(2777),o=r(757);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},2140:function(t,e,r){var n={};n[r(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},655:function(t,e,r){var n=r(6955),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:function(t,e,r){var n=r(9504),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},7040:function(t,e,r){var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,r){var n=r(3724),o=r(9039);t.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8622:function(t,e,r){var n=r(4576),o=r(4901),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},8227:function(t,e,r){var n=r(4576),o=r(5745),i=r(9297),a=r(3392),u=r(4495),s=r(7040),f=n.Symbol,c=o("wks"),l=s?f.for||f:f&&f.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=u&&i(f,t)?f[t]:l("Symbol."+t)),c[t]}},4601:function(t,e,r){var n=r(7751),o=r(9297),i=r(6699),a=r(1625),u=r(2967),s=r(7740),f=r(1056),c=r(3167),l=r(2603),p=r(7584),d=r(747),h=r(3724),y=r(6395);t.exports=function(t,e,r,g){var m="stackTraceLimit",v=g?2:1,_=t.split("."),E=_[_.length-1],T=n.apply(null,_);if(T){var b=T.prototype;if(!y&&o(b,"cause")&&delete b.cause,!r)return T;var A=n("Error"),S=e((function(t,e){var r=l(g?e:t,void 0),n=g?new T(t):new T;return void 0!==r&&i(n,"message",r),d(n,S,n.stack,2),this&&a(b,this)&&c(n,this,S),arguments.length>v&&p(n,arguments[v]),n}));if(S.prototype=b,"Error"!==E?u?u(S,A):s(S,A,{name:!0}):h&&m in T&&(f(S,T,m),f(S,T,"prepareStackTrace")),s(S,T),!y)try{b.name!==E&&i(b,"name",E),b.constructor=S}catch(t){}return S}}},6573:function(t,e,r){var n=r(3724),o=r(2106),i=r(3238),a=ArrayBuffer.prototype;n&&!("detached"in a)&&o(a,"detached",{configurable:!0,get:function(){return i(this)}})},7936:function(t,e,r){var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(t,e,r){var n=r(6518),o=r(5636);o&&n({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},4114:function(t,e,r){var n=r(6518),o=r(8981),i=r(6198),a=r(4527),u=r(6837);n({target:"Array",proto:!0,arity:1,forced:r(9039)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=o(this),r=i(e),n=arguments.length;u(r+n);for(var s=0;s<n;s++)e[r]=arguments[s],r++;return a(e,r),r}})},3609:function(t,e,r){var n=r(6518),o=r(8981),i=r(6198),a=r(4527),u=r(4606),s=r(6837);n({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}()},{unshift:function(t){var e=o(this),r=i(e),n=arguments.length;if(n){s(r+n);for(var f=r;f--;){var c=f+n;f in e?e[c]=e[f]:u(e,c)}for(var l=0;l<n;l++)e[l]=arguments[l]}return a(e,r+n)}})},6280:function(t,e,r){var n=r(6518),o=r(4576),i=r(8745),a=r(4601),u="WebAssembly",s=o[u],f=7!==new Error("e",{cause:7}).cause,c=function(t,e){var r={};r[t]=a(t,e,f),n({global:!0,constructor:!0,arity:1,forced:f},r)},l=function(t,e){if(s&&s[t]){var r={};r[t]=a(u+"."+t,e,f),n({target:u,stat:!0,constructor:!0,arity:1,forced:f},r)}};c("Error",(function(t){return function(e){return i(t,this,arguments)}})),c("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),c("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),c("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),c("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),c("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),c("URIError",(function(t){return function(e){return i(t,this,arguments)}})),l("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),l("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),l("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},9479:function(t,e,r){var n=r(4576),o=r(3724),i=r(2106),a=r(7979),u=r(9039),s=n.RegExp,f=s.prototype;o&&u((function(){var t=!0;try{s(".","d")}catch(e){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",o=function(t,n){Object.defineProperty(e,t,{get:function(){return r+=n,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(i.hasIndices="d"),i)o(a,i[a]);return Object.getOwnPropertyDescriptor(f,"flags").get.call(e)!==n||r!==n}))&&i(f,"flags",{configurable:!0,get:a})},8140:function(t,e,r){var n=r(4644),o=r(6198),i=r(1291),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(t){var e=a(this),r=o(e),n=i(t),u=n>=0?n:r+n;return u<0||u>=r?void 0:e[u]}))},1134:function(t,e,r){var n=r(4644),o=r(3839).findLastIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},1903:function(t,e,r){var n=r(4644),o=r(3839).findLast,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},8845:function(t,e,r){var n=r(4576),o=r(9565),i=r(4644),a=r(6198),u=r(8229),s=r(8981),f=r(9039),c=n.RangeError,l=n.Int8Array,p=l&&l.prototype,d=p&&p.set,h=i.aTypedArray,y=i.exportTypedArrayMethod,g=!f((function(){var t=new Uint8ClampedArray(2);return o(d,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&f((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){h(this);var e=u(arguments.length>1?arguments[1]:void 0,1),r=s(t);if(g)return o(d,this,r,e);var n=this.length,i=a(r),f=0;if(i+e>n)throw new c("Wrong length");for(;f<i;)this[e+f]=r[f++]}),!g||m)},373:function(t,e,r){var n=r(4576),o=r(7476),i=r(9039),a=r(9306),u=r(4488),s=r(4644),f=r(3709),c=r(3763),l=r(9519),p=r(3607),d=s.aTypedArray,h=s.exportTypedArrayMethod,y=n.Uint16Array,g=y&&o(y.prototype.sort),m=!(!g||i((function(){g(new y(2),null)}))&&i((function(){g(new y(2),{})}))),v=!!g&&!i((function(){if(l)return l<74;if(f)return f<67;if(c)return!0;if(p)return p<602;var t,e,r=new y(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(g(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));h("sort",(function(t){return void 0!==t&&a(t),v?g(this,t):u(d(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!v||m)},7467:function(t,e,r){var n=r(7628),o=r(4644),i=o.aTypedArray,a=o.exportTypedArrayMethod,u=o.getTypedArrayConstructor;a("toReversed",(function(){return n(i(this),u(this))}))},4732:function(t,e,r){var n=r(4644),o=r(9504),i=r(9306),a=r(5370),u=n.aTypedArray,s=n.getTypedArrayConstructor,f=n.exportTypedArrayMethod,c=o(n.TypedArrayPrototype.sort);f("toSorted",(function(t){void 0!==t&&i(t);var e=u(this),r=a(s(e),e);return c(r,t)}))},9577:function(t,e,r){var n=r(9928),o=r(4644),i=r(1108),a=r(1291),u=r(5854),s=o.aTypedArray,f=o.getTypedArrayConstructor,c=o.exportTypedArrayMethod,l=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();c("with",{with:function(t,e){var r=s(this),o=a(t),c=i(r)?u(e):+e;return n(r,f(r),o,c)}}.with,!l)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var n={};r.d(n,{default:function(){return G}}),r(4114);var o=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}};class i{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.CONTENT_STEERING_TYPE="ContentSteering",i.OTHER_TYPE="other";class a{constructor(t){this.action=a.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.isPartialSegmentRequest=!1,this.mediaStartTime=NaN,this.mediaType=null,this.presentationStartTime=NaN,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=t||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===i.INIT_SEGMENT_TYPE}setInfo(t){this.type=t&&t.init?i.INIT_SEGMENT_TYPE:i.MEDIA_SEGMENT_TYPE,this.url=t&&t.url?t.url:null,this.range=t&&t.range?t.range.start+"-"+t.range.end:null,this.mediaType=t&&t.mediaType?t.mediaType:null,this.representation=t&&t.representation?t.representation:null}}a.ACTION_DOWNLOAD="download",a.ACTION_COMPLETE="complete";var u=a;const s=function(){let t,e=[];const r={},n={};function o(t,r){for(const n in e){const o=e[n];if(o.context===t&&o.name===r)return o.instance}return null}function i(t,e){return e[t]}function a(t,e,r){t in r&&(r[t]=e)}function u(e,r,n){let o;const i=e.__dashjs_factory_name,a=r[i];if(a){let i=a.instance;if(!a.override)return i.apply({context:r,factory:t},n);o=e.apply({context:r},n),i=i.apply({context:r,factory:t,parent:o},n);for(const t in i)o.hasOwnProperty(t)&&(o[t]=i[t])}else o=e.apply({context:r},n);return o.getClassName=function(){return i},o}return t={deleteSingletonInstances:function(t){e=e.filter((e=>e.context!==t))},extend:function(t,e,r,n){!n[t]&&e&&(n[t]={instance:e,override:r})},getClassFactory:function(t){let e=i(t.__dashjs_factory_name,n);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return u(t,e,arguments)}}},n[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(t){return i(t,n)},getSingletonFactory:function(t){let n=i(t.__dashjs_factory_name,r);return n||(n=function(r){let n;return void 0===r&&(r={}),{getInstance:function(){return n||(n=o(r,t.__dashjs_factory_name)),n||(n=u(t,r,arguments),e.push({name:t.__dashjs_factory_name,context:r,instance:n})),n}}},r[t.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(t){return i(t,r)},getSingletonInstance:o,setSingletonInstance:function(t,r,n){for(const o in e){const i=e[o];if(i.context===t&&i.name===r)return void(e[o].instance=n)}e.push({name:r,context:t,instance:n})},updateClassFactory:function(t,e){a(t,e,n)},updateSingletonFactory:function(t,e){a(t,e,r)}},t}();var f=s;function c(t){let e,r,n,o,a,s,f,c,l;const p=(t=t||{}).streamProcessor,d=t.baseURLController,h=t.debug;function y(){o&&(r.debug("Stop"),clearTimeout(s),o=!1,f=null,c=null)}function g(){if(!o)return;const t=p.getRepresentationController().getCurrentRepresentation(),e=t.adaptation.period.mpd.manifest.Period[t.adaptation.period.index].AdaptationSet[t.adaptation.index],r=e.SegmentTemplate.SegmentTimeline.S,n=function(t,e,r){let n=t.SegmentTemplate.timescale,o=new u;return o.mediaType=a,o.type=i.MSS_FRAGMENT_INFO_SEGMENT_TYPE,o.startTime=r.t/n,o.duration=r.d/n,o.timescale=n,o.bandwidth=e.bandwidth,o.index=l++,o.adaptationIndex=e.adaptation.index,o.representation=e,o.url=d.resolve(e.path).url+t.SegmentTemplate.media,o.url=o.url.replace("$Bandwidth$",e.bandwidth),o.url=o.url.replace("$Time$",r.tManifest?r.tManifest:r.t),o.url=o.url.replace("/Fragments(","/FragmentInfo("),o}(e,t,r[r.length-1]);m.call(this,n)}function m(t){if(p.getFragmentModel().isFragmentLoadedOrPending(t))return r.debug("End of timeline"),void y();n.executeRequest(t)}return e={initialize:function(){a=p.getType(),n=p.getFragmentModel(),o=!1,f=null,c=null},controllerType:"MssFragmentInfoController",start:function(){o||(r.debug("Start"),o=!0,l=0,g())},fragmentInfoLoaded:function(t){if(!o)return;const e=t.request;if(!t.response)return void r.error("Load error",e.url);let n,i,a;null===f&&(f=(new Date).getTime()),c||(c=e.startTime),i=((new Date).getTime()-f)/1e3,n=e.startTime+e.duration-c,a=Math.max(0,n-i),clearTimeout(s),s=setTimeout((function(){s=null,g()}),1e3*a)},getType:function(){return a},reset:function(){y()}},r=h.getLogger(e),e}c.__dashjs_factory_name="MssFragmentInfoController";var l=f.getClassFactory(c);r(6280),r(9479);var p=class{constructor(t,e,r){this.code=t||null,this.message=e||null,this.data=r||null}},d=class{extend(t,e){if(!t)return;let r=!!e&&e.override,n=!!e&&e.publicOnly;for(const e in t)!t.hasOwnProperty(e)||this[e]&&!r||n&&-1===t[e].indexOf("public_")||(this[e]=t[e])}},h=new class extends d{constructor(){super(),this.MSS_NO_TFRF_CODE=200,this.MSS_UNSUPPORTED_CODEC_CODE=201,this.MSS_NO_TFRF_MESSAGE="Missing tfrf in live media segment",this.MSS_UNSUPPORTED_CODEC_MESSAGE="Unsupported codec"}},y=class{extend(t,e){if(!t)return;let r=!!e&&e.override,n=!!e&&e.publicOnly;for(const e in t)!t.hasOwnProperty(e)||this[e]&&!r||n&&-1===t[e].indexOf("public_")||(this[e]=t[e])}},g=new class extends y{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}};function m(t){let e,r,n;const o=(t=t||{}).dashMetrics,i=t.playbackController,a=t.errHandler,u=t.eventBus,s=t.ISOBoxer,f=t.debug;function c(t,e,o,s){const f=s.getRepresentationController().getCurrentRepresentation(),c=f.adaptation.period.mpd.manifest,d=c.Period[f.adaptation.period.index].AdaptationSet[f.adaptation.index],y=d.SegmentTemplate.timescale;if(r=s.getType(),"dynamic"!==c.type&&!c.timeShiftBufferDepth)return;if(!e)return void a.error(new p(h.MSS_NO_TFRF_CODE,h.MSS_NO_TFRF_MESSAGE));const m=d.SegmentTemplate.SegmentTimeline.S,v=e.entry;let _,E,T,b,A=null,S=0,w=null;if(0===v.length)return;if(_=v[0],"static"===c.type&&(E=m[0].tManifest?parseFloat(m[0].tManifest):m[0].t,_.fragment_absolute_time>E+c.timeShiftBufferDepth*y))return;if(E=m[m.length-1].tManifest?parseFloat(m[m.length-1].tManifest):m[m.length-1].t,_.fragment_absolute_time<=E)return T={start:m[0].t/y,end:o.baseMediaDecodeTime/y+t.duration},void l(t.mediaType,T,s.getStreamInfo().manifestInfo);A={},A.t=_.fragment_absolute_time,A.d=_.fragment_duration,m[0].tManifest&&(A.t-=parseFloat(m[0].tManifest)-m[0].t,A.tManifest=_.fragment_absolute_time);let x=m[m.length-1];if(x.t+x.d!==A.t&&(n.debug("Patch segment duration - t = ",x.t+", d = "+x.d+" => "+(A.t-x.t)),x.d=A.t-x.t),m.push(A),"static"!==c.type){if(c.timeShiftBufferDepth&&c.timeShiftBufferDepth>0)for(A=m[m.length-1],S=A.t,w=(S-c.timeShiftBufferDepth*y)/y,A=m[0],b=(A.t+A.d)/y;b<w&&(i.isPaused()||!(i.getTime()<b));)m.splice(0,1),A=m[0],b=(A.t+A.d)/y;T={start:m[0].t/y,end:o.baseMediaDecodeTime/y+t.duration},l(r,T,s.getStreamInfo().manifestInfo)}else"video"===r&&(A=m[m.length-1],b=(A.t+A.d)/y,b>f.adaptation.period.duration&&u.trigger(g.MANIFEST_VALIDITY_CHANGED,{sender:this,newDuration:b}))}function l(t,e,r){if("video"!==t&&"audio"!==t)return;const a=o.getCurrentDVRInfo(t);(!a||e.end>a.range.end)&&(n.debug("Update DVR range: ["+e.start+" - "+e.end+"]"),o.addDVRInfo(t,i.getTime(),r,e),i.updateCurrentTime(t))}function d(t,e){let r=8,n=0;for(n=0;n<t.boxes.length;n++){if(t.boxes[n].type===e)return r;r+=t.boxes[n].size}return r}return e={convertFragment:function(t,e){let r;const n=s.parseBuffer(t.response),o=n.fetch("tfhd");o.track_ID=t.request.representation.mediaInfo.index+1;let i=n.fetch("tfdt");const a=n.fetch("traf");null===i&&(i=s.createFullBox("tfdt",a,o),i.version=1,i.flags=0,i.baseMediaDecodeTime=Math.floor(t.request.startTime*t.request.timescale));const u=n.fetch("trun");let f=n.fetch("tfxd");f&&(f._parent.boxes.splice(f._parent.boxes.indexOf(f),1),f=null);let l=n.fetch("tfrf");c(t.request,l,i,e),l&&(l._parent.boxes.splice(l._parent.boxes.indexOf(l),1),l=null);const p=n.fetch("sepiff");if(null!==p){p.type="senc",p.usertype=void 0;let t=n.fetch("saio");if(null===t){t=s.createFullBox("saio",a),t.version=0,t.flags=0,t.entry_count=1,t.offset=[0];const e=s.createFullBox("saiz",a);if(e.version=0,e.flags=0,e.sample_count=p.sample_count,e.default_sample_info_size=0,e.sample_info_size=[],2&p.flags)for(r=0;r<p.sample_count;r+=1)e.sample_info_size[r]=10+6*p.entry[r].NumberOfEntries;else e.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,u.flags|=1;const h=n.fetch("moof");let y=h.getLength();u.data_offset=y+8;let g=n.fetch("saio");if(null!==g){let t=d(h,"traf"),e=d(a,"senc");g.offset[0]=t+e+16}t.response=n.write()},updateSegmentList:function(t,e){if(!t.response)throw new Error("e.response parameter is missing");const r=s.parseBuffer(t.response),n=r.fetch("tfhd");n.track_ID=t.request.representation.mediaInfo.index+1;let o=r.fetch("tfdt"),i=r.fetch("traf");null===o&&(o=s.createFullBox("tfdt",i,n),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(t.request.startTime*t.request.timescale));let a=r.fetch("tfrf");c(t.request,a,o,e),a&&(a._parent.boxes.splice(a._parent.boxes.indexOf(a),1),a=null)},getType:function(){return r}},n=f.getLogger(e),r="",e}m.__dashjs_factory_name="MssFragmentMoofProcessor";var v=f.getClassFactory(m);function _(t){const e=(t=t||{}).constants,r=t.ISOBoxer;let n,o,i,a,u,s,f,c=t.protectionController;function l(t,e){r.createBox("frma",t).data_format=function(t){let e,r=0;for(e=0;e<t.length;e+=1)r|=t.charCodeAt(e)<<8*(t.length-e-1);return r}(e)}function p(t){let e=r.createFullBox("schm",t);e.flags=0,e.version=0,e.scheme_type=1667591779,e.scheme_version=65536}function d(t){!function(t){let e=r.createFullBox("tenc",t);e.flags=0,e.version=0,e.default_IsEncrypted=1,e.default_IV_size=8,e.default_KID=u&&u.length>0&&u[0]["cenc:default_KID"]?u[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}(r.createBox("schi",t))}function y(t){let e,r=new Uint8Array(t.length/2);for(e=0;e<t.length/2;e+=1)r[e]=parseInt(""+t[2*e]+t[2*e+1],16);return r}return n={generateMoov:function(t){if(!t||!t.adaptation)return;let n,g;return a=t,i=a.adaptation,o=i.period,f=i.index+1,u=o.mpd.manifest.Period[o.index].AdaptationSet[i.index].ContentProtection,s=o.mpd.manifest.Period[o.index].AdaptationSet[i.index].SegmentTemplate.timescale,n=r.createFile(),function(t){let e=r.createBox("ftyp",t);e.major_brand="iso6",e.minor_version=1,e.compatible_brands=[],e.compatible_brands[0]="isom",e.compatible_brands[1]="iso6",e.compatible_brands[2]="msdh"}(n),function(t){let n=r.createBox("moov",t);!function(t){let e=r.createFullBox("mvhd",t);e.version=1,e.creation_time=0,e.modification_time=0,e.timescale=s,e.duration=o.duration===1/0?0x10000000000000000:Math.round(o.duration*s),e.rate=1,e.volume=1,e.reserved1=0,e.reserved2=[0,0],e.matrix=[1,0,0,0,1,0,0,0,16384],e.pre_defined=[0,0,0,0,0,0],e.next_track_ID=f+1}(n);let g=r.createBox("trak",n);!function(t){let e=r.createFullBox("tkhd",t);e.version=1,e.flags=7,e.creation_time=0,e.modification_time=0,e.track_ID=f,e.reserved1=0,e.duration=o.duration===1/0?0x10000000000000000:Math.round(o.duration*s),e.reserved2=[0,0],e.layer=0,e.alternate_group=0,e.volume=1,e.reserved3=0,e.matrix=[1,0,0,0,1,0,0,0,16384],e.width=a.width,e.height=a.height}(g);let m=r.createBox("mdia",g);!function(t){let e=r.createFullBox("mdhd",t);e.version=1,e.creation_time=0,e.modification_time=0,e.timescale=s,e.duration=o.duration===1/0?0x10000000000000000:Math.round(o.duration*s),e.language=i.lang||"und",e.pre_defined=0}(m),function(t){let n=r.createFullBox("hdlr",t);switch(n.pre_defined=0,i.type){case e.VIDEO:n.handler_type="vide";break;case e.AUDIO:n.handler_type="soun";break;default:n.handler_type="meta"}n.name=a.id,n.reserved=[0,0,0]}(m);let v=r.createBox("minf",m);switch(i.type){case e.VIDEO:!function(t){let e=r.createFullBox("vmhd",t);e.flags=1,e.graphicsmode=0,e.opcolor=[0,0,0]}(v);break;case e.AUDIO:!function(t){let e=r.createFullBox("smhd",t);e.flags=1,e.balance=0,e.reserved=0}(v)}!function(t){let e=r.createFullBox("dref",t);e.entry_count=1,e.entries=[];let n=r.createFullBox("url ",e,!1);n.location="",n.flags=1,e.entries.push(n)}(r.createBox("dinf",v));let _=r.createBox("stbl",v);r.createFullBox("stts",_)._data=[0,0,0,0,0,0,0,0],r.createFullBox("stsc",_)._data=[0,0,0,0,0,0,0,0],r.createFullBox("stco",_)._data=[0,0,0,0,0,0,0,0],r.createFullBox("stsz",_)._data=[0,0,0,0,0,0,0,0,0,0,0,0],function(t){let n=r.createFullBox("stsd",t);switch(n.entries=[],i.type){case e.VIDEO:case e.AUDIO:n.entries.push(function(t){let e=a.codecs.substring(0,a.codecs.indexOf("."));switch(e){case"avc1":return function(t,e){let n;if(n=u?r.createBox("encv",t,!1):r.createBox("avc1",t,!1),n.reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.pre_defined1=0,n.reserved2=0,n.pre_defined2=[0,0,0],n.height=a.height,n.width=a.width,n.horizresolution=72,n.vertresolution=72,n.reserved3=0,n.frame_count=1,n.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n.depth=24,n.pre_defined3=65535,n.config=function(){let t,e,r=null,n=15,o=[],i=[],u=0,s=0,f=0,c=a.codecPrivateData.split("00000001").slice(1);for(let r=0;r<c.length;r++)switch(t=y(c[r]),e=31&t[0],e){case 7:o.push(t),n+=t.length+2;break;case 8:i.push(t),n+=t.length+2}o.length>0&&(u=o[0][1],f=o[0][2],s=o[0][3]),r=new Uint8Array(n);let l=0;r[l++]=(4278190080&n)>>24,r[l++]=(16711680&n)>>16,r[l++]=(65280&n)>>8,r[l++]=255&n,r.set([97,118,99,67],l),l+=4,r[l++]=1,r[l++]=u,r[l++]=f,r[l++]=s,r[l++]=255,r[l++]=224|o.length;for(let t=0;t<o.length;t++)r[l++]=(65280&o[t].length)>>8,r[l++]=255&o[t].length,r.set(o[t],l),l+=o[t].length;r[l++]=i.length;for(let t=0;t<i.length;t++)r[l++]=(65280&i[t].length)>>8,r[l++]=255&i[t].length,r.set(i[t],l),l+=i[t].length;return r}(),u){let t=r.createBox("sinf",n);l(t,e),p(t),d(t)}return n}(t,e);case"mp4a":return function(t,e){let n;if(n=u?r.createBox("enca",t,!1):r.createBox("mp4a",t,!1),n.reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.reserved2=[0,0],n.channelcount=a.audioChannels,n.samplesize=16,n.pre_defined=0,n.reserved_3=0,n.samplerate=a.audioSamplingRate<<16,n.esds=function(){let t=y(a.codecPrivateData),e=34+t.length,r=new Uint8Array(e),n=0;return r[n++]=(4278190080&e)>>24,r[n++]=(16711680&e)>>16,r[n++]=(65280&e)>>8,r[n++]=255&e,r.set([101,115,100,115],n),n+=4,r.set([0,0,0,0],n),n+=4,r[n++]=3,r[n++]=20+t.length,r[n++]=(65280&f)>>8,r[n++]=255&f,r[n++]=0,r[n++]=4,r[n++]=15+t.length,r[n++]=64,r[n]=20,r[n]|=0,r[n++]|=1,r[n++]=255,r[n++]=255,r[n++]=255,r[n++]=(4278190080&a.bandwidth)>>24,r[n++]=(16711680&a.bandwidth)>>16,r[n++]=(65280&a.bandwidth)>>8,r[n++]=255&a.bandwidth,r[n++]=(4278190080&a.bandwidth)>>24,r[n++]=(16711680&a.bandwidth)>>16,r[n++]=(65280&a.bandwidth)>>8,r[n++]=255&a.bandwidth,r[n++]=5,r[n++]=t.length,r.set(t,n),r}(),u){let t=r.createBox("sinf",n);l(t,e),p(t),d(t)}return n}(t,e);default:throw{code:h.MSS_UNSUPPORTED_CODEC_CODE,message:h.MSS_UNSUPPORTED_CODEC_MESSAGE,data:{codec:e}}}}(n))}n.entry_count=n.entries.length}(_),function(t){let e=r.createFullBox("trex",t);e.track_ID=f,e.default_sample_description_index=1,e.default_sample_duration=0,e.default_sample_size=0,e.default_sample_flags=0}(r.createBox("mvex",n)),u&&c&&function(t,e){let n,o,i,a;for(i=0;i<e.length;i+=1)n=e[i].initData,n&&(a=r.parseBuffer(n),o=a.fetch("pssh"),o&&r.Utils.appendBox(t,o))}(n,c.getSupportedKeySystemMetadataFromContentProtection(u))}(n),g=n.write(),g}},n}r(6573),r(8100),r(7936),r(8140),r(1903),r(1134),r(8845),r(373),r(7467),r(4732),r(9577),_.__dashjs_factory_name="MssFragmentMoovProcessor";var E=f.getClassFactory(_);function T(t,e){return t.length===e.length&&t.every((function(t,r){return t===e[r]}))}function b(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}function A(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}function S(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,(function(t){this._procEntryField(t,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(t,"NumberOfEntries","uint",16),this._procSubEntries(t,"clearAndCryptedData",t.NumberOfEntries,(function(t){this._procEntryField(t,"BytesOfClearData","uint",16),this._procEntryField(t,"BytesOfEncryptedData","uint",32)})))}))}function w(){T(this.usertype,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",1===this.version?64:32),this._procField("fragment_duration","uint",1===this.version?64:32)),T(this.usertype,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,(function(t){this._procEntryField(t,"fragment_absolute_time","uint",1===this.version?64:32),this._procEntryField(t,"fragment_duration","uint",1===this.version?64:32)}))),T(this.usertype,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])&&(this._parsing&&(this.type="sepiff"),S.call(this))}function x(t){t=t||{};const e=this.context,r=t.dashMetrics,n=t.playbackController,o=t.eventBus,a=t.protectionController,u=t.ISOBoxer,s=t.debug;let f,c,l;return l={generateMoov:function(t){return f.generateMoov(t)},processFragment:function(t,e){if(!t||!t.request||!t.response)throw new Error("e parameter is missing or malformed");"MediaSegment"===t.request.type?c.convertFragment(t,e):t.request.type===i.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(c.updateSegmentList(t,e),t.sender=null)}},u.addBoxProcessor("uuid",w),u.addBoxProcessor("saio",b),u.addBoxProcessor("saiz",A),u.addBoxProcessor("senc",S),f=E(e).create({protectionController:a,constants:t.constants,ISOBoxer:u}),c=v(e).create({dashMetrics:r,playbackController:n,ISOBoxer:u,eventBus:o,debug:s,errHandler:t.errHandler}),l}x.__dashjs_factory_name="MssFragmentProcessor";var I=f.getClassFactory(x),O=(r(3609),function(t){var e=1e7,r=7,n=9007199254740992,o=p(n),i="0123456789abcdefghijklmnopqrstuvwxyz",a="function"==typeof BigInt;function u(t,e,r,n){return void 0===t?u[0]:void 0===e||10==+e&&!r?$(t):z(t,e,r,n)}function s(t,e){this.value=t,this.sign=e,this.isSmall=!1}function f(t){this.value=t,this.sign=t<0,this.isSmall=!0}function c(t){this.value=t}function l(t){return-n<t&&t<n}function p(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function d(t){h(t);var r=t.length;if(r<4&&M(t,o)<0)switch(r){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function h(t){for(var e=t.length;0===t[--e];);t.length=e+1}function y(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function g(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,r){var n,o,i=t.length,a=r.length,u=new Array(i),s=0,f=e;for(o=0;o<a;o++)s=(n=t[o]+r[o]+s)>=f?1:0,u[o]=n-s*f;for(;o<i;)s=(n=t[o]+s)===f?1:0,u[o++]=n-s*f;return s>0&&u.push(s),u}function v(t,e){return t.length>=e.length?m(t,e):m(e,t)}function _(t,r){var n,o,i=t.length,a=new Array(i),u=e;for(o=0;o<i;o++)n=t[o]-u+r,r=Math.floor(n/u),a[o]=n-r*u,r+=1;for(;r>0;)a[o++]=r%u,r=Math.floor(r/u);return a}function E(t,r){var n,o,i=t.length,a=r.length,u=new Array(i),s=0,f=e;for(n=0;n<a;n++)(o=t[n]-s-r[n])<0?(o+=f,s=1):s=0,u[n]=o;for(n=a;n<i;n++){if(!((o=t[n]-s)<0)){u[n++]=o;break}o+=f,u[n]=o}for(;n<i;n++)u[n]=t[n];return h(u),u}function T(t,r,n){var o,i,a=t.length,u=new Array(a),c=-r,l=e;for(o=0;o<a;o++)i=t[o]+c,c=Math.floor(i/l),i%=l,u[o]=i<0?i+l:i;return"number"==typeof(u=d(u))?(n&&(u=-u),new f(u)):new s(u,n)}function b(t,r){var n,o,i,a,u=t.length,s=r.length,f=y(u+s),c=e;for(i=0;i<u;++i){a=t[i];for(var l=0;l<s;++l)n=a*r[l]+f[i+l],o=Math.floor(n/c),f[i+l]=n-o*c,f[i+l+1]+=o}return h(f),f}function A(t,r){var n,o,i=t.length,a=new Array(i),u=e,s=0;for(o=0;o<i;o++)n=t[o]*r+s,s=Math.floor(n/u),a[o]=n-s*u;for(;s>0;)a[o++]=s%u,s=Math.floor(s/u);return a}function S(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function w(t,e){var r=Math.max(t.length,e.length);if(r<=30)return b(t,e);r=Math.ceil(r/2);var n=t.slice(r),o=t.slice(0,r),i=e.slice(r),a=e.slice(0,r),u=w(o,a),s=w(n,i),f=w(v(o,n),v(a,i)),c=v(v(u,S(E(E(f,u),s),r)),S(s,2*r));return h(c),c}function x(t,r,n){return new s(t<e?A(r,t):b(r,p(t)),n)}function I(t){var r,n,o,i,a=t.length,u=y(a+a),s=e;for(o=0;o<a;o++){n=0-(i=t[o])*i;for(var f=o;f<a;f++)r=i*t[f]*2+u[o+f]+n,n=Math.floor(r/s),u[o+f]=r-n*s;u[o+a]=n}return h(u),u}function D(t,r){var n,o,i,a,u=t.length,s=y(u),f=e;for(i=0,n=u-1;n>=0;--n)i=(a=i*f+t[n])-(o=g(a/r))*r,s[n]=0|o;return[s,0|i]}function N(t,r){var n,o=$(r);if(a)return[new c(t.value/o.value),new c(t.value%o.value)];var i,l=t.value,m=o.value;if(0===m)throw new Error("Cannot divide by zero");if(t.isSmall)return o.isSmall?[new f(g(l/m)),new f(l%m)]:[u[0],t];if(o.isSmall){if(1===m)return[t,u[0]];if(-1==m)return[t.negate(),u[0]];var v=Math.abs(m);if(v<e){i=d((n=D(l,v))[0]);var _=n[1];return t.sign&&(_=-_),"number"==typeof i?(t.sign!==o.sign&&(i=-i),[new f(i),new f(_)]):[new s(i,t.sign!==o.sign),new f(_)]}m=p(v)}var T=M(l,m);if(-1===T)return[u[0],t];if(0===T)return[u[t.sign===o.sign?1:-1],u[0]];n=l.length+m.length<=200?function(t,r){var n,o,i,a,u,s,f,c=t.length,l=r.length,p=e,h=y(r.length),g=r[l-1],m=Math.ceil(p/(2*g)),v=A(t,m),_=A(r,m);for(v.length<=c&&v.push(0),_.push(0),g=_[l-1],o=c-l;o>=0;o--){for(n=p-1,v[o+l]!==g&&(n=Math.floor((v[o+l]*p+v[o+l-1])/g)),i=0,a=0,s=_.length,u=0;u<s;u++)i+=n*_[u],f=Math.floor(i/p),a+=v[o+u]-(i-f*p),i=f,a<0?(v[o+u]=a+p,a=-1):(v[o+u]=a,a=0);for(;0!==a;){for(n-=1,i=0,u=0;u<s;u++)(i+=v[o+u]-p+_[u])<0?(v[o+u]=i+p,i=0):(v[o+u]=i,i=1);a+=i}h[o]=n}return v=D(v,m)[0],[d(h),d(v)]}(l,m):function(t,r){for(var n,o,i,a,u,s=t.length,f=r.length,c=[],l=[],p=e;s;)if(l.unshift(t[--s]),h(l),M(l,r)<0)c.push(0);else{i=l[(o=l.length)-1]*p+l[o-2],a=r[f-1]*p+r[f-2],o>f&&(i=(i+1)*p),n=Math.ceil(i/a);do{if(M(u=A(r,n),l)<=0)break;n--}while(n);c.push(n),l=E(l,u)}return c.reverse(),[d(c),d(l)]}(l,m),i=n[0];var b=t.sign!==o.sign,S=n[1],w=t.sign;return"number"==typeof i?(b&&(i=-i),i=new f(i)):i=new s(i,b),"number"==typeof S?(w&&(S=-S),S=new f(S)):S=new s(S,w),[i,S]}function M(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function C(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function P(t,e){for(var r,n,o,i=t.prev(),a=i,u=0;a.isEven();)a=a.divide(2),u++;t:for(n=0;n<e.length;n++)if(!t.lesser(e[n])&&!(o=O(e[n]).modPow(a,t)).isUnit()&&!o.equals(i)){for(r=u-1;0!=r;r--){if((o=o.square().mod(t)).isUnit())return!1;if(o.equals(i))continue t}return!1}return!0}s.prototype=Object.create(u.prototype),f.prototype=Object.create(u.prototype),c.prototype=Object.create(u.prototype),s.prototype.add=function(t){var e=$(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,n=e.value;return e.isSmall?new s(_(r,Math.abs(n)),this.sign):new s(v(r,n),this.sign)},s.prototype.plus=s.prototype.add,f.prototype.add=function(t){var e=$(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(l(r+n))return new f(r+n);n=p(Math.abs(n))}return new s(_(n,Math.abs(r)),r<0)},f.prototype.plus=f.prototype.add,c.prototype.add=function(t){return new c(this.value+$(t).value)},c.prototype.plus=c.prototype.add,s.prototype.subtract=function(t){var e=$(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,n=e.value;return e.isSmall?T(r,Math.abs(n),this.sign):function(t,e,r){var n;return M(t,e)>=0?n=E(t,e):(n=E(e,t),r=!r),"number"==typeof(n=d(n))?(r&&(n=-n),new f(n)):new s(n,r)}(r,n,this.sign)},s.prototype.minus=s.prototype.subtract,f.prototype.subtract=function(t){var e=$(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new f(r-n):T(n,Math.abs(r),r>=0)},f.prototype.minus=f.prototype.subtract,c.prototype.subtract=function(t){return new c(this.value-$(t).value)},c.prototype.minus=c.prototype.subtract,s.prototype.negate=function(){return new s(this.value,!this.sign)},f.prototype.negate=function(){var t=this.sign,e=new f(-this.value);return e.sign=!t,e},c.prototype.negate=function(){return new c(-this.value)},s.prototype.abs=function(){return new s(this.value,!1)},f.prototype.abs=function(){return new f(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},s.prototype.multiply=function(t){var r,n,o,i=$(t),a=this.value,f=i.value,c=this.sign!==i.sign;if(i.isSmall){if(0===f)return u[0];if(1===f)return this;if(-1===f)return this.negate();if((r=Math.abs(f))<e)return new s(A(a,r),c);f=p(r)}return new s(-.012*(n=a.length)-.012*(o=f.length)+15e-6*n*o>0?w(a,f):b(a,f),c)},s.prototype.times=s.prototype.multiply,f.prototype._multiplyBySmall=function(t){return l(t.value*this.value)?new f(t.value*this.value):x(Math.abs(t.value),p(Math.abs(this.value)),this.sign!==t.sign)},s.prototype._multiplyBySmall=function(t){return 0===t.value?u[0]:1===t.value?this:-1===t.value?this.negate():x(Math.abs(t.value),this.value,this.sign!==t.sign)},f.prototype.multiply=function(t){return $(t)._multiplyBySmall(this)},f.prototype.times=f.prototype.multiply,c.prototype.multiply=function(t){return new c(this.value*$(t).value)},c.prototype.times=c.prototype.multiply,s.prototype.square=function(){return new s(I(this.value),!1)},f.prototype.square=function(){var t=this.value*this.value;return l(t)?new f(t):new s(I(p(Math.abs(this.value))),!1)},c.prototype.square=function(t){return new c(this.value*this.value)},s.prototype.divmod=function(t){var e=N(this,t);return{quotient:e[0],remainder:e[1]}},c.prototype.divmod=f.prototype.divmod=s.prototype.divmod,s.prototype.divide=function(t){return N(this,t)[0]},c.prototype.over=c.prototype.divide=function(t){return new c(this.value/$(t).value)},f.prototype.over=f.prototype.divide=s.prototype.over=s.prototype.divide,s.prototype.mod=function(t){return N(this,t)[1]},c.prototype.mod=c.prototype.remainder=function(t){return new c(this.value%$(t).value)},f.prototype.remainder=f.prototype.mod=s.prototype.remainder=s.prototype.mod,s.prototype.pow=function(t){var e,r,n,o=$(t),i=this.value,a=o.value;if(0===a)return u[1];if(0===i)return u[0];if(1===i)return u[1];if(-1===i)return o.isEven()?u[1]:u[-1];if(o.sign)return u[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&l(e=Math.pow(i,a)))return new f(g(e));for(r=this,n=u[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},f.prototype.pow=s.prototype.pow,c.prototype.pow=function(t){var e=$(t),r=this.value,n=e.value,o=BigInt(0),i=BigInt(1),a=BigInt(2);if(n===o)return u[1];if(r===o)return u[0];if(r===i)return u[1];if(r===BigInt(-1))return e.isEven()?u[1]:u[-1];if(e.isNegative())return new c(o);for(var s=this,f=u[1];(n&i)===i&&(f=f.times(s),--n),n!==o;)n/=a,s=s.square();return f},s.prototype.modPow=function(t,e){if(t=$(t),(e=$(e)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=u[1],n=this.mod(e);t.isPositive();){if(n.isZero())return u[0];t.isOdd()&&(r=r.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return r},c.prototype.modPow=f.prototype.modPow=s.prototype.modPow,s.prototype.compareAbs=function(t){var e=$(t),r=this.value,n=e.value;return e.isSmall?1:M(r,n)},f.prototype.compareAbs=function(t){var e=$(t),r=Math.abs(this.value),n=e.value;return e.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(t){var e=this.value,r=$(t).value;return(e=e>=0?e:-e)===(r=r>=0?r:-r)?0:e>r?1:-1},s.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=$(t),r=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:M(r,n)*(this.sign?-1:1)},s.prototype.compareTo=s.prototype.compare,f.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=$(t),r=this.value,n=e.value;return e.isSmall?r==n?0:r>n?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},f.prototype.compareTo=f.prototype.compare,c.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,r=$(t).value;return e===r?0:e>r?1:-1},c.prototype.compareTo=c.prototype.compare,s.prototype.equals=function(t){return 0===this.compare(t)},c.prototype.eq=c.prototype.equals=f.prototype.eq=f.prototype.equals=s.prototype.eq=s.prototype.equals,s.prototype.notEquals=function(t){return 0!==this.compare(t)},c.prototype.neq=c.prototype.notEquals=f.prototype.neq=f.prototype.notEquals=s.prototype.neq=s.prototype.notEquals,s.prototype.greater=function(t){return this.compare(t)>0},c.prototype.gt=c.prototype.greater=f.prototype.gt=f.prototype.greater=s.prototype.gt=s.prototype.greater,s.prototype.lesser=function(t){return this.compare(t)<0},c.prototype.lt=c.prototype.lesser=f.prototype.lt=f.prototype.lesser=s.prototype.lt=s.prototype.lesser,s.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},c.prototype.geq=c.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals,s.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},c.prototype.leq=c.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals,s.prototype.isEven=function(){return!(1&this.value[0])},f.prototype.isEven=function(){return!(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},s.prototype.isOdd=function(){return!(1&~this.value[0])},f.prototype.isOdd=function(){return!(1&~this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},s.prototype.isPositive=function(){return!this.sign},f.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=f.prototype.isPositive,s.prototype.isNegative=function(){return this.sign},f.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=f.prototype.isNegative,s.prototype.isUnit=function(){return!1},f.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},s.prototype.isZero=function(){return!1},f.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},s.prototype.isDivisibleBy=function(t){var e=$(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},c.prototype.isDivisibleBy=f.prototype.isDivisibleBy=s.prototype.isDivisibleBy,s.prototype.isPrime=function(e){var r=C(this);if(r!==t)return r;var n=this.abs(),o=n.bitLength();if(o<=64)return P(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*o.toJSNumber(),a=Math.ceil(!0===e?2*Math.pow(i,2):i),u=[],s=0;s<a;s++)u.push(O(s+2));return P(n,u)},c.prototype.isPrime=f.prototype.isPrime=s.prototype.isPrime,s.prototype.isProbablePrime=function(e){var r=C(this);if(r!==t)return r;for(var n=this.abs(),o=e===t?5:e,i=[],a=0;a<o;a++)i.push(O.randBetween(2,n.minus(2)));return P(n,i)},c.prototype.isProbablePrime=f.prototype.isProbablePrime=s.prototype.isProbablePrime,s.prototype.modInv=function(t){for(var e,r,n,o=O.zero,i=O.one,a=$(t),u=this.abs();!u.isZero();)e=a.divide(u),r=o,n=a,o=i,a=u,i=r.subtract(e.multiply(i)),u=n.subtract(e.multiply(u));if(!a.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(t)),this.isNegative()?o.negate():o},c.prototype.modInv=f.prototype.modInv=s.prototype.modInv,s.prototype.next=function(){var t=this.value;return this.sign?T(t,1,this.sign):new s(_(t,1),this.sign)},f.prototype.next=function(){var t=this.value;return t+1<n?new f(t+1):new s(o,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},s.prototype.prev=function(){var t=this.value;return this.sign?new s(_(t,1),!0):T(t,1,this.sign)},f.prototype.prev=function(){var t=this.value;return t-1>-n?new f(t-1):new s(o,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var B=[1];2*B[B.length-1]<=e;)B.push(2*B[B.length-1]);var R=B.length,F=B[R-1];function L(t){return Math.abs(t)<=e}function U(t,e,r){e=$(e);for(var n=t.isNegative(),o=e.isNegative(),i=n?t.not():t,a=o?e.not():e,u=0,s=0,f=null,c=null,l=[];!i.isZero()||!a.isZero();)u=(f=N(i,F))[1].toJSNumber(),n&&(u=F-1-u),s=(c=N(a,F))[1].toJSNumber(),o&&(s=F-1-s),i=f[0],a=c[0],l.push(r(u,s));for(var p=0!==r(n?1:0,o?1:0)?O(-1):O(0),d=l.length-1;d>=0;d-=1)p=p.multiply(F).add(O(l[d]));return p}s.prototype.shiftLeft=function(t){var e=$(t).toJSNumber();if(!L(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var r=this;if(r.isZero())return r;for(;e>=R;)r=r.multiply(F),e-=R-1;return r.multiply(B[e])},c.prototype.shiftLeft=f.prototype.shiftLeft=s.prototype.shiftLeft,s.prototype.shiftRight=function(t){var e,r=$(t).toJSNumber();if(!L(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=R;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=N(n,F))[1].isNegative()?e[0].prev():e[0],r-=R-1}return(e=N(n,B[r]))[1].isNegative()?e[0].prev():e[0]},c.prototype.shiftRight=f.prototype.shiftRight=s.prototype.shiftRight,s.prototype.not=function(){return this.negate().prev()},c.prototype.not=f.prototype.not=s.prototype.not,s.prototype.and=function(t){return U(this,t,(function(t,e){return t&e}))},c.prototype.and=f.prototype.and=s.prototype.and,s.prototype.or=function(t){return U(this,t,(function(t,e){return t|e}))},c.prototype.or=f.prototype.or=s.prototype.or,s.prototype.xor=function(t){return U(this,t,(function(t,e){return t^e}))},c.prototype.xor=f.prototype.xor=s.prototype.xor;var j=1<<30,G=(e&-e)*(e&-e)|j;function q(t){var r=t.value,n="number"==typeof r?r|j:"bigint"==typeof r?r|BigInt(j):r[0]+r[1]*e|G;return n&-n}function k(t,e){if(e.compareTo(t)<=0){var r=k(t,e.square(e)),n=r.p,o=r.e,i=n.multiply(e);return i.compareTo(t)<=0?{p:i,e:2*o+1}:{p:n,e:2*o}}return{p:O(1),e:0}}function Y(t,e){return t=$(t),e=$(e),t.greater(e)?t:e}function V(t,e){return t=$(t),e=$(e),t.lesser(e)?t:e}function H(t,e){if(t=$(t).abs(),e=$(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,n,o=u[1];t.isEven()&&e.isEven();)r=V(q(t),q(e)),t=t.divide(r),e=e.divide(r),o=o.multiply(r);for(;t.isEven();)t=t.divide(q(t));do{for(;e.isEven();)e=e.divide(q(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return o.isUnit()?t:t.multiply(o)}s.prototype.bitLength=function(){var t=this;return t.compareTo(O(0))<0&&(t=t.negate().subtract(O(1))),0===t.compareTo(O(0))?O(0):O(k(t,O(2)).e).add(O(1))},c.prototype.bitLength=f.prototype.bitLength=s.prototype.bitLength;var z=function(t,e,r,n){r=r||i,t=String(t),n||(t=t.toLowerCase(),r=r.toLowerCase());var o,a=t.length,u=Math.abs(e),s={};for(o=0;o<r.length;o++)s[r[o]]=o;for(o=0;o<a;o++)if("-"!==(l=t[o])&&l in s&&s[l]>=u){if("1"===l&&1===u)continue;throw new Error(l+" is not a valid digit in base "+e+".")}e=$(e);var f=[],c="-"===t[0];for(o=c?1:0;o<t.length;o++){var l;if((l=t[o])in s)f.push($(s[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var p=o;do{o++}while(">"!==t[o]&&o<t.length);f.push($(t.slice(p+1,o)))}}return K(f,e,c)};function K(t,e,r){var n,o=u[0],i=u[1];for(n=t.length-1;n>=0;n--)o=o.add(t[n].times(i)),i=i.times(e);return r?o.negate():o}function W(t,e){if((e=O(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(t.isNegative()&&e.isPositive()&&(n=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var o,i=[],a=t;a.isNegative()||a.compareAbs(e)>=0;){o=a.divmod(e),a=o.quotient;var u=o.remainder;u.isNegative()&&(u=e.minus(u).abs(),a=a.next()),i.push(u.toJSNumber())}return i.push(a.toJSNumber()),{value:i.reverse(),isNegative:n}}function Z(t,e,r){var n=W(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||i).length?e[t]:"<"+t+">"}(t,r)})).join("")}function J(t){if(l(+t)){var e=+t;if(e===g(e))return a?new c(BigInt(e)):new f(e);throw new Error("Invalid integer: "+t)}var n="-"===t[0];n&&(t=t.slice(1));var o=t.split(/e/i);if(o.length>2)throw new Error("Invalid integer: "+o.join("e"));if(2===o.length){var i=o[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==g(i)||!l(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var u=o[0],p=u.indexOf(".");if(p>=0&&(i-=u.length-p-1,u=u.slice(0,p)+u.slice(p+1)),i<0)throw new Error("Cannot include negative exponent part for integers");t=u+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(a)return new c(BigInt(n?"-"+t:t));for(var d=[],y=t.length,m=r,v=y-m;y>0;)d.push(+t.slice(v,y)),(v-=m)<0&&(v=0),y-=m;return h(d),new s(d,n)}function $(t){return"number"==typeof t?function(t){if(a)return new c(BigInt(t));if(l(t)){if(t!==g(t))throw new Error(t+" is not an integer.");return new f(t)}return J(t.toString())}(t):"string"==typeof t?J(t):"bigint"==typeof t?new c(t):t}s.prototype.toArray=function(t){return W(this,t)},f.prototype.toArray=function(t){return W(this,t)},c.prototype.toArray=function(t){return W(this,t)},s.prototype.toString=function(e,r){if(e===t&&(e=10),10!==e)return Z(this,e,r);for(var n,o=this.value,i=o.length,a=String(o[--i]);--i>=0;)n=String(o[i]),a+="0000000".slice(n.length)+n;return(this.sign?"-":"")+a},f.prototype.toString=function(e,r){return e===t&&(e=10),10!=e?Z(this,e,r):String(this.value)},c.prototype.toString=f.prototype.toString,c.prototype.toJSON=s.prototype.toJSON=f.prototype.toJSON=function(){return this.toString()},s.prototype.valueOf=function(){return parseInt(this.toString(),10)},s.prototype.toJSNumber=s.prototype.valueOf,f.prototype.valueOf=function(){return this.value},f.prototype.toJSNumber=f.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Q=0;Q<1e3;Q++)u[Q]=$(Q),Q>0&&(u[-Q]=$(-Q));return u.one=u[1],u.zero=u[0],u.minusOne=u[-1],u.max=Y,u.min=V,u.gcd=H,u.lcm=function(t,e){return t=$(t).abs(),e=$(e).abs(),t.divide(H(t,e)).multiply(e)},u.isInstance=function(t){return t instanceof s||t instanceof f||t instanceof c},u.randBetween=function(t,r){var n=V(t=$(t),r=$(r)),o=Y(t,r).subtract(n).add(1);if(o.isSmall)return n.add(Math.floor(Math.random()*o));for(var i=W(o,e).value,a=[],s=!0,f=0;f<i.length;f++){var c=s?i[f]:e,l=g(Math.random()*c);a.push(l),l<c&&(s=!1)}return n.add(u.fromArray(a,e,!1))},u.fromArray=function(t,e,r){return K(t.map($),$(e||10),r)},u}());"function"==typeof define&&define.amd&&define("big-integer",[],(function(){return O}));var D=O;function N(t){const e=(t=t||{}).BASE64,r=t.debug,n=t.constants,o=t.manifestModel,i=t.settings,a=["AAC","AACL","AACH","AACP","AVC1","H264","TTML","DFXP"],u={CAPT:"main",SUBT:"alternate",DESC:"main"},s={DESC:"2"},f={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"};let l,p,d;function h(t,e){const r=t.getAttribute(e);return!!r&&"true"===r.toLowerCase()}function y(t,e){const r={},n=[];let o,i,a,f,l;const p=t.getAttribute("Name"),d=t.getAttribute("Type"),h=t.getAttribute("Language"),y=h?d+"_"+h:d;for(r.id=p||y,r.contentType=d,r.lang=h||"und",r.mimeType=c[d],r.subType=t.getAttribute("Subtype"),r.maxWidth=t.getAttribute("MaxWidth"),r.maxHeight=t.getAttribute("MaxHeight"),r.subType&&(u[r.subType]&&(r.Role=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:u[r.subType]}]),s[r.subType]&&(r.Accessibility=[{schemeIdUri:"urn:tva:metadata:cs:AudioPurposeCS:2007",value:s[r.subType]}])),o=function(t,e){const r={};let n,o,i;return i=t.getAttribute("Url"),n=i?i.replace("{bitrate}","$Bandwidth$"):null,n=n?n.replace("{start time}","$Time$"):null,o=t.getAttribute("TimeScale"),o=o?parseFloat(o):e,r.media=n,r.timescale=o,r.SegmentTimeline=function(t,e){const r={},n=t.getElementsByTagName("c"),o=[];let i,a,u,s,f,c,l=0;for(s=0;s<n.length;s++)if(i={},u=n[s].getAttribute("t"),u&&D(u).greater(D(Number.MAX_SAFE_INTEGER))&&(i.tManifest=u),i.t=parseFloat(u),i.d=parseFloat(n[s].getAttribute("d")),0!==s||i.t||(i.t=0),s>0&&(a=o[o.length-1],a.d||(a.tManifest?a.d=D(u).subtract(D(a.tManifest)).toJSNumber():a.d=i.t-a.t,l+=a.d),i.t||(a.tManifest?(i.tManifest=D(a.tManifest).add(D(a.d)).toString(),i.t=parseFloat(i.tManifest)):i.t=a.t+a.d)),i.d&&(l+=i.d),o.push(i),c=parseFloat(n[s].getAttribute("r")),c)for(f=0;f<c-1;f++)a=o[o.length-1],i={},i.t=a.t+a.d,i.d=a.d,a.tManifest&&(i.tManifest=D(a.tManifest).add(D(a.d)).toString()),l+=i.d,o.push(i);return r.S=o,r.duration=l/e,r}(t,r.timescale),r.availabilityTimeOffset="INF",r}(t,e),i=t.getElementsByTagName("QualityLevel"),f=0;f<i.length;f++)i[f].BaseURL=r.BaseURL,i[f].mimeType=r.mimeType,l=i[f].getAttribute("Index"),i[f].Id=r.id+(null!==l?"_"+l:""),a=g(i[f],t),null!==a&&(a.SegmentTemplate=o,n.push(a));return 0===n.length?null:(r.Representation=n,r.SegmentTemplate=o,r)}function g(t,e){const r={},o=e.getAttribute("Type");let i=null,u=null,s=null;if(r.id=t.Id,r.bandwidth=parseInt(t.getAttribute("Bitrate"),10),r.mimeType=t.mimeType,u=parseInt(t.getAttribute("MaxWidth"),10),s=parseInt(t.getAttribute("MaxHeight"),10),isNaN(u)||(r.width=u),isNaN(s)||(r.height=s),i=t.getAttribute("FourCC"),null!==i&&""!==i||(i=e.getAttribute("FourCC")),null===i||""===i)if(o===n.AUDIO)i="AAC";else if(o===n.VIDEO)return p.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;return-1===a.indexOf(i.toUpperCase())?(p.warn("Codec not supported: "+i),null):("H264"===i||"AVC1"===i?r.codecs=function(t){let e,r,n=t.getAttribute("CodecPrivateData").toString();return e=/00000001[0-9]7/.exec(n),r=e&&e[0]?n.substr(n.indexOf(e[0])+10,6):void 0,"avc1."+r}(t):i.indexOf("AAC")>=0?(r.codecs=function(t,e){const r=parseInt(t.getAttribute("SamplingRate"),10);let n,o,i,a,u=t.getAttribute("CodecPrivateData").toString(),s=0;return"AACH"===e&&(s=5),void 0===u||""===u?(s=2,i=f[r],"AACH"===e?(s=5,u=new Uint8Array(4),a=f[2*r],u[0]=s<<3|i>>1,u[1]=i<<7|t.Channels<<3|a>>1,u[2]=a<<7|8,u[3]=0,o=new Uint16Array(2),o[0]=(u[0]<<8)+u[1],o[1]=(u[2]<<8)+u[3],n=o[0].toString(16),n=o[0].toString(16)+o[1].toString(16)):(u=new Uint8Array(2),u[0]=s<<3|i>>1,u[1]=i<<7|parseInt(t.getAttribute("Channels"),10)<<3,o=new Uint16Array(1),o[0]=(u[0]<<8)+u[1],n=o[0].toString(16)),u=""+n,u=u.toUpperCase(),t.setAttribute("CodecPrivateData",u)):0===s&&(s=(248&parseInt(u.substr(0,2),16))>>3),"mp4a.40."+s}(t,i),r.audioSamplingRate=parseInt(t.getAttribute("SamplingRate"),10),r.audioChannels=parseInt(t.getAttribute("Channels"),10)):(i.indexOf("TTML")||i.indexOf("DFXP"))&&(r.codecs=n.STPP),r.codecPrivateData=""+t.getAttribute("CodecPrivateData"),r.BaseURL=t.BaseURL,r)}function m(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function v(t){const r={},a=[],u=t.getElementsByTagName("SmoothStreamingMedia")[0],s=t.getElementsByTagName("Protection")[0];let f,c,l,p,g,v,_,E,T,b,A,S=null;r.protocol="MSS",r.profiles="urn:mpeg:dash:profile:isoff-live:2011",r.type=h(u,"IsLive")?"dynamic":"static",E=u.getAttribute("TimeScale"),r.timescale=E?parseFloat(E):1e7;let w=parseFloat(u.getAttribute("DVRWindowLength"));"dynamic"!==r.type||0!==w&&!isNaN(w)||(w=1/0),0===w&&h(u,"CanSeek")&&(w=1/0),w>0&&(r.timeShiftBufferDepth=w/r.timescale);let x=parseFloat(u.getAttribute("Duration"));for(r.mediaPresentationDuration=0===x?1/0:x/r.timescale,r.minBufferTime=2,r.ttmlTimeIsRelative=!0,"dynamic"===r.type&&x>0&&(r.type="static",r.timeShiftBufferDepth=x/r.timescale),"dynamic"===r.type&&(r.refreshManifestOnSwitchTrack=!0,r.doNotUpdateDVRWindowOnBufferUpdated=!0,r.ignorePostponeTimePeriod=!0,r.availabilityStartTime=new Date(null)),f=function(t,e){const r={};let n,o;r.AdaptationSet=[],n=t.getElementsByTagName("StreamIndex");for(let t=0;t<n.length;t++)o=y(n[t],e),null!==o&&r.AdaptationSet.push(o);return r}(u,r.timescale),r.Period=[f],f.start=0,void 0!==s&&(S=t.getElementsByTagName("ProtectionHeader")[0],S.firstChild.data=S.firstChild.data.replace(/\n|\r/g,""),p=function(t){let r,n,o,i;var a;return r=e.decodeArray(t.firstChild.data),n=function(t){let e,r,n,o,i,a=0;for(e=(t[a+3]<<24)+(t[a+2]<<16)+(t[a+1]<<8)+t[a],a+=4,r=(t[a+1]<<8)+t[a],a+=2;a<t.length;)if(n=(t[a+1]<<8)+t[a],a+=2,1===n)return o=(t[a+1]<<8)+t[a],a+=2,i=new Uint8Array(o),i.set(t.subarray(a,a+o)),i;return null}(r),n&&(n=new Uint16Array(n.buffer),n=String.fromCharCode.apply(null,n),o=(new DOMParser).parseFromString(n,"application/xml"),i=o.querySelector("KID").textContent,i=e.decodeArray(i),m(a=i,0,3),m(a,1,2),m(a,4,5),m(a,6,7)),i}(S),l=function(t){return{schemeIdUri:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",value:"com.microsoft.playready",pro:{__text:t.firstChild.data,__prefix:"mspr"}}}(S),l["cenc:default_KID"]=p,a.push(l),l=function(t){let r={schemeIdUri:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",value:"com.widevine.alpha"};if(!t)return r;const n=new Uint8Array(2+t.length);n[0]=18,n[1]=16,n.set(t,2);const o=32+n.length;let i=new Uint8Array(o),a=0;return i[a++]=(4278190080&o)>>24,i[a++]=(16711680&o)>>16,i[a++]=(65280&o)>>8,i[a++]=255&o,i.set([112,115,115,104,0,0,0,0],a),a+=8,i.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],a),a+=16,i[a++]=(4278190080&n.length)>>24,i[a++]=(16711680&n.length)>>16,i[a++]=(65280&n.length)>>8,i[a++]=255&n.length,i.set(n,a),i=String.fromCharCode.apply(null,i),i=e.encodeASCII(i),r.pssh={__text:i},r}(p),l["cenc:default_KID"]=p,a.push(l),r.ContentProtection=a),c=f.AdaptationSet,b=0;b<c.length;b+=1)c[b].SegmentTemplate.initialization="$Bandwidth$",void 0!==r.ContentProtection&&(c[b].ContentProtection=r.ContentProtection,c[b].ContentProtection=r.ContentProtection),"video"===c[b].contentType&&(T=c[b].SegmentTemplate.SegmentTimeline.S[0].d/c[b].SegmentTemplate.timescale,r.minBufferTime=T,"dynamic"===r.type&&r.timeShiftBufferDepth>0&&r.timeShiftBufferDepth!==1/0&&r.timeShiftBufferDepth>c[b].SegmentTemplate.SegmentTimeline.duration&&(r.timeShiftBufferDepth=c[b].SegmentTemplate.SegmentTimeline.duration));if(r.minBufferTime=Math.min(r.minBufferTime,r.timeShiftBufferDepth?r.timeShiftBufferDepth:1/0),"dynamic"===r.type){let t=i.get().streaming.delay.liveDelay;t||(t=T*(null===i.get().streaming.delay.liveDelayFragmentCount||isNaN(i.get().streaming.delay.liveDelayFragmentCount)?4:i.get().streaming.delay.liveDelayFragmentCount));let e=Math.max(r.timeShiftBufferDepth-10,r.timeShiftBufferDepth/2),n=Math.min(e,t),o=n-1.5*T;d={streaming:{buffer:{bufferTimeDefault:i.get().streaming.buffer.bufferTimeDefault,bufferTimeAtTopQuality:i.get().streaming.buffer.bufferTimeAtTopQuality,bufferTimeAtTopQualityLongForm:i.get().streaming.buffer.bufferTimeAtTopQualityLongForm},timeShiftBuffer:{calcFromSegmentTimeline:i.get().streaming.timeShiftBuffer.calcFromSegmentTimeline},delay:{liveDelay:i.get().streaming.delay.liveDelay}}},i.update({streaming:{buffer:{bufferTimeDefault:o,bufferTimeAtTopQuality:o,bufferTimeAtTopQualityLongForm:o},timeShiftBuffer:{calcFromSegmentTimeline:!0},delay:{liveDelay:n}}})}if(delete r.ContentProtection,"static"===r.type){var I=o.getValue();if(I&&I.timestampOffset)g=I.timestampOffset;else for(b=0;b<c.length;b++)c[b].contentType!==n.AUDIO&&c[b].contentType!==n.VIDEO||(_=c[b].SegmentTemplate.SegmentTimeline.S,v=_[0].t,void 0===g&&(g=v),g=Math.min(g,v),r.mediaPresentationDuration=Math.min(r.mediaPresentationDuration,c[b].SegmentTemplate.SegmentTimeline.duration));if(g>0){for(r.timestampOffset=g,b=0;b<c.length;b++){for(_=c[b].SegmentTemplate.SegmentTimeline.S,A=0;A<_.length;A++)_[A].tManifest||(_[A].tManifest=_[A].t.toString()),_[A].t-=g;c[b].contentType!==n.AUDIO&&c[b].contentType!==n.VIDEO||(f.start=Math.max(_[0].t,f.start),c[b].SegmentTemplate.presentationTimeOffset=f.start)}f.start/=r.timescale}}return r.mediaPresentationDuration=Math.floor(1e3*r.mediaPresentationDuration)/1e3,f.duration=r.mediaPresentationDuration,r}return l={parse:function(t){let e=null,r=null;const n=window.performance.now();e=function(t){let e=null;if(window.DOMParser&&(e=(new window.DOMParser).parseFromString(t,"text/xml"),e.getElementsByTagName("parsererror").length>0))throw new Error("parsing the manifest failed");return e}(t);const o=window.performance.now();if(null===e)return null;r=v(e,new Date);const i=window.performance.now();return p.info("Parsing complete: (xmlParsing: "+(o-n).toPrecision(3)+"ms, mss2dash: "+(i-o).toPrecision(3)+"ms, total: "+((i-n)/1e3).toPrecision(3)+"s)"),r},getIron:function(){return null},reset:function(){d&&i.update(d)}},p=r.getLogger(l),l}N.__dashjs_factory_name="MssParser";var M=f.getClassFactory(N);function C(){let t={};function e(e,r,o,i={},a=!1){if(!e)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);let u=i.priority||0;if(n(e,r,o)>=0)return;t[e]=t[e]||[];const s={callback:r,scope:o,priority:u,executeOnlyOnce:a};o&&o.getStreamId&&(s.streamId=o.getStreamId()),o&&o.getType&&(s.mediaType=o.getType()),i&&i.mode&&(s.mode=i.mode),t[e].some(((r,n)=>{if(r&&u>r.priority)return t[e].splice(n,0,s),!0}))||t[e].push(s)}function r(e,r,o){if(!e||!r||!t[e])return;const i=n(e,r,o);i<0||(t[e][i]=null)}function n(e,r,n){let o=-1;return t[e]?(t[e].some(((t,e)=>{if(t&&t.callback===r&&(!n||n===t.scope))return o=e,!0})),o):o}return{on:function(t,r,n,o={}){e(t,r,n,o)},once:function(t,r,n,o={}){e(t,r,n,o,!0)},off:r,trigger:function(e,n={},o={}){if(!e||!t[e])return;if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=e,o.streamId&&(n.streamId=o.streamId),o.mediaType&&(n.mediaType=o.mediaType);const i=[];t[e].filter((t=>!(!t||o.streamId&&t.streamId&&t.streamId!==o.streamId||o.mediaType&&t.mediaType&&t.mediaType!==o.mediaType||o.mode&&t.mode&&t.mode!==o.mode||!t.mode&&o.mode&&o.mode===g.EVENT_MODE_ON_RECEIVE))).forEach((t=>{t&&t.callback.call(t.scope,n),t.executeOnlyOnce&&i.push(t)})),i.forEach((t=>{r(e,t.callback,t.scope)}))},reset:function(){t={}}}}C.__dashjs_factory_name="EventBus";const P=f.getSingletonFactory(C);P.EVENT_PRIORITY_LOW=0,P.EVENT_PRIORITY_HIGH=5e3,f.updateSingletonFactory(C.__dashjs_factory_name,P);var B=P;function R(t){t=t||{};const e=this.context,r=t.eventBus,n=t.events,a=t.constants,s=t.initSegmentType,f=t.playbackController,c=t.streamController;let d,h,y,g;function m(t){return c.getActiveStreamProcessors().filter((e=>e.getType()===t))[0]}function v(t){return y.filter((e=>e.getType()===t))[0]}function _(){c.getActiveStreamProcessors().forEach((function(r){if(r.getType()===a.VIDEO||r.getType()===a.AUDIO||r.getType()===a.TEXT){let n=v(r.getType());n||(n=l(e).create({streamProcessor:r,baseURLController:t.baseURLController,debug:t.debug}),n.initialize(),y.push(n)),n.start()}}))}function E(e){let i=m(e.mediaType);if(!i)return;let a=i.getRepresentationController().getCurrentRepresentation(),f=i.getMediaInfo(),c=new u;c.mediaType=a.adaptation.type,c.type=s,c.range=a.range,c.bandwidth=a.bandwidth,c.representation=a;const l=function(t,e,r){const n=new o;return n.streamId=e,n.segmentType=t.type,n.start=t.startTime,n.duration=t.duration,n.end=n.start+n.duration,n.index=t.index,n.bandwidth=t.bandwidth,n.representation=t.representation,n.endFragment=r,n}(c,f.streamInfo.id,e.type!==n.FRAGMENT_LOADING_PROGRESS);try{l.bytes=h.generateMoov(a),r.trigger(n.INIT_FRAGMENT_LOADED,{chunk:l},{streamId:f.streamInfo.id,mediaType:a.adaptation.type})}catch(e){t.errHandler.error(new p(e.code,e.message,e.data))}e.sender=null}function T(t){if(t.error)return;let e=m(t.request.mediaType);if(!e)return;if(h.processFragment(t,e),t.request.type===i.MSS_FRAGMENT_INFO_SEGMENT_TYPE){let e=v(t.request.mediaType);e&&e.fragmentInfoLoaded(t)}let r=t.request.representation.mediaInfo.streamInfo.manifestInfo;r.isDynamic||r.dvrWindowSize===1/0||_()}function b(){f.getIsDynamic()&&0!==f.getTime()&&_()}function A(){f.getIsDynamic()&&0!==f.getTime()&&_()}function S(t){t&&t.data&&(t.data=t.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"))}return g={reset:function(){d&&(d.reset(),d=void 0),r.off(n.INIT_FRAGMENT_NEEDED,E,this),r.off(n.PLAYBACK_PAUSED,b,this),r.off(n.PLAYBACK_SEEKING,A,this),r.off(n.FRAGMENT_LOADING_COMPLETED,T,this),r.off(n.TTML_TO_PARSE,S,this),y.forEach((t=>{t.reset()})),y=[]},createMssParser:function(){return d=M(e).create(t),d},createMssFragmentProcessor:function(){h=I(e).create(t)},registerEvents:function(){r.on(n.INIT_FRAGMENT_NEEDED,E,g,{priority:B.EVENT_PRIORITY_HIGH}),r.on(n.PLAYBACK_PAUSED,b,g,{priority:B.EVENT_PRIORITY_HIGH}),r.on(n.PLAYBACK_SEEKING,A,g,{priority:B.EVENT_PRIORITY_HIGH}),r.on(n.FRAGMENT_LOADING_COMPLETED,T,g,{priority:B.EVENT_PRIORITY_HIGH}),r.on(n.TTML_TO_PARSE,S,g)}},y=[],g}R.__dashjs_factory_name="MssHandler";const F=f.getClassFactory(R);F.errors=h,f.updateClassFactory(R.__dashjs_factory_name,F);var L=F,U="undefined"!=typeof window&&window||global,j=U.dashjs;j||(j=U.dashjs={}),j.MssHandler=L;var G=j;return n.default}()}));
//# sourceMappingURL=dash.mss.min.js.map